


<!DOCTYPE html>
<html id="htmlId">
<head>
  <title>Coverage Report > ExtraPanel</title>
  <style type="text/css">
    @import "../../css/coverage.css";
    @import "../../css/idea.min.css";
  </style>
  <script type="text/javascript" src="../../js/highlight.min.js"></script>
  <script type="text/javascript" src="../../js/highlightjs-line-numbers.min.js"></script>
</head>

<body>
<div class="content">
<div class="breadCrumbs">
Current scope:     <a href="../../index.html">all classes</a>
    <span class="separator">|</span>
    <a href="../index.html">megamek.client.ui.swing.unitDisplay</a>
</div>

<h1>Coverage Summary for Class: ExtraPanel (megamek.client.ui.swing.unitDisplay)</h1>

<table class="coverageStats">
<tr>
  <th class="name">Class</th>
<th class="coverageStat 
">
  Class, %
</th>
<th class="coverageStat 
">
  Method, %
</th>
<th class="coverageStat 
">
  Line, %
</th>
</tr>
<tr>
  <td class="name">ExtraPanel</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/7)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/410)
  </span>
</td>
</tr>

</table>

<br/>
<br/>


<pre>
<code class="sourceCode" id="sourceCode">&nbsp;package megamek.client.ui.swing.unitDisplay;
&nbsp;
&nbsp;import java.awt.Color;
&nbsp;import java.awt.GridBagConstraints;
&nbsp;import java.awt.GridBagLayout;
&nbsp;import java.awt.Image;
&nbsp;import java.awt.Insets;
&nbsp;import java.awt.Rectangle;
&nbsp;import java.awt.event.ActionEvent;
&nbsp;import java.awt.event.ActionListener;
&nbsp;import java.awt.event.ItemEvent;
&nbsp;import java.awt.event.ItemListener;
&nbsp;import java.util.Enumeration;
&nbsp;
&nbsp;import javax.swing.DefaultListModel;
&nbsp;import javax.swing.JButton;
&nbsp;import javax.swing.JComboBox;
&nbsp;import javax.swing.JLabel;
&nbsp;import javax.swing.JList;
&nbsp;import javax.swing.JScrollPane;
&nbsp;import javax.swing.JTextArea;
&nbsp;import javax.swing.ScrollPaneConstants;
&nbsp;import javax.swing.SwingConstants;
&nbsp;
&nbsp;import megamek.client.ui.Messages;
&nbsp;import megamek.client.ui.swing.ClientGUI;
&nbsp;import megamek.client.ui.swing.HeatEffects;
&nbsp;import megamek.client.ui.swing.Slider;
&nbsp;import megamek.client.ui.swing.widget.BackGroundDrawer;
&nbsp;import megamek.client.ui.swing.widget.PMUtil;
&nbsp;import megamek.client.ui.swing.widget.PicMap;
&nbsp;import megamek.client.ui.swing.widget.SkinXMLHandler;
&nbsp;import megamek.client.ui.swing.widget.UnitDisplaySkinSpecification;
&nbsp;import megamek.common.BattleArmor;
&nbsp;import megamek.common.ComputeECM;
&nbsp;import megamek.common.Configuration;
&nbsp;import megamek.common.Coords;
&nbsp;import megamek.common.Entity;
&nbsp;import megamek.common.IGame;
&nbsp;import megamek.common.ILocationExposureStatus;
&nbsp;import megamek.common.INarcPod;
&nbsp;import megamek.common.IPlayer;
&nbsp;import megamek.common.Mech;
&nbsp;import megamek.common.Mounted;
&nbsp;import megamek.common.Sensor;
&nbsp;import megamek.common.Tank;
&nbsp;import megamek.common.options.OptionsConstants;
&nbsp;import megamek.common.util.fileUtils.MegaMekFile;
&nbsp;import megamek.common.weapons.other.TSEMPWeapon;
&nbsp;
&nbsp;/**
&nbsp; * This class shows information about a unit that doesn&#39;t belong elsewhere.
&nbsp; */
&nbsp;class ExtraPanel extends PicMap implements ActionListener, ItemListener {
&nbsp;
&nbsp;    /**
&nbsp;     * 
&nbsp;     */
&nbsp;    private final UnitDisplay unitDisplay;
&nbsp;
&nbsp;    /**
&nbsp;     *
&nbsp;     */
&nbsp;    private static final long serialVersionUID = -4907296187995261075L;
&nbsp;
&nbsp;    private JLabel lblLastTarget;
&nbsp;    private JLabel curSensorsL;
&nbsp;    private JLabel narcLabel;
&nbsp;    private JLabel unusedL;
&nbsp;    private JLabel carrysL;
&nbsp;    private JLabel heatL;
&nbsp;    private JLabel sinksL;
&nbsp;    private JTextArea unusedR;
&nbsp;    private JTextArea carrysR;
&nbsp;    private JTextArea heatR;
&nbsp;    private JTextArea lastTargetR;
&nbsp;    private JTextArea sinksR;
&nbsp;    private JButton sinks2B;
&nbsp;    private JButton dumpBombs;
&nbsp;    private JList&lt;String&gt; narcList;
&nbsp;    private int myMechId;
&nbsp;
&nbsp;    private JComboBox&lt;String&gt; chSensors;
&nbsp;
&nbsp;    private Slider prompt;
&nbsp;
&nbsp;    private int sinks;
&nbsp;    private boolean dontChange;
&nbsp;
<b class="nc">&nbsp;    private int minTopMargin = 8;</b>
<b class="nc">&nbsp;    private int minLeftMargin = 8;</b>
&nbsp;
<b class="nc">&nbsp;    JButton activateHidden = new JButton(</b>
<b class="nc">&nbsp;            Messages.getString(&quot;MechDisplay.ActivateHidden.Label&quot;));</b>
&nbsp;
<b class="nc">&nbsp;    JComboBox&lt;String&gt; activateHiddenPhase = new JComboBox&lt;&gt;();</b>
&nbsp;
<b class="nc">&nbsp;    ExtraPanel(UnitDisplay unitDisplay) {</b>
<b class="nc">&nbsp;        this.unitDisplay = unitDisplay;</b>
<b class="nc">&nbsp;        prompt = null;</b>
&nbsp;
<b class="nc">&nbsp;        narcLabel = new JLabel(</b>
<b class="nc">&nbsp;                Messages.getString(&quot;MechDisplay.AffectedBy&quot;), SwingConstants.CENTER); //$NON-NLS-1$</b>
<b class="nc">&nbsp;        narcLabel.setOpaque(false);</b>
<b class="nc">&nbsp;        narcLabel.setForeground(Color.WHITE);</b>
&nbsp;
<b class="nc">&nbsp;        narcList = new JList&lt;String&gt;(new DefaultListModel&lt;String&gt;());</b>
&nbsp;
&nbsp;        // transport stuff
&nbsp;        // unusedL = new JLabel( &quot;Unused Space:&quot;, JLabel.CENTER );
&nbsp;
<b class="nc">&nbsp;        unusedL = new JLabel(</b>
<b class="nc">&nbsp;                Messages.getString(&quot;MechDisplay.UnusedSpace&quot;), SwingConstants.CENTER); //$NON-NLS-1$</b>
<b class="nc">&nbsp;        unusedL.setOpaque(false);</b>
<b class="nc">&nbsp;        unusedL.setForeground(Color.WHITE);</b>
<b class="nc">&nbsp;        unusedR = new JTextArea(&quot;&quot;, 2, 25); //$NON-NLS-1$</b>
<b class="nc">&nbsp;        unusedR.setEditable(false);</b>
<b class="nc">&nbsp;        unusedR.setOpaque(false);</b>
<b class="nc">&nbsp;        unusedR.setForeground(Color.WHITE);</b>
&nbsp;
<b class="nc">&nbsp;        carrysL = new JLabel(</b>
<b class="nc">&nbsp;                Messages.getString(&quot;MechDisplay.Carryng&quot;), SwingConstants.CENTER); //$NON-NLS-1$</b>
<b class="nc">&nbsp;        carrysL.setOpaque(false);</b>
<b class="nc">&nbsp;        carrysL.setForeground(Color.WHITE);</b>
<b class="nc">&nbsp;        carrysR = new JTextArea(&quot;&quot;, 4, 25); //$NON-NLS-1$</b>
<b class="nc">&nbsp;        carrysR.setEditable(false);</b>
<b class="nc">&nbsp;        carrysR.setOpaque(false);</b>
<b class="nc">&nbsp;        carrysR.setForeground(Color.WHITE);</b>
&nbsp;
<b class="nc">&nbsp;        sinksL = new JLabel(</b>
<b class="nc">&nbsp;                Messages.getString(&quot;MechDisplay.activeSinksLabel&quot;),</b>
&nbsp;                SwingConstants.CENTER);
<b class="nc">&nbsp;        sinksL.setOpaque(false);</b>
<b class="nc">&nbsp;        sinksL.setForeground(Color.WHITE);</b>
<b class="nc">&nbsp;        sinksR = new JTextArea(&quot;&quot;, 1, 25);</b>
<b class="nc">&nbsp;        sinksR.setEditable(false);</b>
<b class="nc">&nbsp;        sinksR.setOpaque(false);</b>
<b class="nc">&nbsp;        sinksR.setForeground(Color.WHITE);</b>
&nbsp;
<b class="nc">&nbsp;        sinks2B = new JButton(</b>
<b class="nc">&nbsp;                Messages.getString(&quot;MechDisplay.configureActiveSinksLabel&quot;));</b>
<b class="nc">&nbsp;        sinks2B.setActionCommand(&quot;changeSinks&quot;);</b>
<b class="nc">&nbsp;        sinks2B.addActionListener(this);</b>
&nbsp;
<b class="nc">&nbsp;        dumpBombs = new JButton(</b>
<b class="nc">&nbsp;                Messages.getString(&quot;MechDisplay.DumpBombsLabel&quot;));</b>
<b class="nc">&nbsp;        dumpBombs.setActionCommand(&quot;dumpBombs&quot;);</b>
<b class="nc">&nbsp;        dumpBombs.addActionListener(this);</b>
&nbsp;
<b class="nc">&nbsp;        heatL = new JLabel(</b>
<b class="nc">&nbsp;                Messages.getString(&quot;MechDisplay.HeatEffects&quot;), SwingConstants.CENTER); //$NON-NLS-1$</b>
<b class="nc">&nbsp;        heatL.setOpaque(false);</b>
<b class="nc">&nbsp;        heatL.setForeground(Color.WHITE);</b>
<b class="nc">&nbsp;        heatR = new JTextArea(&quot;&quot;, 4, 25); //$NON-NLS-1$</b>
<b class="nc">&nbsp;        heatR.setEditable(false);</b>
<b class="nc">&nbsp;        heatR.setOpaque(false);</b>
<b class="nc">&nbsp;        heatR.setForeground(Color.WHITE);</b>
&nbsp;        
<b class="nc">&nbsp;        lblLastTarget = new JLabel(</b>
<b class="nc">&nbsp;                Messages.getString(&quot;MechDisplay.LastTarget&quot;),</b>
&nbsp;                SwingConstants.CENTER);
<b class="nc">&nbsp;        lblLastTarget.setForeground(Color.WHITE);</b>
<b class="nc">&nbsp;        lblLastTarget.setOpaque(false);</b>
<b class="nc">&nbsp;        lastTargetR = new JTextArea(&quot;&quot;, 4, 25); //$NON-NLS-1$</b>
<b class="nc">&nbsp;        lastTargetR.setEditable(false);</b>
<b class="nc">&nbsp;        lastTargetR.setOpaque(false);</b>
<b class="nc">&nbsp;        lastTargetR.setForeground(Color.WHITE);</b>
&nbsp;
<b class="nc">&nbsp;        curSensorsL = new JLabel(</b>
<b class="nc">&nbsp;                (Messages.getString(&quot;MechDisplay.CurrentSensors&quot;))</b>
<b class="nc">&nbsp;                        .concat(&quot; &quot;),</b>
&nbsp;                SwingConstants.CENTER);
<b class="nc">&nbsp;        curSensorsL.setForeground(Color.WHITE);</b>
<b class="nc">&nbsp;        curSensorsL.setOpaque(false);</b>
&nbsp;
<b class="nc">&nbsp;        chSensors = new JComboBox&lt;String&gt;();</b>
<b class="nc">&nbsp;        chSensors.addItemListener(this);</b>
&nbsp;
<b class="nc">&nbsp;        activateHidden.setToolTipText(Messages</b>
<b class="nc">&nbsp;                .getString(&quot;MechDisplay.ActivateHidden.ToolTip&quot;));</b>
<b class="nc">&nbsp;        activateHiddenPhase.setToolTipText(Messages</b>
<b class="nc">&nbsp;                .getString(&quot;MechDisplay.ActivateHiddenPhase.ToolTip&quot;));</b>
<b class="nc">&nbsp;        activateHidden.addActionListener(this);</b>
<b class="nc">&nbsp;        activateHiddenPhase.addItem(IGame.Phase</b>
<b class="nc">&nbsp;                .getDisplayableName(IGame.Phase.PHASE_MOVEMENT));</b>
<b class="nc">&nbsp;        activateHiddenPhase.addItem(IGame.Phase</b>
<b class="nc">&nbsp;                .getDisplayableName(IGame.Phase.PHASE_FIRING));</b>
<b class="nc">&nbsp;        activateHiddenPhase.addItem(IGame.Phase</b>
<b class="nc">&nbsp;                .getDisplayableName(IGame.Phase.PHASE_PHYSICAL));</b>
<b class="nc">&nbsp;        activateHiddenPhase.addItem(Messages</b>
<b class="nc">&nbsp;                .getString(&quot;MechDisplay.ActivateHidden.StopActivating&quot;));</b>
&nbsp;
&nbsp;        // layout choice panel
&nbsp;        GridBagLayout gridbag;
&nbsp;        GridBagConstraints c;
&nbsp;
<b class="nc">&nbsp;        gridbag = new GridBagLayout();</b>
<b class="nc">&nbsp;        c = new GridBagConstraints();</b>
<b class="nc">&nbsp;        setLayout(gridbag);</b>
&nbsp;
<b class="nc">&nbsp;        c.fill = GridBagConstraints.BOTH;</b>
<b class="nc">&nbsp;        c.insets = new Insets(15, 9, 1, 9);</b>
<b class="nc">&nbsp;        c.gridwidth = GridBagConstraints.REMAINDER;</b>
<b class="nc">&nbsp;        c.anchor = GridBagConstraints.CENTER;</b>
<b class="nc">&nbsp;        c.weighty = 1.0;</b>
&nbsp;
<b class="nc">&nbsp;        gridbag.setConstraints(curSensorsL, c);</b>
<b class="nc">&nbsp;        add(curSensorsL);</b>
&nbsp;
<b class="nc">&nbsp;        gridbag.setConstraints(chSensors, c);</b>
<b class="nc">&nbsp;        add(chSensors);</b>
&nbsp;
<b class="nc">&nbsp;        gridbag.setConstraints(narcLabel, c);</b>
<b class="nc">&nbsp;        add(narcLabel);</b>
&nbsp;
<b class="nc">&nbsp;        c.insets = new Insets(1, 9, 1, 9);</b>
<b class="nc">&nbsp;        JScrollPane scrollPane = new JScrollPane(narcList);</b>
<b class="nc">&nbsp;        scrollPane</b>
<b class="nc">&nbsp;                .setHorizontalScrollBarPolicy(ScrollPaneConstants.HORIZONTAL_SCROLLBAR_NEVER);</b>
<b class="nc">&nbsp;        gridbag.setConstraints(scrollPane, c);</b>
<b class="nc">&nbsp;        add(scrollPane);</b>
&nbsp;
<b class="nc">&nbsp;        gridbag.setConstraints(unusedL, c);</b>
<b class="nc">&nbsp;        add(unusedL);</b>
&nbsp;
<b class="nc">&nbsp;        gridbag.setConstraints(unusedR, c);</b>
<b class="nc">&nbsp;        add(unusedR);</b>
&nbsp;
<b class="nc">&nbsp;        gridbag.setConstraints(carrysL, c);</b>
<b class="nc">&nbsp;        add(carrysL);</b>
&nbsp;
<b class="nc">&nbsp;        gridbag.setConstraints(carrysR, c);</b>
<b class="nc">&nbsp;        add(carrysR);</b>
&nbsp;
<b class="nc">&nbsp;        gridbag.setConstraints(dumpBombs, c);</b>
<b class="nc">&nbsp;        add(dumpBombs);</b>
&nbsp;
<b class="nc">&nbsp;        gridbag.setConstraints(sinksL, c);</b>
<b class="nc">&nbsp;        add(sinksL);</b>
&nbsp;
<b class="nc">&nbsp;        gridbag.setConstraints(sinksR, c);</b>
<b class="nc">&nbsp;        add(sinksR);</b>
&nbsp;
<b class="nc">&nbsp;        gridbag.setConstraints(sinks2B, c);</b>
<b class="nc">&nbsp;        add(sinks2B);</b>
&nbsp;
<b class="nc">&nbsp;        gridbag.setConstraints(heatL, c);</b>
<b class="nc">&nbsp;        add(heatL);</b>
&nbsp;
<b class="nc">&nbsp;        c.insets = new Insets(1, 9, 18, 9);</b>
<b class="nc">&nbsp;        gridbag.setConstraints(heatR, c);</b>
<b class="nc">&nbsp;        add(heatR);</b>
&nbsp;        
<b class="nc">&nbsp;        c.insets = new Insets(0, 0, 0, 0);</b>
<b class="nc">&nbsp;        gridbag.setConstraints(lblLastTarget, c);</b>
<b class="nc">&nbsp;        add(lblLastTarget);</b>
&nbsp;        
<b class="nc">&nbsp;        c.insets = new Insets(1, 9, 18, 9);</b>
<b class="nc">&nbsp;        gridbag.setConstraints(lastTargetR, c);</b>
<b class="nc">&nbsp;        add(lastTargetR);</b>
&nbsp;
<b class="nc">&nbsp;        c.insets = new Insets(1, 9, 1, 9);</b>
<b class="nc">&nbsp;        gridbag.setConstraints(activateHidden, c);</b>
<b class="nc">&nbsp;        c.insets = new Insets(1, 9, 6, 9);</b>
<b class="nc">&nbsp;        gridbag.setConstraints(activateHiddenPhase, c);</b>
<b class="nc">&nbsp;        add(activateHidden);</b>
<b class="nc">&nbsp;        add(activateHiddenPhase);</b>
&nbsp;
<b class="nc">&nbsp;        setBackGround();</b>
<b class="nc">&nbsp;        onResize();</b>
&nbsp;    }
&nbsp;
&nbsp;    @Override
&nbsp;    public void onResize() {
<b class="nc">&nbsp;        int w = getSize().width;</b>
<b class="nc">&nbsp;        Rectangle r = getContentBounds();</b>
<b class="nc">&nbsp;        if (r == null) {</b>
&nbsp;            return;
&nbsp;        }
<b class="nc">&nbsp;        int dx = Math.round(((w - r.width) / 2));</b>
<b class="nc">&nbsp;        if (dx &lt; minLeftMargin) {</b>
<b class="nc">&nbsp;            dx = minLeftMargin;</b>
&nbsp;        }
<b class="nc">&nbsp;        int dy = minTopMargin;</b>
<b class="nc">&nbsp;        setContentMargins(dx, dy, dx, dy);</b>
&nbsp;    }
&nbsp;
&nbsp;    private void setBackGround() {
&nbsp;        UnitDisplaySkinSpecification udSpec = SkinXMLHandler
<b class="nc">&nbsp;                .getUnitDisplaySkin();</b>
&nbsp;
<b class="nc">&nbsp;        Image tile = getToolkit()</b>
<b class="nc">&nbsp;                .getImage(</b>
<b class="nc">&nbsp;                        new MegaMekFile(Configuration.widgetsDir(), udSpec</b>
<b class="nc">&nbsp;                                .getBackgroundTile()).toString());</b>
<b class="nc">&nbsp;        PMUtil.setImage(tile, this);</b>
<b class="nc">&nbsp;        int b = BackGroundDrawer.TILING_BOTH;</b>
<b class="nc">&nbsp;        addBgDrawer(new BackGroundDrawer(tile, b));</b>
&nbsp;
<b class="nc">&nbsp;        b = BackGroundDrawer.TILING_HORIZONTAL | BackGroundDrawer.VALIGN_TOP;</b>
<b class="nc">&nbsp;        tile = getToolkit().getImage(</b>
<b class="nc">&nbsp;                new MegaMekFile(Configuration.widgetsDir(), udSpec.getTopLine())</b>
<b class="nc">&nbsp;                        .toString());</b>
<b class="nc">&nbsp;        PMUtil.setImage(tile, this);</b>
<b class="nc">&nbsp;        addBgDrawer(new BackGroundDrawer(tile, b));</b>
&nbsp;
<b class="nc">&nbsp;        b = BackGroundDrawer.TILING_HORIZONTAL | BackGroundDrawer.VALIGN_BOTTOM;</b>
<b class="nc">&nbsp;        tile = getToolkit().getImage(</b>
<b class="nc">&nbsp;                new MegaMekFile(Configuration.widgetsDir(), udSpec.getBottomLine())</b>
<b class="nc">&nbsp;                        .toString());</b>
<b class="nc">&nbsp;        PMUtil.setImage(tile, this);</b>
<b class="nc">&nbsp;        addBgDrawer(new BackGroundDrawer(tile, b));</b>
&nbsp;
<b class="nc">&nbsp;        b = BackGroundDrawer.TILING_VERTICAL | BackGroundDrawer.HALIGN_LEFT;</b>
<b class="nc">&nbsp;        tile = getToolkit().getImage(</b>
<b class="nc">&nbsp;                new MegaMekFile(Configuration.widgetsDir(), udSpec.getLeftLine())</b>
<b class="nc">&nbsp;                        .toString());</b>
<b class="nc">&nbsp;        PMUtil.setImage(tile, this);</b>
<b class="nc">&nbsp;        addBgDrawer(new BackGroundDrawer(tile, b));</b>
&nbsp;
<b class="nc">&nbsp;        b = BackGroundDrawer.TILING_VERTICAL | BackGroundDrawer.HALIGN_RIGHT;</b>
<b class="nc">&nbsp;        tile = getToolkit().getImage(</b>
<b class="nc">&nbsp;                new MegaMekFile(Configuration.widgetsDir(), udSpec.getRightLine())</b>
<b class="nc">&nbsp;                        .toString());</b>
<b class="nc">&nbsp;        PMUtil.setImage(tile, this);</b>
<b class="nc">&nbsp;        addBgDrawer(new BackGroundDrawer(tile, b));</b>
&nbsp;
<b class="nc">&nbsp;        b = BackGroundDrawer.NO_TILING | BackGroundDrawer.VALIGN_TOP</b>
&nbsp;                | BackGroundDrawer.HALIGN_LEFT;
<b class="nc">&nbsp;        tile = getToolkit().getImage(</b>
<b class="nc">&nbsp;                new MegaMekFile(Configuration.widgetsDir(), udSpec.getTopLeftCorner())</b>
<b class="nc">&nbsp;                        .toString());</b>
<b class="nc">&nbsp;        PMUtil.setImage(tile, this);</b>
<b class="nc">&nbsp;        addBgDrawer(new BackGroundDrawer(tile, b));</b>
&nbsp;
<b class="nc">&nbsp;        b = BackGroundDrawer.NO_TILING | BackGroundDrawer.VALIGN_BOTTOM</b>
&nbsp;                | BackGroundDrawer.HALIGN_LEFT;
<b class="nc">&nbsp;        tile = getToolkit().getImage(</b>
<b class="nc">&nbsp;                new MegaMekFile(Configuration.widgetsDir(), udSpec</b>
<b class="nc">&nbsp;                        .getBottomLeftCorner()).toString());</b>
<b class="nc">&nbsp;        PMUtil.setImage(tile, this);</b>
<b class="nc">&nbsp;        addBgDrawer(new BackGroundDrawer(tile, b));</b>
&nbsp;
<b class="nc">&nbsp;        b = BackGroundDrawer.NO_TILING | BackGroundDrawer.VALIGN_TOP</b>
&nbsp;                | BackGroundDrawer.HALIGN_RIGHT;
<b class="nc">&nbsp;        tile = getToolkit()</b>
<b class="nc">&nbsp;                .getImage(</b>
<b class="nc">&nbsp;                        new MegaMekFile(Configuration.widgetsDir(), udSpec</b>
<b class="nc">&nbsp;                                .getTopRightCorner()).toString());</b>
<b class="nc">&nbsp;        PMUtil.setImage(tile, this);</b>
<b class="nc">&nbsp;        addBgDrawer(new BackGroundDrawer(tile, b));</b>
&nbsp;
<b class="nc">&nbsp;        b = BackGroundDrawer.NO_TILING | BackGroundDrawer.VALIGN_BOTTOM</b>
&nbsp;                | BackGroundDrawer.HALIGN_RIGHT;
<b class="nc">&nbsp;        tile = getToolkit().getImage(</b>
<b class="nc">&nbsp;                new MegaMekFile(Configuration.widgetsDir(), udSpec</b>
<b class="nc">&nbsp;                        .getBottomRightCorner()).toString());</b>
<b class="nc">&nbsp;        PMUtil.setImage(tile, this);</b>
<b class="nc">&nbsp;        addBgDrawer(new BackGroundDrawer(tile, b));</b>
&nbsp;
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * updates fields for the specified mech
&nbsp;     */
&nbsp;    public void displayMech(Entity en) {
&nbsp;        // Clear the &quot;Affected By&quot; list.
<b class="nc">&nbsp;        ((DefaultListModel&lt;String&gt;) narcList.getModel()).removeAllElements();</b>
<b class="nc">&nbsp;        sinks = 0;</b>
<b class="nc">&nbsp;        myMechId = en.getId();</b>
<b class="nc">&nbsp;        ClientGUI clientgui = unitDisplay.getClientGUI();</b>
<b class="nc">&nbsp;        if ((clientgui != null) &amp;&amp; (clientgui.getClient().getLocalPlayer().getId() != en</b>
<b class="nc">&nbsp;                .getOwnerId())) {</b>
<b class="nc">&nbsp;            sinks2B.setEnabled(false);</b>
<b class="nc">&nbsp;            dumpBombs.setEnabled(false);</b>
<b class="nc">&nbsp;            chSensors.setEnabled(false);</b>
<b class="nc">&nbsp;            dontChange = true;</b>
&nbsp;        } else {
<b class="nc">&nbsp;            sinks2B.setEnabled(true);</b>
<b class="nc">&nbsp;            dumpBombs.setEnabled(false);</b>
<b class="nc">&nbsp;            chSensors.setEnabled(true);</b>
<b class="nc">&nbsp;            dontChange = false;</b>
&nbsp;        }
&nbsp;        // Walk through the list of teams. There
&nbsp;        // can&#39;t be more teams than players.
&nbsp;        StringBuffer buff;
<b class="nc">&nbsp;        if (clientgui != null) {</b>
<b class="nc">&nbsp;            Enumeration&lt;IPlayer&gt; loop = clientgui.getClient().getGame().getPlayers();</b>
<b class="nc">&nbsp;            while (loop.hasMoreElements()) {</b>
<b class="nc">&nbsp;                IPlayer player = loop.nextElement();</b>
<b class="nc">&nbsp;                int team = player.getTeam();</b>
<b class="nc">&nbsp;                if (en.isNarcedBy(team) &amp;&amp; !player.isObserver()) {</b>
<b class="nc">&nbsp;                    buff = new StringBuffer(</b>
<b class="nc">&nbsp;                            Messages.getString(&quot;MechDisplay.NARCedBy&quot;)); //$NON-NLS-1$</b>
<b class="nc">&nbsp;                    buff.append(player.getName());</b>
<b class="nc">&nbsp;                    buff.append(&quot; [&quot;)//$NON-NLS-1$</b>
<b class="nc">&nbsp;                            .append(IPlayer.teamNames[team]).append(&#39;]&#39;);</b>
<b class="nc">&nbsp;                    ((DefaultListModel&lt;String&gt;) narcList.getModel())</b>
<b class="nc">&nbsp;                            .addElement(buff.toString());</b>
&nbsp;                }
<b class="nc">&nbsp;                if (en.isINarcedBy(team) &amp;&amp; !player.isObserver()) {</b>
<b class="nc">&nbsp;                    buff = new StringBuffer(</b>
<b class="nc">&nbsp;                            Messages.getString(&quot;MechDisplay.INarcHoming&quot;)); //$NON-NLS-1$</b>
<b class="nc">&nbsp;                    buff.append(player.getName());</b>
<b class="nc">&nbsp;                    buff.append(&quot; [&quot;)//$NON-NLS-1$</b>
<b class="nc">&nbsp;                            .append(IPlayer.teamNames[team]).append(&quot;] &quot;)//$NON-NLS-1$</b>
<b class="nc">&nbsp;                            .append(Messages.getString(&quot;MechDisplay.attached&quot;))//$NON-NLS-1$</b>
<b class="nc">&nbsp;                            .append(&#39;.&#39;);</b>
<b class="nc">&nbsp;                    ((DefaultListModel&lt;String&gt;) narcList.getModel())</b>
<b class="nc">&nbsp;                            .addElement(buff.toString());</b>
&nbsp;                }
<b class="nc">&nbsp;            }</b>
<b class="nc">&nbsp;            if (en.isINarcedWith(INarcPod.ECM)) {</b>
<b class="nc">&nbsp;                buff = new StringBuffer(</b>
<b class="nc">&nbsp;                        Messages.getString(&quot;MechDisplay.iNarcECMPodAttached&quot;)); //$NON-NLS-1$</b>
<b class="nc">&nbsp;                ((DefaultListModel&lt;String&gt;) narcList.getModel())</b>
<b class="nc">&nbsp;                        .addElement(buff.toString());</b>
&nbsp;            }
<b class="nc">&nbsp;            if (en.isINarcedWith(INarcPod.HAYWIRE)) {</b>
<b class="nc">&nbsp;                buff = new StringBuffer(</b>
<b class="nc">&nbsp;                        Messages.getString(&quot;MechDisplay.iNarcHaywirePodAttached&quot;)); //$NON-NLS-1$</b>
<b class="nc">&nbsp;                ((DefaultListModel&lt;String&gt;) narcList.getModel())</b>
<b class="nc">&nbsp;                        .addElement(buff.toString());</b>
&nbsp;            }
<b class="nc">&nbsp;            if (en.isINarcedWith(INarcPod.NEMESIS)) {</b>
<b class="nc">&nbsp;                buff = new StringBuffer(</b>
<b class="nc">&nbsp;                        Messages.getString(&quot;MechDisplay.iNarcNemesisPodAttached&quot;)); //$NON-NLS-1$</b>
<b class="nc">&nbsp;                ((DefaultListModel&lt;String&gt;) narcList.getModel())</b>
<b class="nc">&nbsp;                        .addElement(buff.toString());</b>
&nbsp;            }
&nbsp;
&nbsp;            // Show inferno track.
<b class="nc">&nbsp;            if (en.infernos.isStillBurning()) {</b>
<b class="nc">&nbsp;                buff = new StringBuffer(</b>
<b class="nc">&nbsp;                        Messages.getString(&quot;MechDisplay.InfernoBurnRemaining&quot;)); //$NON-NLS-1$</b>
<b class="nc">&nbsp;                buff.append(en.infernos.getTurnsLeftToBurn());</b>
<b class="nc">&nbsp;                ((DefaultListModel&lt;String&gt;) narcList.getModel())</b>
<b class="nc">&nbsp;                        .addElement(buff.toString());</b>
&nbsp;            }
<b class="nc">&nbsp;            if ((en instanceof Tank) &amp;&amp; ((Tank) en).isOnFire()) {</b>
<b class="nc">&nbsp;                ((DefaultListModel&lt;String&gt;) narcList.getModel())</b>
<b class="nc">&nbsp;                        .addElement(Messages.getString(&quot;MechDisplay&quot; //$NON-NLS-1$</b>
&nbsp;                                + &quot;.OnFire&quot;)); //$NON-NLS-1$
&nbsp;            }
&nbsp;
&nbsp;            // Show electromagnic interference.
<b class="nc">&nbsp;            if (en.isSufferingEMI()) {</b>
<b class="nc">&nbsp;                ((DefaultListModel&lt;String&gt;) narcList.getModel())</b>
<b class="nc">&nbsp;                        .addElement(Messages.getString(&quot;MechDisplay&quot; //$NON-NLS-1$</b>
&nbsp;                                + &quot;.IsEMId&quot;)); //$NON-NLS-1$
&nbsp;            }
&nbsp;
&nbsp;            // Show ECM affect.
<b class="nc">&nbsp;            Coords pos = en.getPosition();</b>
<b class="nc">&nbsp;            if (ComputeECM.isAffectedByAngelECM(en, pos, pos)) {</b>
<b class="nc">&nbsp;                ((DefaultListModel&lt;String&gt;) narcList.getModel())</b>
<b class="nc">&nbsp;                        .addElement(Messages.getString(&quot;MechDisplay&quot; //$NON-NLS-1$</b>
&nbsp;                                + &quot;.InEnemyAngelECMField&quot;)); //$NON-NLS-1$
<b class="nc">&nbsp;            } else if (ComputeECM.isAffectedByECM(en, pos, pos)) {</b>
<b class="nc">&nbsp;                ((DefaultListModel&lt;String&gt;) narcList.getModel())</b>
<b class="nc">&nbsp;                        .addElement(Messages.getString(&quot;MechDisplay&quot; //$NON-NLS-1$</b>
&nbsp;                                + &quot;.InEnemyECMField&quot;)); //$NON-NLS-1$
&nbsp;            }
&nbsp;
&nbsp;            // Active Stealth Armor? If yes, we&#39;re under ECM
<b class="nc">&nbsp;            if (en.isStealthActive()</b>
&nbsp;                    &amp;&amp; ((en instanceof Mech) || (en instanceof Tank))) {
<b class="nc">&nbsp;                ((DefaultListModel&lt;String&gt;) narcList.getModel())</b>
<b class="nc">&nbsp;                        .addElement(Messages.getString(&quot;MechDisplay&quot; //$NON-NLS-1$</b>
&nbsp;                                + &quot;.UnderStealth&quot;)); //$NON-NLS-1$
&nbsp;            }
&nbsp;
&nbsp;            // burdened due to unjettisoned body-mounted missiles on BA?
<b class="nc">&nbsp;            if ((en instanceof BattleArmor) &amp;&amp; ((BattleArmor) en).isBurdened()) {</b>
<b class="nc">&nbsp;                ((DefaultListModel&lt;String&gt;) narcList.getModel())</b>
<b class="nc">&nbsp;                        .addElement(Messages.getString(&quot;MechDisplay&quot; //$NON-NLS-1$</b>
&nbsp;                                + &quot;.Burdened&quot;)); //$NON-NLS-1$
&nbsp;            }
&nbsp;
&nbsp;            // suffering from taser feedback?
<b class="nc">&nbsp;            if (en.getTaserFeedBackRounds() &gt; 0) {</b>
<b class="nc">&nbsp;                ((DefaultListModel&lt;String&gt;) narcList.getModel())</b>
<b class="nc">&nbsp;                        .addElement(en.getTaserFeedBackRounds()</b>
<b class="nc">&nbsp;                                + &quot; &quot; + Messages.getString(&quot;MechDisplay.TaserFeedBack&quot;));//$NON-NLS-1$</b>
&nbsp;            }
&nbsp;
&nbsp;            // taser interference?
<b class="nc">&nbsp;            if (en.getTaserInterference() &gt; 0) {</b>
<b class="nc">&nbsp;                ((DefaultListModel&lt;String&gt;) narcList.getModel()).addElement(&quot;+&quot; //$NON-NLS-1$</b>
<b class="nc">&nbsp;                        + en.getTaserInterference()</b>
&nbsp;                        + &quot; &quot;
<b class="nc">&nbsp;                        + Messages.getString(&quot;MechDisplay&quot; //$NON-NLS-1$</b>
&nbsp;                                + &quot;.TaserInterference&quot;));//$NON-NLS-1$
&nbsp;            }
&nbsp;
&nbsp;            // suffering from TSEMP Interference?
<b class="nc">&nbsp;            if (en.getTsempEffect() == TSEMPWeapon.TSEMP_EFFECT_INTERFERENCE) {</b>
<b class="nc">&nbsp;                ((DefaultListModel&lt;String&gt;) narcList.getModel())</b>
<b class="nc">&nbsp;                        .addElement(Messages.getString(&quot;MechDisplay.TSEMPInterference&quot;));//$NON-NLS-1$</b>
&nbsp;            }
&nbsp;
<b class="nc">&nbsp;            if (en.hasDamagedRHS()) {</b>
<b class="nc">&nbsp;                ((DefaultListModel&lt;String&gt;) narcList.getModel())</b>
<b class="nc">&nbsp;                        .addElement(Messages.getString(&quot;MechDisplay.RHSDamaged&quot;));//$NON-NLS-1$</b>
&nbsp;            }
&nbsp;
&nbsp;            // Show Turret Locked.
<b class="nc">&nbsp;            if ((en instanceof Tank) &amp;&amp; !((Tank) en).hasNoTurret()</b>
<b class="nc">&nbsp;                    &amp;&amp; !en.canChangeSecondaryFacing()) {</b>
<b class="nc">&nbsp;                ((DefaultListModel&lt;String&gt;) narcList.getModel())</b>
<b class="nc">&nbsp;                        .addElement(Messages.getString(&quot;MechDisplay&quot; //$NON-NLS-1$</b>
&nbsp;                                + &quot;.Turretlocked&quot;)); //$NON-NLS-1$
&nbsp;            }
&nbsp;
&nbsp;            // Show jammed weapons.
<b class="nc">&nbsp;            for (Mounted weapon : en.getWeaponList()) {</b>
<b class="nc">&nbsp;                if (weapon.isJammed()) {</b>
<b class="nc">&nbsp;                    buff = new StringBuffer(weapon.getName());</b>
<b class="nc">&nbsp;                    buff.append(Messages.getString(&quot;MechDisplay.isJammed&quot;)); //$NON-NLS-1$</b>
<b class="nc">&nbsp;                    ((DefaultListModel&lt;String&gt;) narcList.getModel())</b>
<b class="nc">&nbsp;                            .addElement(buff.toString());</b>
&nbsp;                }
<b class="nc">&nbsp;            }</b>
&nbsp;
&nbsp;            // Show breached locations.
<b class="nc">&nbsp;            for (int loc = 0; loc &lt; en.locations(); loc++) {</b>
<b class="nc">&nbsp;                if (en.getLocationStatus(loc) == ILocationExposureStatus.BREACHED) {</b>
<b class="nc">&nbsp;                    buff = new StringBuffer(en.getLocationName(loc));</b>
<b class="nc">&nbsp;                    buff.append(Messages.getString(&quot;MechDisplay.Breached&quot;)); //$NON-NLS-1$</b>
<b class="nc">&nbsp;                    ((DefaultListModel&lt;String&gt;) narcList.getModel())</b>
<b class="nc">&nbsp;                            .addElement(buff.toString());</b>
&nbsp;                }
&nbsp;            }
&nbsp;
<b class="nc">&nbsp;            if (narcList.getModel().getSize() == 0) {</b>
<b class="nc">&nbsp;                ((DefaultListModel&lt;String&gt;) narcList.getModel()).addElement(&quot; &quot;); //$NON-NLS-1$</b>
&nbsp;            }
&nbsp;        }
&nbsp;
&nbsp;
&nbsp;        // transport values
<b class="nc">&nbsp;        String unused = en.getUnusedString();</b>
<b class="nc">&nbsp;        if (&quot;&quot;.equals(unused)) {</b>
<b class="nc">&nbsp;            unused = Messages.getString(&quot;MechDisplay.None&quot;); //$NON-NLS-1$</b>
&nbsp;        }
<b class="nc">&nbsp;        unusedR.setText(unused);</b>
<b class="nc">&nbsp;        carrysR.setText(null);</b>
&nbsp;        // boolean hasText = false;
<b class="nc">&nbsp;        for (Entity other : en.getLoadedUnits()) {</b>
<b class="nc">&nbsp;            carrysR.append(other.getShortName());</b>
<b class="nc">&nbsp;            carrysR.append(&quot;\n&quot;); //$NON-NLS-1$</b>
<b class="nc">&nbsp;        }</b>
&nbsp;
&nbsp;        // Show club(s).
<b class="nc">&nbsp;        for (Mounted club : en.getClubs()) {</b>
<b class="nc">&nbsp;            carrysR.append(club.getName());</b>
<b class="nc">&nbsp;            carrysR.append(&quot;\n&quot;); //$NON-NLS-1$</b>
<b class="nc">&nbsp;        }</b>
&nbsp;
&nbsp;        // Show searchlight
<b class="nc">&nbsp;        if (en.hasSpotlight()) {</b>
<b class="nc">&nbsp;            if (en.isUsingSpotlight()) {</b>
<b class="nc">&nbsp;                carrysR.append(Messages.getString(&quot;MechDisplay.SearchlightOn&quot;)); //$NON-NLS-1$</b>
&nbsp;            } else {
<b class="nc">&nbsp;                carrysR.append(Messages.getString(&quot;MechDisplay.SearchlightOff&quot;)); //$NON-NLS-1$</b>
&nbsp;            }
&nbsp;        }
&nbsp;
&nbsp;        // Show Heat Effects, but only for Mechs.
<b class="nc">&nbsp;        heatR.setText(&quot;&quot;); //$NON-NLS-1$</b>
<b class="nc">&nbsp;        sinksR.setText(&quot;&quot;);</b>
&nbsp;
<b class="nc">&nbsp;        if (en instanceof Mech) {</b>
<b class="nc">&nbsp;            Mech m = (Mech) en;</b>
&nbsp;
<b class="nc">&nbsp;            sinks2B.setEnabled(!dontChange);</b>
<b class="nc">&nbsp;            sinks = m.getActiveSinksNextRound();</b>
<b class="nc">&nbsp;            if (m.hasDoubleHeatSinks()) {</b>
<b class="nc">&nbsp;                sinksR.append(Messages.getString(</b>
&nbsp;                        &quot;MechDisplay.activeSinksTextDouble&quot;, //$NON-NLS-1$
<b class="nc">&nbsp;                        new Object[]{Integer.valueOf(sinks),</b>
<b class="nc">&nbsp;                                     Integer.valueOf(sinks * 2)}));</b>
&nbsp;            } else {
<b class="nc">&nbsp;                sinksR.append(Messages.getString(</b>
&nbsp;                        &quot;MechDisplay.activeSinksTextSingle&quot;, //$NON-NLS-1$
<b class="nc">&nbsp;                        new Object[]{Integer.valueOf(sinks)}));</b>
&nbsp;            }
&nbsp;
<b class="nc">&nbsp;            boolean hasTSM = false;</b>
<b class="nc">&nbsp;            boolean mtHeat = false;</b>
<b class="nc">&nbsp;            if (((Mech) en).hasTSM()) {</b>
<b class="nc">&nbsp;                hasTSM = true;</b>
&nbsp;            }
&nbsp;
<b class="nc">&nbsp;            if ((clientgui != null)</b>
<b class="nc">&nbsp;                    &amp;&amp; clientgui.getClient().getGame().getOptions()</b>
<b class="nc">&nbsp;                            .booleanOption(OptionsConstants.ADVCOMBAT_TACOPS_HEAT)) { //$NON-NLS-1$</b>
<b class="nc">&nbsp;                mtHeat = true;</b>
&nbsp;            }
<b class="nc">&nbsp;            heatR.append(HeatEffects.getHeatEffects(en.heat, mtHeat, hasTSM));</b>
<b class="nc">&nbsp;        } else {</b>
&nbsp;            // Non-Mechs cannot configure their heatsinks
<b class="nc">&nbsp;            sinks2B.setEnabled(false);</b>
&nbsp;        }
&nbsp;        /*
&nbsp;         * if (en instanceof Aero &amp;&amp; ((Aero) en).hasBombs() &amp;&amp;
&nbsp;         * IGame.Phase.PHASE_DEPLOYMENT != clientgui.getClient().game
&nbsp;         * .getPhase()) { // TODO: I should at some point check and make
&nbsp;         * sure that this // unit has any bombs that it could dump
&nbsp;         * dumpBombs.setEnabled(!dontChange); } else {
&nbsp;         */
<b class="nc">&nbsp;        dumpBombs.setEnabled(false);</b>
&nbsp;        // }
&nbsp;
<b class="nc">&nbsp;        refreshSensorChoices(en);</b>
&nbsp;
<b class="nc">&nbsp;        if (null != en.getActiveSensor()) {</b>
<b class="nc">&nbsp;            curSensorsL.setText((Messages</b>
<b class="nc">&nbsp;                    .getString(&quot;MechDisplay.CurrentSensors&quot;)).concat(&quot; &quot;) //$NON-NLS-1$</b>
<b class="nc">&nbsp;                    .concat(en.getSensorDesc()));</b>
&nbsp;        } else {
<b class="nc">&nbsp;            curSensorsL.setText((Messages</b>
<b class="nc">&nbsp;                    .getString(&quot;MechDisplay.CurrentSensors&quot;)).concat(&quot; &quot;)); //$NON-NLS-1$</b>
&nbsp;        }
&nbsp;        
<b class="nc">&nbsp;        if (en.getLastTarget() != Entity.NONE) {</b>
<b class="nc">&nbsp;            lastTargetR.setText(en.getLastTargetDisplayName());</b>
&nbsp;        } else {
<b class="nc">&nbsp;            lastTargetR.setText(Messages.getString(&quot;MechDisplay.None&quot;)); //$NON-NLS-1$</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        activateHidden.setEnabled(!dontChange &amp;&amp; en.isHidden());</b>
<b class="nc">&nbsp;        activateHiddenPhase.setEnabled(!dontChange &amp;&amp; en.isHidden());</b>
&nbsp;
<b class="nc">&nbsp;        onResize();</b>
&nbsp;    } // End public void displayMech( Entity )
&nbsp;
&nbsp;    private void refreshSensorChoices(Entity en) {
<b class="nc">&nbsp;        chSensors.removeItemListener(this);</b>
<b class="nc">&nbsp;        chSensors.removeAllItems();</b>
<b class="nc">&nbsp;        for (int i = 0; i &lt; en.getSensors().size(); i++) {</b>
<b class="nc">&nbsp;            Sensor sensor = en.getSensors().elementAt(i);</b>
<b class="nc">&nbsp;            String condition = &quot;&quot;;</b>
<b class="nc">&nbsp;            if (sensor.isBAP() &amp;&amp; !en.hasBAP(false)) {</b>
<b class="nc">&nbsp;                condition = &quot; (Disabled)&quot;;</b>
&nbsp;            }
<b class="nc">&nbsp;            chSensors.addItem(sensor.getDisplayName() + condition);</b>
<b class="nc">&nbsp;            if (sensor.getType() == en.getNextSensor().getType()) {</b>
<b class="nc">&nbsp;                chSensors.setSelectedIndex(i);</b>
&nbsp;            }
&nbsp;        }
<b class="nc">&nbsp;        chSensors.addItemListener(this);</b>
&nbsp;    }
&nbsp;
&nbsp;    public void itemStateChanged(ItemEvent ev) {
<b class="nc">&nbsp;        ClientGUI clientgui = unitDisplay.getClientGUI();</b>
<b class="nc">&nbsp;        if (clientgui == null) {</b>
&nbsp;            return;
&nbsp;        }
&nbsp;        // Only act when a new item is selected
<b class="nc">&nbsp;        if (ev.getStateChange() != ItemEvent.SELECTED) {</b>
&nbsp;            return;
&nbsp;        }
<b class="nc">&nbsp;        if ((ev.getItemSelectable() == chSensors)) {</b>
<b class="nc">&nbsp;            int sensorIdx = chSensors.getSelectedIndex();</b>
<b class="nc">&nbsp;            Entity en = clientgui.getClient().getGame().getEntity(myMechId);</b>
<b class="nc">&nbsp;            Sensor s = en.getSensors().elementAt(sensorIdx);</b>
<b class="nc">&nbsp;            en.setNextSensor(s);</b>
<b class="nc">&nbsp;            refreshSensorChoices(en);</b>
<b class="nc">&nbsp;            String sensorMsg = Messages.getString(</b>
&nbsp;                    &quot;MechDisplay.willSwitchAtEnd&quot;, new Object[] { //$NON-NLS-1$
<b class="nc">&nbsp;                            &quot;Active Sensors&quot;, s.getDisplayName() }); //$NON-NLS-1$</b>
<b class="nc">&nbsp;            clientgui.systemMessage(sensorMsg);</b>
<b class="nc">&nbsp;            clientgui.getClient().sendSensorChange(myMechId, sensorIdx);</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    public void actionPerformed(ActionEvent ae) {
<b class="nc">&nbsp;        ClientGUI clientgui = unitDisplay.getClientGUI();</b>
<b class="nc">&nbsp;        if (clientgui == null) {</b>
&nbsp;            return;
&nbsp;        }
<b class="nc">&nbsp;        if (&quot;changeSinks&quot;.equals(ae.getActionCommand()) &amp;&amp; !dontChange) { //$NON-NLS-1$</b>
<b class="nc">&nbsp;            prompt = new Slider(clientgui.frame,</b>
<b class="nc">&nbsp;                    Messages.getString(&quot;MechDisplay.changeSinks&quot;), //$NON-NLS-1$</b>
<b class="nc">&nbsp;                    Messages.getString(&quot;MechDisplay.changeSinks&quot;), sinks, //$NON-NLS-1$</b>
<b class="nc">&nbsp;                    0, ((Mech) clientgui.getClient().getGame()</b>
<b class="nc">&nbsp;                            .getEntity(myMechId)).getNumberOfSinks());</b>
<b class="nc">&nbsp;            if (!prompt.showDialog()) {</b>
&nbsp;                return;
&nbsp;            }
<b class="nc">&nbsp;            clientgui.getMenuBar().actionPerformed(ae);</b>
<b class="nc">&nbsp;            int numActiveSinks = prompt.getValue();</b>
&nbsp;
<b class="nc">&nbsp;            ((Mech) clientgui.getClient().getGame().getEntity(myMechId))</b>
<b class="nc">&nbsp;                    .setActiveSinksNextRound(numActiveSinks);</b>
<b class="nc">&nbsp;            clientgui.getClient().sendSinksChange(myMechId, numActiveSinks);</b>
<b class="nc">&nbsp;            displayMech(clientgui.getClient().getGame().getEntity(myMechId));</b>
<b class="nc">&nbsp;        } else if (activateHidden.equals(ae.getSource()) &amp;&amp; !dontChange) {</b>
<b class="nc">&nbsp;            IGame.Phase activationPhase = IGame.Phase</b>
<b class="nc">&nbsp;                    .getPhaseFromName((String) activateHiddenPhase</b>
<b class="nc">&nbsp;                            .getSelectedItem());</b>
<b class="nc">&nbsp;            clientgui.getClient().sendActivateHidden(myMechId, activationPhase);</b>
&nbsp;        }
&nbsp;    }
&nbsp;}
</code>
</pre>
</div>

<script type="text/javascript">
(function() {
    var msie = false, msie9 = false;
    /*@cc_on
      msie = true;
      @if (@_jscript_version >= 9)
        msie9 = true;
      @end
    @*/

    if (!msie || msie && msie9) {
      hljs.highlightAll()
      hljs.initLineNumbersOnLoad();
    }
})();
</script>

<div class="footer">
    
    <div style="float:right;">generated on 2023-05-16 16:28</div>
</div>
</body>
</html>
