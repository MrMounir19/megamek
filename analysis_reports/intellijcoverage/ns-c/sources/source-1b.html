


<!DOCTYPE html>
<html id="htmlId">
<head>
  <title>Coverage Report > CommonMenuBar</title>
  <style type="text/css">
    @import "../../css/coverage.css";
    @import "../../css/idea.min.css";
  </style>
  <script type="text/javascript" src="../../js/highlight.min.js"></script>
  <script type="text/javascript" src="../../js/highlightjs-line-numbers.min.js"></script>
</head>

<body>
<div class="content">
<div class="breadCrumbs">
Current scope:     <a href="../../index.html">all classes</a>
    <span class="separator">|</span>
    <a href="../index.html">megamek.client.ui.swing</a>
</div>

<h1>Coverage Summary for Class: CommonMenuBar (megamek.client.ui.swing)</h1>

<table class="coverageStats">

<tr>
  <th class="name">Class</th>
<th class="coverageStat 
">
  Method, %
</th>
<th class="coverageStat 
">
  Line, %
</th>
</tr>
<tr>
  <td class="name">CommonMenuBar</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/104)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/698)
  </span>
</td>
</tr>
  <tr>
    <td class="name">CommonMenuBar$1</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
  </tr>
<tr>
  <td class="name"><strong>Total</strong></td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/105)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/699)
  </span>
</td>
</tr>
</table>

<br/>
<br/>


<pre>
<code class="sourceCode" id="sourceCode">&nbsp;/*
&nbsp; * MegaMek - Copyright (C) 2003,2004,2005 Ben Mazur (bmazur@sev.org)
&nbsp; *  This program is free software; you can redistribute it and/or modify it
&nbsp; *  under the terms of the GNU General Public License as published by the Free
&nbsp; *  Software Foundation; either version 2 of the License, or (at your option)
&nbsp; *  any later version.
&nbsp; *
&nbsp; *  This program is distributed in the hope that it will be useful, but
&nbsp; *  WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY
&nbsp; *  or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License
&nbsp; *  for more details.
&nbsp; */
&nbsp;package megamek.client.ui.swing;
&nbsp;
&nbsp;import java.awt.event.ActionEvent;
&nbsp;import java.awt.event.ActionListener;
&nbsp;import java.awt.event.InputEvent;
&nbsp;import java.awt.event.KeyEvent;
&nbsp;import java.util.Enumeration;
&nbsp;import java.util.Vector;
&nbsp;
&nbsp;import javax.swing.JCheckBoxMenuItem;
&nbsp;import javax.swing.JMenu;
&nbsp;import javax.swing.JMenuBar;
&nbsp;import javax.swing.JMenuItem;
&nbsp;import javax.swing.KeyStroke;
&nbsp;
&nbsp;import megamek.client.Client;
&nbsp;import megamek.client.ui.Messages;
&nbsp;import megamek.common.Entity;
&nbsp;import megamek.common.IGame;
&nbsp;import megamek.common.WeaponOrderHandler;
&nbsp;import megamek.common.Entity.WeaponSortOrder;
&nbsp;import megamek.common.preference.IPreferenceChangeListener;
&nbsp;import megamek.common.preference.PreferenceChangeEvent;
&nbsp;
&nbsp;/**
&nbsp; * Every menu bar in MegaMek should have an identical look-and-feel, with
&nbsp; * various menu items enabled or disabled, based upon the frame that owns the
&nbsp; * menu bar, and the current state of the program.
&nbsp; */
&nbsp;public class CommonMenuBar extends JMenuBar implements ActionListener,
&nbsp;        IPreferenceChangeListener {
&nbsp;    /**
&nbsp;     *
&nbsp;     */
&nbsp;    private static final long serialVersionUID = -3696211330827384307L;
&nbsp;    /**
&nbsp;     * The &lt;code&gt;Game&lt;/code&gt; current selected. This value may be
&nbsp;     * &lt;code&gt;null&lt;/code&gt;.
&nbsp;     */
&nbsp;    private IGame game;
&nbsp;    private JMenuItem fileGameNew;
&nbsp;    private JMenuItem fileGameOpen;
&nbsp;    private JMenuItem fileGameSave;
&nbsp;    private JMenuItem fileGameSaveServer;
&nbsp;    private JMenuItem fileGameScenario;
&nbsp;    private JMenuItem fileGameConnectBot;
&nbsp;    private JMenuItem fileGameConnect;
&nbsp;    private JMenuItem replacePlayer;
&nbsp;    /**
&nbsp;     * When we have a &lt;code&gt;Board&lt;/code&gt;, set this to &lt;code&gt;true&lt;/code&gt;.
&nbsp;     */
&nbsp;    private boolean hasBoard;
&nbsp;    private JMenuItem fileBoardNew;
&nbsp;    private JMenuItem fileBoardOpen;
&nbsp;    private JMenuItem fileBoardSave;
&nbsp;    private JMenuItem fileBoardSaveAs;
&nbsp;    private JMenuItem fileBoardSaveAsImage;
&nbsp;    private JMenuItem fileBoardSaveAsImageUnits;
&nbsp;    /**
&nbsp;     * When we have a unit list, set this to &lt;code&gt;true&lt;/code&gt;.
&nbsp;     */
&nbsp;    private boolean hasUnitList;
&nbsp;    private JMenuItem fileUnitsReinforce;
&nbsp;    private JMenuItem fileUnitsReinforceRAT;
&nbsp;    private JMenuItem fileUnitsOpen;
&nbsp;    private JMenuItem fileUnitsClear;
&nbsp;    private JMenuItem fileUnitsSave;
&nbsp;    /**
&nbsp;     * The &lt;code&gt;Entity&lt;/code&gt; current selected. This value may be
&nbsp;     * &lt;code&gt;null&lt;/code&gt;.
&nbsp;     */
&nbsp;    private Entity entity;
&nbsp;    /**
&nbsp;     * Record the current phase of the game.
&nbsp;     */
<b class="nc">&nbsp;    private IGame.Phase phase = IGame.Phase.PHASE_UNKNOWN;</b>
&nbsp;    //private JMenuItem filePrint;
&nbsp;    private JMenuItem viewMiniMap;
&nbsp;    private JMenuItem viewMekDisplay;
&nbsp;    private JMenuItem viewAccessibilityWindow;
&nbsp;    private JCheckBoxMenuItem viewKeybindsOverlay;
&nbsp;    private JMenuItem viewZoomIn;
&nbsp;    private JMenuItem viewZoomOut;
&nbsp;    private JMenuItem viewResetWindowPositions;
&nbsp;    private JCheckBoxMenuItem toggleIsometric;
&nbsp;    private JCheckBoxMenuItem toggleFieldOfFire;
&nbsp;    private JCheckBoxMenuItem toggleFovHighlight;
&nbsp;    private JCheckBoxMenuItem toggleFovDarken;
&nbsp;    private JCheckBoxMenuItem toggleFiringSolutions;
&nbsp;    private JCheckBoxMenuItem viewMovementEnvelope;
&nbsp;    private JMenuItem viewMovModEnvelope;
&nbsp;    private JMenuItem viewChangeTheme;
&nbsp;    private JMenuItem viewLOSSetting;
&nbsp;    private JMenuItem viewUnitOverview;
&nbsp;    private JMenuItem viewRoundReport;
&nbsp;    private JMenuItem viewGameOptions;
&nbsp;    private JMenuItem viewClientSettings;
&nbsp;    private JMenuItem viewPlayerSettings;
&nbsp;    private JMenuItem viewPlayerList;
&nbsp;    private JMenuItem deployMinesConventional;
&nbsp;    private JMenuItem deployMinesCommand;
&nbsp;    private JMenuItem deployMinesVibrabomb;
&nbsp;    private JMenuItem deployMinesActive;
&nbsp;    private JMenuItem deployMinesInferno;
&nbsp;    private JMenuItem deployNext;
&nbsp;    private JMenuItem deployTurn;
&nbsp;    private JMenuItem deployLoad;
&nbsp;    private JMenuItem deployUnload;
&nbsp;    private JMenuItem deployRemove;
&nbsp;    private JMenuItem deployAssaultDrop;
&nbsp;    private JMenuItem moveWalk;
&nbsp;    private JMenuItem moveNext;
&nbsp;    private JMenuItem moveForwardIni;
&nbsp;    private JMenuItem moveTurn;
&nbsp;    private JMenuItem moveLayMine;
&nbsp;    private JMenuItem moveLoad;
&nbsp;    private JMenuItem moveUnload;
&nbsp;    private JMenuItem moveTow;
&nbsp;    private JMenuItem moveDisconnect;
&nbsp;    private JMenuItem moveJump;
&nbsp;    private JMenuItem moveSwim;
&nbsp;    private JMenuItem moveModeConvert;
&nbsp;    private JMenuItem moveBackUp;
&nbsp;    private JMenuItem moveCharge;
&nbsp;    private JMenuItem moveDFA;
&nbsp;    private JMenuItem moveGoProne;
&nbsp;    private JMenuItem moveFlee;
&nbsp;    private JMenuItem moveFlyOff;
&nbsp;    private JMenuItem moveEject;
&nbsp;    private JMenuItem moveUnjam;
&nbsp;    private JMenuItem moveSearchlight;
&nbsp;    private JMenuItem moveClear;
&nbsp;    private JMenuItem moveHullDown;
&nbsp;    private JMenuItem moveGetUp;
&nbsp;    private JMenuItem moveRaise;
&nbsp;    private JMenuItem moveLower;
&nbsp;    private JMenuItem moveReckless;
&nbsp;    private JMenuItem moveEvade;
&nbsp;    private JMenuItem moveBootlegger;
&nbsp;    private JMenuItem moveShutdown;
&nbsp;    private JMenuItem moveStartup;
&nbsp;    private JMenuItem moveSelfDestruct;
&nbsp;    //private JMenuItem moveTraitor;
&nbsp;    private JMenuItem moveAcc;
&nbsp;    private JMenuItem moveDec;
&nbsp;    private JMenuItem moveAccN;
&nbsp;    private JMenuItem moveDecN;
&nbsp;    private JMenuItem moveEvadeAero;
&nbsp;    private JMenuItem moveRoll;
&nbsp;    private JMenuItem moveLaunch;
&nbsp;    private JMenuItem moveRecover;
&nbsp;    private JMenuItem moveJoin;
&nbsp;    private JMenuItem moveDump;
&nbsp;    private JMenuItem moveRam;
&nbsp;    private JMenuItem moveHover;
&nbsp;    private JMenuItem moveManeuver;
&nbsp;    private JMenuItem moveTurnLeft;
&nbsp;    private JMenuItem moveTurnRight;
&nbsp;    private JMenuItem moveThrust;
&nbsp;    private JMenuItem moveYaw;
&nbsp;    private JMenuItem moveEndOver;
&nbsp;    private JMenuItem moveStrafe;
&nbsp;    private JMenuItem moveBomb;
&nbsp;    private JMenuItem fireFire;
&nbsp;    private JMenuItem fireSkip;
&nbsp;    private JMenuItem fireNextTarg;
&nbsp;    private JMenuItem fireNext;
&nbsp;    private JMenuItem fireTwist;
&nbsp;    private JMenuItem fireFlipArms;
&nbsp;    private JMenuItem fireMode;
&nbsp;    private JMenuItem fireCalled;
&nbsp;    private JMenuItem fireFindClub;
&nbsp;    private JMenuItem fireSpot;
&nbsp;    private JMenuItem fireSearchlight;
&nbsp;    private JMenuItem fireClearTurret;
&nbsp;    private JMenuItem fireClearWeaponJam;
&nbsp;    private JMenuItem fireStrafe;
&nbsp;    private JMenuItem fireSaveWeaponOrder;
&nbsp;    private JMenuItem fireCancel;
&nbsp;    private JMenuItem physicalNext;
&nbsp;    private JMenuItem physicalPunch;
&nbsp;    private JMenuItem physicalKick;
&nbsp;    private JMenuItem physicalPush;
&nbsp;    private JMenuItem physicalClub;
&nbsp;    private JMenuItem physicalBrushOff;
&nbsp;    private JMenuItem physicalDodge;
&nbsp;    private JMenuItem physicalThrash;
&nbsp;    private JMenuItem physicalProto;
&nbsp;    private JMenuItem physicalVibro;
&nbsp;    private Client client;
&nbsp;    /**
&nbsp;     * A &lt;code&gt;Vector&lt;/code&gt; containing the &lt;code&gt;ActionListener&lt;/code&gt;s
&nbsp;     * that have registered themselves with this menu bar.
&nbsp;     */
<b class="nc">&nbsp;    private final Vector&lt;ActionListener&gt; actionListeners = new Vector&lt;&gt;();</b>
&nbsp;
&nbsp;    /**
&nbsp;     * Create a MegaMek menu bar.
&nbsp;     */
&nbsp;    public CommonMenuBar(Client parent) {
<b class="nc">&nbsp;        this();</b>
<b class="nc">&nbsp;        client = parent;</b>
&nbsp;    }
&nbsp;
<b class="nc">&nbsp;    public CommonMenuBar() {</b>
&nbsp;        JMenu menu;
&nbsp;        JMenu submenu;
&nbsp;        JMenu aeromenu;
&nbsp;        JMenuItem item;
&nbsp;
&nbsp;        // *** Create the File menu.
<b class="nc">&nbsp;        menu = new JMenu(Messages.getString(&quot;CommonMenuBar.FileMenu&quot;)); //$NON-NLS-1$</b>
<b class="nc">&nbsp;        menu.setMnemonic(KeyEvent.VK_F);</b>
<b class="nc">&nbsp;        add(menu);</b>
&nbsp;
&nbsp;        // Create the Game sub-menu.
<b class="nc">&nbsp;        submenu = new JMenu(Messages.getString(&quot;CommonMenuBar.GameMenu&quot;)); //$NON-NLS-1$</b>
<b class="nc">&nbsp;        menu.add(submenu);</b>
<b class="nc">&nbsp;        fileGameNew = new JMenuItem(Messages.getString(&quot;CommonMenuBar.fileGameNew&quot;)); //$NON-NLS-1$</b>
<b class="nc">&nbsp;        fileGameNew.addActionListener(this);</b>
<b class="nc">&nbsp;        fileGameNew.setActionCommand(ClientGUI.FILE_GAME_NEW);</b>
<b class="nc">&nbsp;        fileGameNew.setAccelerator(KeyStroke.getKeyStroke(KeyEvent.VK_N,</b>
<b class="nc">&nbsp;                                                          getToolkit().getMenuShortcutKeyMask()));</b>
<b class="nc">&nbsp;        submenu.add(fileGameNew);</b>
<b class="nc">&nbsp;        fileGameOpen = new JMenuItem(Messages.getString(&quot;CommonMenuBar.fileGameOpen&quot;)); //$NON-NLS-1$</b>
<b class="nc">&nbsp;        fileGameOpen.addActionListener(this);</b>
<b class="nc">&nbsp;        fileGameOpen.setActionCommand(ClientGUI.FILE_GAME_OPEN);</b>
<b class="nc">&nbsp;        submenu.add(fileGameOpen);</b>
<b class="nc">&nbsp;        fileGameSave = new JMenuItem(Messages.getString(&quot;CommonMenuBar.fileGameSave&quot;)); //$NON-NLS-1$</b>
<b class="nc">&nbsp;        fileGameSave.addActionListener(this);</b>
<b class="nc">&nbsp;        fileGameSave.setActionCommand(ClientGUI.FILE_GAME_SAVE);</b>
<b class="nc">&nbsp;        submenu.add(fileGameSave);</b>
<b class="nc">&nbsp;        fileGameSaveServer = new JMenuItem(Messages.getString(&quot;CommonMenuBar.fileGameSaveServer&quot;)); //$NON-NLS-1$</b>
<b class="nc">&nbsp;        fileGameSaveServer.addActionListener(this);</b>
<b class="nc">&nbsp;        fileGameSaveServer.setActionCommand(ClientGUI.FILE_GAME_SAVE_SERVER);</b>
<b class="nc">&nbsp;        submenu.add(fileGameSaveServer);</b>
<b class="nc">&nbsp;        submenu.addSeparator();</b>
<b class="nc">&nbsp;        fileGameScenario = new JMenuItem(Messages.getString(&quot;CommonMenuBar.fileGameScenario&quot;)); //$NON-NLS-1$</b>
<b class="nc">&nbsp;        fileGameScenario.addActionListener(this);</b>
<b class="nc">&nbsp;        fileGameScenario.setActionCommand(ClientGUI.FILE_GAME_SCENARIO);</b>
<b class="nc">&nbsp;        submenu.add(fileGameScenario);</b>
<b class="nc">&nbsp;        submenu.addSeparator();</b>
<b class="nc">&nbsp;        fileGameConnectBot = new JMenuItem(Messages.getString(&quot;CommonMenuBar.fileGameConnectBot&quot;)); //$NON-NLS-1$</b>
<b class="nc">&nbsp;        fileGameConnectBot.addActionListener(this);</b>
<b class="nc">&nbsp;        fileGameConnectBot.setActionCommand(ClientGUI.FILE_GAME_CONNECT_BOT);</b>
<b class="nc">&nbsp;        submenu.add(fileGameConnectBot);</b>
<b class="nc">&nbsp;        fileGameConnect = new JMenuItem(Messages.getString(&quot;CommonMenuBar.fileGameConnect&quot;)); //$NON-NLS-1$</b>
<b class="nc">&nbsp;        fileGameConnect.addActionListener(this);</b>
<b class="nc">&nbsp;        fileGameConnect.setActionCommand(ClientGUI.FILE_GAME_CONNECT);</b>
<b class="nc">&nbsp;        submenu.add(fileGameConnect);</b>
<b class="nc">&nbsp;        replacePlayer = new JMenuItem(Messages.getString(&quot;CommonMenuBar.replacePlayer&quot;)); //$NON-NLS-1$</b>
<b class="nc">&nbsp;        replacePlayer.addActionListener(this);</b>
<b class="nc">&nbsp;        replacePlayer.setActionCommand(ClientGUI.FILE_GAME_REPLACE_PLAYER);</b>
<b class="nc">&nbsp;        submenu.add(replacePlayer);</b>
&nbsp;
&nbsp;        // Create the Board sub-menu.
<b class="nc">&nbsp;        submenu = new JMenu(Messages.getString(&quot;CommonMenuBar.BoardMenu&quot;)); //$NON-NLS-1$</b>
<b class="nc">&nbsp;        menu.add(submenu);</b>
<b class="nc">&nbsp;        fileBoardNew = new JMenuItem(Messages.getString(&quot;CommonMenuBar.fileBoardNew&quot;)); //$NON-NLS-1$</b>
<b class="nc">&nbsp;        fileBoardNew.addActionListener(this);</b>
<b class="nc">&nbsp;        fileBoardNew.setActionCommand(ClientGUI.FILE_BOARD_NEW);</b>
<b class="nc">&nbsp;        submenu.add(fileBoardNew);</b>
<b class="nc">&nbsp;        fileBoardOpen = new JMenuItem(Messages.getString(&quot;CommonMenuBar.fileBoardOpen&quot;)); //$NON-NLS-1$</b>
<b class="nc">&nbsp;        fileBoardOpen.addActionListener(this);</b>
<b class="nc">&nbsp;        fileBoardOpen.setActionCommand(ClientGUI.FILE_BOARD_OPEN);</b>
<b class="nc">&nbsp;        submenu.add(fileBoardOpen);</b>
<b class="nc">&nbsp;        fileBoardSave = new JMenuItem(Messages.getString(&quot;CommonMenuBar.fileBoardSave&quot;)); //$NON-NLS-1$</b>
<b class="nc">&nbsp;        fileBoardSave.addActionListener(this);</b>
<b class="nc">&nbsp;        fileBoardSave.setActionCommand(ClientGUI.FILE_BOARD_SAVE);</b>
<b class="nc">&nbsp;        submenu.add(fileBoardSave);</b>
<b class="nc">&nbsp;        fileBoardSaveAs = new JMenuItem(Messages.getString(&quot;CommonMenuBar.fileBoardSaveAs&quot;)); //$NON-NLS-1$</b>
<b class="nc">&nbsp;        fileBoardSaveAs.addActionListener(this);</b>
<b class="nc">&nbsp;        fileBoardSaveAs.setActionCommand(ClientGUI.FILE_BOARD_SAVE_AS);</b>
<b class="nc">&nbsp;        submenu.add(fileBoardSaveAs);</b>
<b class="nc">&nbsp;        fileBoardSaveAsImage = new JMenuItem(Messages</b>
<b class="nc">&nbsp;                .getString(&quot;CommonMenuBar.fileBoardSaveAsImage&quot;)); //$NON-NLS-1$</b>
<b class="nc">&nbsp;        fileBoardSaveAsImage.setToolTipText(Messages</b>
<b class="nc">&nbsp;                .getString(&quot;CommonMenuBar.fileBoardSaveAsImage.tooltip&quot;)); //$NON-NLS-1$</b>
<b class="nc">&nbsp;        fileBoardSaveAsImage.addActionListener(this);</b>
<b class="nc">&nbsp;        fileBoardSaveAsImage.setActionCommand(ClientGUI.FILE_BOARD_SAVE_AS_IMAGE);</b>
<b class="nc">&nbsp;        submenu.add(fileBoardSaveAsImage);</b>
<b class="nc">&nbsp;        fileBoardSaveAsImageUnits = new JMenuItem(Messages</b>
<b class="nc">&nbsp;                .getString(&quot;CommonMenuBar.fileBoardSaveAsImageUnits&quot;)); //$NON-NLS-1$</b>
<b class="nc">&nbsp;        fileBoardSaveAsImage.setToolTipText(Messages</b>
<b class="nc">&nbsp;                .getString(&quot;CommonMenuBar.fileBoardSaveAsImageUnits.tooltip&quot;)); //$NON-NLS-1$</b>
<b class="nc">&nbsp;        fileBoardSaveAsImageUnits.addActionListener(this);</b>
<b class="nc">&nbsp;        fileBoardSaveAsImageUnits.setActionCommand(ClientGUI.FILE_BOARD_SAVE_AS_IMAGE_UNITS);</b>
<b class="nc">&nbsp;        submenu.add(fileBoardSaveAsImageUnits);</b>
&nbsp;
&nbsp;
&nbsp;        // Create the Unit List sub-menu.
<b class="nc">&nbsp;        submenu = new JMenu(Messages.getString(&quot;CommonMenuBar.UnitListMenu&quot;)); //$NON-NLS-1$</b>
<b class="nc">&nbsp;        menu.add(submenu);</b>
<b class="nc">&nbsp;        fileUnitsReinforce = new JMenuItem(Messages</b>
<b class="nc">&nbsp;                .getString(&quot;CommonMenuBar.fileUnitsReinforce&quot;)); //$NON-NLS-1$</b>
<b class="nc">&nbsp;        fileUnitsReinforce.addActionListener(this);</b>
<b class="nc">&nbsp;        fileUnitsReinforce.setActionCommand(ClientGUI.FILE_UNITS_REINFORCE);</b>
<b class="nc">&nbsp;        submenu.add(fileUnitsReinforce);</b>
<b class="nc">&nbsp;        fileUnitsReinforceRAT = new JMenuItem(Messages</b>
<b class="nc">&nbsp;                .getString(&quot;CommonMenuBar.fileUnitsReinforceRAT&quot;)); //$NON-NLS-1$</b>
<b class="nc">&nbsp;        fileUnitsReinforceRAT.addActionListener(this);</b>
<b class="nc">&nbsp;        fileUnitsReinforceRAT.setActionCommand(ClientGUI.FILE_UNITS_REINFORCE_RAT);</b>
<b class="nc">&nbsp;        submenu.add(fileUnitsReinforceRAT);</b>
<b class="nc">&nbsp;        fileUnitsOpen = new JMenuItem(Messages</b>
<b class="nc">&nbsp;                .getString(&quot;CommonMenuBar.fileUnitsOpen&quot;)); //$NON-NLS-1$</b>
<b class="nc">&nbsp;        fileUnitsOpen.addActionListener(this);</b>
<b class="nc">&nbsp;        fileUnitsOpen.setActionCommand(ClientGUI.FILE_UNITS_OPEN);</b>
<b class="nc">&nbsp;        submenu.add(fileUnitsOpen);</b>
<b class="nc">&nbsp;        fileUnitsClear = new JMenuItem(Messages</b>
<b class="nc">&nbsp;                .getString(&quot;CommonMenuBar.fileUnitsClear&quot;)); //$NON-NLS-1$</b>
<b class="nc">&nbsp;        fileUnitsClear.addActionListener(this);</b>
<b class="nc">&nbsp;        fileUnitsClear.setActionCommand(ClientGUI.FILE_UNITS_CLEAR);</b>
<b class="nc">&nbsp;        submenu.add(fileUnitsClear);</b>
<b class="nc">&nbsp;        fileUnitsSave = new JMenuItem(Messages</b>
<b class="nc">&nbsp;                .getString(&quot;CommonMenuBar.fileUnitsSave&quot;)); //$NON-NLS-1$</b>
<b class="nc">&nbsp;        fileUnitsSave.addActionListener(this);</b>
<b class="nc">&nbsp;        fileUnitsSave.setActionCommand(ClientGUI.FILE_UNITS_SAVE);</b>
<b class="nc">&nbsp;        submenu.add(fileUnitsSave);</b>
&nbsp;
&nbsp;        // Finish off the File menu.
&nbsp;//        filePrint = new JMenuItem(Messages.getString(&quot;CommonMenuBar.PrintMenu&quot;)); //$NON-NLS-1$
&nbsp;//        filePrint.addActionListener(this);
&nbsp;//        filePrint.setActionCommand(ClientGUI.FILE_PRINT);
&nbsp;//        filePrint.setEnabled(false);
<b class="nc">&nbsp;        menu.addSeparator();</b>
&nbsp;//        menu.add(filePrint);
&nbsp;
&nbsp;        // *** Create the view menu.
<b class="nc">&nbsp;        menu = new JMenu(Messages.getString(&quot;CommonMenuBar.ViewMenu&quot;));</b>
<b class="nc">&nbsp;        menu.setMnemonic(KeyEvent.VK_V);</b>
<b class="nc">&nbsp;        add(menu);</b>
<b class="nc">&nbsp;        viewMekDisplay = new JMenuItem(Messages.getString(&quot;CommonMenuBar.viewMekDisplay&quot;));</b>
<b class="nc">&nbsp;        viewMekDisplay.addActionListener(this);</b>
<b class="nc">&nbsp;        viewMekDisplay.setActionCommand(ClientGUI.VIEW_MEK_DISPLAY);</b>
<b class="nc">&nbsp;        viewMekDisplay.setMnemonic(KeyEvent.VK_D);</b>
<b class="nc">&nbsp;        viewMekDisplay.setAccelerator(KeyStroke.getKeyStroke(KeyEvent.VK_D,</b>
<b class="nc">&nbsp;                getToolkit().getMenuShortcutKeyMask()));</b>
<b class="nc">&nbsp;        menu.add(viewMekDisplay);</b>
&nbsp;        
<b class="nc">&nbsp;        viewAccessibilityWindow = new JMenuItem(Messages.getString(&quot;CommonMenuBar.viewAccessibilityWindow&quot;));</b>
<b class="nc">&nbsp;        viewAccessibilityWindow.setMnemonic(KeyEvent.VK_A);</b>
<b class="nc">&nbsp;        viewAccessibilityWindow.addActionListener(this);</b>
<b class="nc">&nbsp;        viewAccessibilityWindow.setActionCommand(ClientGUI.VIEW_ACCESSIBILITY_WINDOW);</b>
<b class="nc">&nbsp;        menu.add(viewAccessibilityWindow);</b>
&nbsp;        
<b class="nc">&nbsp;        viewKeybindsOverlay = new JCheckBoxMenuItem(Messages.getString(&quot;CommonMenuBar.viewKeyboardShortcuts&quot;));</b>
<b class="nc">&nbsp;        viewKeybindsOverlay.addActionListener(this);</b>
<b class="nc">&nbsp;        viewKeybindsOverlay.setState(GUIPreferences.getInstance().getBoolean(GUIPreferences.SHOW_KEYBINDS_OVERLAY));</b>
<b class="nc">&nbsp;        viewKeybindsOverlay.setActionCommand(ClientGUI.VIEW_KEYBINDS_OVERLAY);</b>
<b class="nc">&nbsp;        menu.add(viewKeybindsOverlay);</b>
<b class="nc">&nbsp;        viewKeybindsOverlay.setEnabled(false);</b>
&nbsp;        
<b class="nc">&nbsp;        viewResetWindowPositions = new JMenuItem(Messages.getString(&quot;CommonMenuBar.viewResetWindowPos&quot;)); //$NON-NLS-1$</b>
<b class="nc">&nbsp;        viewResetWindowPositions.addActionListener(this);</b>
<b class="nc">&nbsp;        viewResetWindowPositions.setActionCommand(ClientGUI.VIEW_RESET_WINDOW_POSITIONS);</b>
<b class="nc">&nbsp;        menu.add(viewResetWindowPositions);</b>
&nbsp;        
<b class="nc">&nbsp;        viewMiniMap = new JMenuItem(Messages.getString(&quot;CommonMenuBar.viewMiniMap&quot;)); //$NON-NLS-1$</b>
<b class="nc">&nbsp;        viewMiniMap.addActionListener(this);</b>
<b class="nc">&nbsp;        viewMiniMap.setActionCommand(ClientGUI.VIEW_MINI_MAP);</b>
<b class="nc">&nbsp;        viewMiniMap.setMnemonic(KeyEvent.VK_M);</b>
<b class="nc">&nbsp;        viewMiniMap.setAccelerator(KeyStroke.getKeyStroke(KeyEvent.VK_M,</b>
<b class="nc">&nbsp;                getToolkit().getMenuShortcutKeyMask()));</b>
<b class="nc">&nbsp;        menu.add(viewMiniMap);</b>
<b class="nc">&nbsp;        viewUnitOverview = new JMenuItem(Messages.getString(&quot;CommonMenuBar.viewUnitOverview&quot;)); //$NON-NLS-1$</b>
<b class="nc">&nbsp;        viewUnitOverview.addActionListener(this);</b>
<b class="nc">&nbsp;        viewUnitOverview.setActionCommand(ClientGUI.VIEW_UNIT_OVERVIEW);</b>
<b class="nc">&nbsp;        viewUnitOverview.setMnemonic(KeyEvent.VK_U);</b>
<b class="nc">&nbsp;        viewUnitOverview.setAccelerator(KeyStroke.getKeyStroke(KeyEvent.VK_U,</b>
<b class="nc">&nbsp;                getToolkit().getMenuShortcutKeyMask()));</b>
<b class="nc">&nbsp;        menu.add(viewUnitOverview);</b>
<b class="nc">&nbsp;        viewZoomIn = new JMenuItem(Messages</b>
<b class="nc">&nbsp;                .getString(&quot;CommonMenuBar.viewZoomIn&quot;)); //$NON-NLS-1$</b>
<b class="nc">&nbsp;        viewZoomIn.addActionListener(this);</b>
<b class="nc">&nbsp;        viewZoomIn.setActionCommand(ClientGUI.VIEW_ZOOM_IN);</b>
<b class="nc">&nbsp;        menu.add(viewZoomIn);</b>
<b class="nc">&nbsp;        viewZoomOut = new JMenuItem(Messages</b>
<b class="nc">&nbsp;                .getString(&quot;CommonMenuBar.viewZoomOut&quot;)); //$NON-NLS-1$</b>
<b class="nc">&nbsp;        viewZoomOut.addActionListener(this);</b>
<b class="nc">&nbsp;        viewZoomOut.setActionCommand(ClientGUI.VIEW_ZOOM_OUT);</b>
<b class="nc">&nbsp;        menu.add(viewZoomOut);</b>
<b class="nc">&nbsp;        menu.addSeparator();</b>
<b class="nc">&nbsp;        toggleIsometric = new JCheckBoxMenuItem(Messages</b>
<b class="nc">&nbsp;                .getString(&quot;CommonMenuBar.viewToggleIsometric&quot;)); //$NON-NLS-1$</b>
<b class="nc">&nbsp;        toggleIsometric.addActionListener(this);</b>
<b class="nc">&nbsp;        toggleIsometric.setState(GUIPreferences.getInstance().getBoolean(&quot;UseIsometric&quot;)); //$NON-NLS-1$</b>
<b class="nc">&nbsp;        toggleIsometric.setActionCommand(ClientGUI.VIEW_TOGGLE_ISOMETRIC);</b>
<b class="nc">&nbsp;        menu.add(toggleIsometric);</b>
<b class="nc">&nbsp;        toggleFovDarken = new JCheckBoxMenuItem(Messages</b>
<b class="nc">&nbsp;                .getString(&quot;CommonMenuBar.viewToggleFovDarken&quot;)); //$NON-NLS-1$</b>
<b class="nc">&nbsp;        toggleFovDarken.addActionListener(this);</b>
<b class="nc">&nbsp;        toggleFovDarken.setState(GUIPreferences.getInstance().getBoolean(&quot;FovDarken&quot;)); //$NON-NLS-1$</b>
<b class="nc">&nbsp;        toggleFovDarken.setActionCommand(ClientGUI.VIEW_TOGGLE_FOV_DARKEN);</b>
<b class="nc">&nbsp;        toggleFovDarken.setToolTipText(Messages.getString(&quot;CommonMenuBar.viewToggleFovDarkenTooltip&quot;));</b>
<b class="nc">&nbsp;        menu.add(toggleFovDarken);</b>
<b class="nc">&nbsp;        toggleFovHighlight = new JCheckBoxMenuItem(Messages</b>
<b class="nc">&nbsp;                .getString(&quot;CommonMenuBar.viewToggleFovHighlight&quot;)); //$NON-NLS-1$</b>
<b class="nc">&nbsp;        toggleFovHighlight.setState(GUIPreferences.getInstance().getBoolean(&quot;FovHighlight&quot;)); //$NON-NLS-1$</b>
<b class="nc">&nbsp;        toggleFovHighlight.addActionListener(this);</b>
<b class="nc">&nbsp;        toggleFovHighlight.setActionCommand(ClientGUI.VIEW_TOGGLE_FOV_HIGHLIGHT);</b>
<b class="nc">&nbsp;        menu.add(toggleFovHighlight);</b>
<b class="nc">&nbsp;        toggleFieldOfFire = new JCheckBoxMenuItem(Messages</b>
<b class="nc">&nbsp;                .getString(&quot;CommonMenuBar.viewToggleFieldOfFire&quot;)); //$NON-NLS-1$</b>
<b class="nc">&nbsp;        toggleFieldOfFire.addActionListener(this);</b>
<b class="nc">&nbsp;        toggleFieldOfFire.setState(GUIPreferences.getInstance().getShowFieldOfFire());</b>
<b class="nc">&nbsp;        toggleFieldOfFire.setActionCommand(ClientGUI.VIEW_TOGGLE_FIELD_OF_FIRE);</b>
<b class="nc">&nbsp;        toggleFieldOfFire.setToolTipText(Messages</b>
<b class="nc">&nbsp;                .getString(&quot;CommonMenuBar.viewToggleFieldOfFireToolTip&quot;));</b>
<b class="nc">&nbsp;        menu.add(toggleFieldOfFire);</b>
<b class="nc">&nbsp;        toggleFiringSolutions = new JCheckBoxMenuItem(Messages</b>
<b class="nc">&nbsp;                .getString(&quot;CommonMenuBar.viewToggleFiringSolutions&quot;)); //$NON-NLS-1$</b>
<b class="nc">&nbsp;        toggleFiringSolutions.setToolTipText(Messages</b>
<b class="nc">&nbsp;                .getString(&quot;CommonMenuBar.viewToggleFiringSolutionsToolTip&quot;)); //$NON-NLS-1$</b>
<b class="nc">&nbsp;        toggleFiringSolutions.setState(GUIPreferences.getInstance().getBoolean(&quot;FiringSolutions&quot;)); //$NON-NLS-1$</b>
<b class="nc">&nbsp;        toggleFiringSolutions.addActionListener(this);</b>
<b class="nc">&nbsp;        toggleFiringSolutions.setActionCommand(ClientGUI.VIEW_TOGGLE_FIRING_SOLUTIONS);</b>
<b class="nc">&nbsp;        menu.add(toggleFiringSolutions);</b>
<b class="nc">&nbsp;        viewMovementEnvelope = new JCheckBoxMenuItem(Messages</b>
<b class="nc">&nbsp;                .getString(&quot;CommonMenuBar.movementEnvelope&quot;)); //$NON-NLS-1$</b>
<b class="nc">&nbsp;        viewMovementEnvelope.setState(GUIPreferences.getInstance().getBoolean(&quot;MoveEnvelope&quot;)); //$NON-NLS-1$</b>
<b class="nc">&nbsp;        viewMovementEnvelope.addActionListener(this);</b>
<b class="nc">&nbsp;        viewMovementEnvelope.setActionCommand(ClientGUI.VIEW_MOVE_ENV);</b>
<b class="nc">&nbsp;        viewMovementEnvelope.setMnemonic(KeyEvent.VK_Q);</b>
<b class="nc">&nbsp;        viewMovementEnvelope.setAccelerator(KeyStroke.getKeyStroke(KeyEvent.VK_Q,</b>
<b class="nc">&nbsp;                getToolkit().getMenuShortcutKeyMask()));</b>
<b class="nc">&nbsp;        menu.add(viewMovementEnvelope);</b>
<b class="nc">&nbsp;        viewMovModEnvelope = new JMenuItem(Messages.getString(&quot;CommonMenuBar.movementModEnvelope&quot;)); //$NON-NLS-1$</b>
<b class="nc">&nbsp;        viewMovModEnvelope.addActionListener(this);</b>
<b class="nc">&nbsp;        viewMovModEnvelope.setActionCommand(ClientGUI.VIEW_MOVE_MOD_ENV);</b>
<b class="nc">&nbsp;        viewMovModEnvelope.setMnemonic(KeyEvent.VK_W);</b>
<b class="nc">&nbsp;        viewMovModEnvelope.setAccelerator(KeyStroke.getKeyStroke(KeyEvent.VK_W,</b>
<b class="nc">&nbsp;                getToolkit().getMenuShortcutKeyMask()));</b>
<b class="nc">&nbsp;        menu.add(viewMovModEnvelope);</b>
<b class="nc">&nbsp;        viewChangeTheme = new JMenuItem(Messages.getString(&quot;CommonMenuBar.viewChangeTheme&quot;)); //$NON-NLS-1$</b>
<b class="nc">&nbsp;        viewChangeTheme.addActionListener(this);</b>
<b class="nc">&nbsp;        viewChangeTheme.setActionCommand(ClientGUI.VIEW_CHANGE_THEME);</b>
<b class="nc">&nbsp;        menu.add(viewChangeTheme);</b>
<b class="nc">&nbsp;        menu.addSeparator();</b>
<b class="nc">&nbsp;        viewRoundReport = new JMenuItem(Messages.getString(&quot;CommonMenuBar.viewRoundReport&quot;)); //$NON-NLS-1$</b>
<b class="nc">&nbsp;        viewRoundReport.addActionListener(this);</b>
<b class="nc">&nbsp;        viewRoundReport.setActionCommand(ClientGUI.VIEW_ROUND_REPORT);</b>
<b class="nc">&nbsp;        viewRoundReport.setMnemonic(KeyEvent.VK_R);</b>
<b class="nc">&nbsp;        viewRoundReport.setAccelerator(KeyStroke.getKeyStroke(KeyEvent.VK_R,</b>
<b class="nc">&nbsp;                getToolkit().getMenuShortcutKeyMask()));</b>
<b class="nc">&nbsp;        menu.add(viewRoundReport);</b>
<b class="nc">&nbsp;        menu.addSeparator();</b>
<b class="nc">&nbsp;        viewGameOptions = new JMenuItem(Messages.getString(&quot;CommonMenuBar.viewGameOptions&quot;)); //$NON-NLS-1$</b>
<b class="nc">&nbsp;        viewGameOptions.setActionCommand(ClientGUI.VIEW_GAME_OPTIONS);</b>
<b class="nc">&nbsp;        viewGameOptions.addActionListener(this);</b>
<b class="nc">&nbsp;        menu.add(viewGameOptions);</b>
<b class="nc">&nbsp;        viewClientSettings = new JMenuItem(Messages.getString(&quot;CommonMenuBar.viewClientSettings&quot;)); //$NON-NLS-1$</b>
<b class="nc">&nbsp;        viewClientSettings.setActionCommand(ClientGUI.VIEW_CLIENT_SETTINGS);</b>
<b class="nc">&nbsp;        viewClientSettings.setAccelerator(KeyStroke.getKeyStroke(KeyEvent.VK_C, InputEvent.ALT_DOWN_MASK));</b>
<b class="nc">&nbsp;        viewClientSettings.addActionListener(this);</b>
<b class="nc">&nbsp;        menu.add(viewClientSettings);</b>
<b class="nc">&nbsp;        viewLOSSetting = new JMenuItem(Messages.getString(&quot;CommonMenuBar.viewLOSSetting&quot;)); //$NON-NLS-1$</b>
<b class="nc">&nbsp;        viewLOSSetting.addActionListener(this);</b>
<b class="nc">&nbsp;        viewLOSSetting.setActionCommand(ClientGUI.VIEW_LOS_SETTING);</b>
<b class="nc">&nbsp;        viewLOSSetting.setMnemonic(KeyEvent.VK_L);</b>
<b class="nc">&nbsp;        viewLOSSetting.setAccelerator(KeyStroke.getKeyStroke(KeyEvent.VK_L,</b>
<b class="nc">&nbsp;                getToolkit().getMenuShortcutKeyMask()));</b>
<b class="nc">&nbsp;        menu.add(viewLOSSetting);</b>
<b class="nc">&nbsp;        viewPlayerSettings = new JMenuItem(Messages.getString(&quot;CommonMenuBar.viewPlayerSettings&quot;)); //$NON-NLS-1$</b>
<b class="nc">&nbsp;        viewPlayerSettings.setActionCommand(ClientGUI.VIEW_PLAYER_SETTINGS);</b>
<b class="nc">&nbsp;        viewPlayerSettings.addActionListener(this);</b>
<b class="nc">&nbsp;        menu.add(viewPlayerSettings);</b>
<b class="nc">&nbsp;        menu.addSeparator();</b>
<b class="nc">&nbsp;        viewPlayerList = new JMenuItem(Messages.getString(&quot;CommonMenuBar.viewPlayerList&quot;)); //$NON-NLS-1$</b>
<b class="nc">&nbsp;        viewPlayerList.setActionCommand(ClientGUI.VIEW_PLAYER_LIST);</b>
<b class="nc">&nbsp;        viewPlayerList.addActionListener(this);</b>
<b class="nc">&nbsp;        menu.add(viewPlayerList);</b>
&nbsp;
&nbsp;        // *** Create the deploy menu.
<b class="nc">&nbsp;        menu = new JMenu(Messages.getString(&quot;CommonMenuBar.DeployMenu&quot;)); //$NON-NLS-1$</b>
<b class="nc">&nbsp;        menu.setMnemonic(KeyEvent.VK_D);</b>
<b class="nc">&nbsp;        add(menu);</b>
&nbsp;
&nbsp;        // Create the Mines sub-menu.
<b class="nc">&nbsp;        submenu = new JMenu(Messages.getString(&quot;CommonMenuBar.DeployMinesMenu&quot;)); //$NON-NLS-1$</b>
<b class="nc">&nbsp;        deployMinesConventional = createMenuItem(</b>
&nbsp;                submenu,
<b class="nc">&nbsp;                Messages.getString(&quot;CommonMenuBar.deployMinesConventional&quot;), DeployMinefieldDisplay.Command.DEPLOY_MINE_CONV.getCmd()); //$NON-NLS-1$</b>
<b class="nc">&nbsp;        deployMinesCommand = createMenuItem(</b>
&nbsp;                submenu,
<b class="nc">&nbsp;                Messages.getString(&quot;CommonMenuBar.deployMinesCommand&quot;), DeployMinefieldDisplay.Command.DEPLOY_MINE_COM.getCmd()); //$NON-NLS-1$</b>
<b class="nc">&nbsp;        deployMinesVibrabomb = createMenuItem(</b>
&nbsp;                submenu,
<b class="nc">&nbsp;                Messages.getString(&quot;CommonMenuBar.deployMinesVibrabomb&quot;), DeployMinefieldDisplay.Command.DEPLOY_MINE_VIBRA.getCmd()); //$NON-NLS-1$</b>
<b class="nc">&nbsp;        deployMinesActive = createMenuItem(</b>
&nbsp;                submenu,
<b class="nc">&nbsp;                Messages.getString(&quot;CommonMenuBar.deployMinesActive&quot;), DeployMinefieldDisplay.Command.DEPLOY_MINE_ACTIVE.getCmd()); //$NON-NLS-1$</b>
<b class="nc">&nbsp;        deployMinesInferno = createMenuItem(</b>
&nbsp;                submenu,
<b class="nc">&nbsp;                Messages.getString(&quot;CommonMenuBar.deployMinesInferno&quot;), DeployMinefieldDisplay.Command.DEPLOY_MINE_INFERNO.getCmd()); //$NON-NLS-1$</b>
&nbsp;
&nbsp;        // Finish off the deploy menu.
<b class="nc">&nbsp;        deployNext = createMenuItem(</b>
&nbsp;                menu,
<b class="nc">&nbsp;                Messages.getString(&quot;CommonMenuBar.deployNext&quot;), DeploymentDisplay.DeployCommand.DEPLOY_NEXT.getCmd(), KeyEvent.VK_N); //$NON-NLS-1$</b>
<b class="nc">&nbsp;        deployTurn = createMenuItem(</b>
&nbsp;                menu,
<b class="nc">&nbsp;                Messages.getString(&quot;CommonMenuBar.deployTurn&quot;), DeploymentDisplay.DeployCommand.DEPLOY_TURN.getCmd()); //$NON-NLS-1$</b>
<b class="nc">&nbsp;        deployLoad = createMenuItem(</b>
&nbsp;                menu,
<b class="nc">&nbsp;                Messages.getString(&quot;CommonMenuBar.deployLoad&quot;), DeploymentDisplay.DeployCommand.DEPLOY_LOAD.getCmd()); //$NON-NLS-1$</b>
<b class="nc">&nbsp;        deployUnload = createMenuItem(</b>
&nbsp;                menu,
<b class="nc">&nbsp;                Messages.getString(&quot;CommonMenuBar.deployUnload&quot;), DeploymentDisplay.DeployCommand.DEPLOY_UNLOAD.getCmd()); //$NON-NLS-1$</b>
<b class="nc">&nbsp;        deployRemove = createMenuItem(</b>
&nbsp;                menu,
<b class="nc">&nbsp;                Messages.getString(&quot;CommonMenuBar.deployRemove&quot;), DeploymentDisplay.DeployCommand.DEPLOY_REMOVE.getCmd()); //$NON-NLS-1$</b>
<b class="nc">&nbsp;        deployAssaultDrop = createMenuItem(</b>
&nbsp;                menu,
<b class="nc">&nbsp;                Messages.getString(&quot;CommonMenuBar.deployAssaultDrop&quot;), DeploymentDisplay.DeployCommand.DEPLOY_ASSAULTDROP.getCmd()); //$NON-NLS-1$</b>
<b class="nc">&nbsp;        menu.addSeparator();</b>
<b class="nc">&nbsp;        menu.add(submenu);</b>
&nbsp;
&nbsp;        // *** Create the move menu.
<b class="nc">&nbsp;        menu = new JMenu(Messages.getString(&quot;CommonMenuBar.MoveMenu&quot;)); //$NON-NLS-1$</b>
<b class="nc">&nbsp;        menu.setMnemonic(KeyEvent.VK_M);</b>
<b class="nc">&nbsp;        add(menu);</b>
<b class="nc">&nbsp;        moveWalk = createMenuItem(</b>
&nbsp;                menu,
<b class="nc">&nbsp;                Messages.getString(&quot;CommonMenuBar.moveWalk&quot;), MovementDisplay.MoveCommand.MOVE_WALK.getCmd(), KeyEvent.VK_W); //$NON-NLS-1$</b>
<b class="nc">&nbsp;        moveJump = createMenuItem(</b>
&nbsp;                menu,
<b class="nc">&nbsp;                Messages.getString(&quot;CommonMenuBar.moveJump&quot;), MovementDisplay.MoveCommand.MOVE_JUMP.getCmd(), KeyEvent.VK_J); //$NON-NLS-1$</b>
<b class="nc">&nbsp;        moveSwim = createMenuItem(</b>
&nbsp;                menu,
<b class="nc">&nbsp;                Messages.getString(&quot;CommonMenuBar.moveSwim&quot;), MovementDisplay.MoveCommand.MOVE_SWIM.getCmd(), KeyEvent.VK_S); //$NON-NLS-1$</b>
<b class="nc">&nbsp;        moveModeConvert = createMenuItem(</b>
&nbsp;                menu,
<b class="nc">&nbsp;                Messages.getString(&quot;CommonMenuBar.moveModeConvert&quot;), MovementDisplay.MoveCommand.MOVE_MODE_CONVERT.getCmd(), KeyEvent.VK_C); //$NON-NLS-1$</b>
<b class="nc">&nbsp;        moveBackUp = createMenuItem(</b>
&nbsp;                menu,
<b class="nc">&nbsp;                Messages.getString(&quot;CommonMenuBar.moveBackUp&quot;), MovementDisplay.MoveCommand.MOVE_BACK_UP.getCmd()); //$NON-NLS-1$</b>
<b class="nc">&nbsp;        moveGetUp = createMenuItem(</b>
&nbsp;                menu,
<b class="nc">&nbsp;                Messages.getString(&quot;CommonMenuBar.moveGetUp&quot;), MovementDisplay.MoveCommand.MOVE_GET_UP.getCmd()); //$NON-NLS-1$</b>
<b class="nc">&nbsp;        moveGoProne = createMenuItem(</b>
&nbsp;                menu,
<b class="nc">&nbsp;                Messages.getString(&quot;CommonMenuBar.moveGoProne&quot;), MovementDisplay.MoveCommand.MOVE_GO_PRONE.getCmd()); //$NON-NLS-1$</b>
<b class="nc">&nbsp;        moveTurn = createMenuItem(menu, Messages</b>
<b class="nc">&nbsp;                .getString(&quot;CommonMenuBar.moveTurn&quot;), MovementDisplay.MoveCommand.MOVE_TURN.getCmd()); //$NON-NLS-1$</b>
<b class="nc">&nbsp;        moveNext = createMenuItem(</b>
&nbsp;                menu,
<b class="nc">&nbsp;                Messages.getString(&quot;CommonMenuBar.moveNext&quot;), MovementDisplay.MoveCommand.MOVE_NEXT.getCmd(), KeyEvent.VK_N); //$NON-NLS-1$</b>
<b class="nc">&nbsp;        moveForwardIni = createMenuItem(</b>
&nbsp;                menu,
<b class="nc">&nbsp;                Messages.getString(&quot;CommonMenuBar.moveForwardIni&quot;), MovementDisplay.MoveCommand.MOVE_FORWARD_INI.getCmd()); //$NON-NLS-1$</b>
<b class="nc">&nbsp;        moveRaise = createMenuItem(</b>
&nbsp;                menu,
<b class="nc">&nbsp;                Messages.getString(&quot;CommonMenuBar.moveRaise&quot;), MovementDisplay.MoveCommand.MOVE_RAISE_ELEVATION.getCmd()); //$NON-NLS-1$</b>
<b class="nc">&nbsp;        moveLower = createMenuItem(</b>
&nbsp;                menu,
<b class="nc">&nbsp;                Messages.getString(&quot;CommonMenuBar.moveLower&quot;), MovementDisplay.MoveCommand.MOVE_LOWER_ELEVATION.getCmd()); //$NON-NLS-1$</b>
<b class="nc">&nbsp;        moveReckless = createMenuItem(</b>
&nbsp;                menu,
<b class="nc">&nbsp;                Messages.getString(&quot;CommonMenuBar.moveReckless&quot;), MovementDisplay.MoveCommand.MOVE_RECKLESS.getCmd()); //$NON-NLS-1$</b>
<b class="nc">&nbsp;        moveEvade = createMenuItem(</b>
&nbsp;                menu,
<b class="nc">&nbsp;                Messages.getString(&quot;CommonMenuBar.moveEvade&quot;), MovementDisplay.MoveCommand.MOVE_EVADE.getCmd()); //$NON-NLS-1$</b>
<b class="nc">&nbsp;        moveBootlegger = createMenuItem(</b>
&nbsp;                menu,
<b class="nc">&nbsp;                Messages.getString(&quot;CommonMenuBar.moveBootlegger&quot;), MovementDisplay.MoveCommand.MOVE_BOOTLEGGER.getCmd()); //$NON-NLS-1$</b>
<b class="nc">&nbsp;        moveShutdown = createMenuItem(</b>
&nbsp;                menu,
<b class="nc">&nbsp;                Messages.getString(&quot;CommonMenuBar.moveShutdown&quot;), MovementDisplay.MoveCommand.MOVE_SHUTDOWN.getCmd()); //$NON-NLS-1$</b>
<b class="nc">&nbsp;        moveStartup = createMenuItem(</b>
&nbsp;                menu,
<b class="nc">&nbsp;                Messages.getString(&quot;CommonMenuBar.moveStartup&quot;), MovementDisplay.MoveCommand.MOVE_STARTUP.getCmd()); //$NON-NLS-1$</b>
<b class="nc">&nbsp;        moveSelfDestruct = createMenuItem(</b>
&nbsp;                menu,
<b class="nc">&nbsp;                Messages.getString(&quot;CommonMenuBar.moveSelfDestruct&quot;), MovementDisplay.MoveCommand.MOVE_SELF_DESTRUCT.getCmd()); //$NON-NLS-1$</b>
&nbsp;        /* TODO: moveTraitor = createMenuItem(
&nbsp;                menu,
&nbsp;                Messages.getString(&quot;CommonMenuBar.moveTraitor&quot;), MovementDisplay.MOVE_TRAITOR); //$NON-NLS-1$ */
&nbsp;
&nbsp;        //create aero movement sub-menu
<b class="nc">&nbsp;        aeromenu = new JMenu(Messages.getString(&quot;CommonMenuBar.AeroMenu&quot;)); //$NON-NLS-1$</b>
<b class="nc">&nbsp;        moveAcc = createMenuItem(aeromenu, Messages.getString(&quot;CommonMenuBar.moveAcc&quot;), MovementDisplay.MoveCommand.MOVE_ACC.getCmd()); //$NON-NLS-1$</b>
<b class="nc">&nbsp;        moveDec = createMenuItem(aeromenu, Messages.getString(&quot;CommonMenuBar.moveDec&quot;), MovementDisplay.MoveCommand.MOVE_DEC.getCmd()); //$NON-NLS-1$</b>
<b class="nc">&nbsp;        moveAccN = createMenuItem(aeromenu, Messages.getString(&quot;CommonMenuBar.moveAccN&quot;), MovementDisplay.MoveCommand.MOVE_ACCN.getCmd()); //$NON-NLS-1$</b>
<b class="nc">&nbsp;        moveDecN = createMenuItem(aeromenu, Messages.getString(&quot;CommonMenuBar.moveDecN&quot;), MovementDisplay.MoveCommand.MOVE_DECN.getCmd()); //$NON-NLS-1$</b>
<b class="nc">&nbsp;        moveEvadeAero = createMenuItem(aeromenu, Messages.getString(&quot;CommonMenuBar.moveEvadeAero&quot;), MovementDisplay.MoveCommand.MOVE_EVADE_AERO.getCmd()); //$NON-NLS-1$</b>
<b class="nc">&nbsp;        moveRoll = createMenuItem(aeromenu, Messages.getString(&quot;CommonMenuBar.moveRoll&quot;), MovementDisplay.MoveCommand.MOVE_ROLL.getCmd()); //$NON-NLS-1$</b>
<b class="nc">&nbsp;        aeromenu.addSeparator();</b>
<b class="nc">&nbsp;        moveHover = createMenuItem(aeromenu, Messages.getString(&quot;CommonMenuBar.moveHover&quot;), MovementDisplay.MoveCommand.MOVE_HOVER.getCmd()); //$NON-NLS-1$</b>
<b class="nc">&nbsp;        moveManeuver = createMenuItem(aeromenu, Messages.getString(&quot;CommonMenuBar.moveManeuver&quot;), MovementDisplay.MoveCommand.MOVE_MANEUVER.getCmd()); //$NON-NLS-1$</b>
<b class="nc">&nbsp;        moveTurnLeft = createMenuItem(aeromenu, Messages.getString(&quot;CommonMenuBar.moveTurnLeft&quot;), MovementDisplay.MoveCommand.MOVE_TURN_LEFT.getCmd()); //$NON-NLS-1$</b>
<b class="nc">&nbsp;        moveTurnRight = createMenuItem(aeromenu, Messages.getString(&quot;CommonMenuBar.moveTurnRight&quot;), MovementDisplay.MoveCommand.MOVE_TURN_RIGHT.getCmd()); //$NON-NLS-1$</b>
<b class="nc">&nbsp;        moveThrust = createMenuItem(aeromenu, Messages.getString(&quot;CommonMenuBar.moveThrust&quot;), MovementDisplay.MoveCommand.MOVE_THRUST.getCmd()); //$NON-NLS-1$</b>
<b class="nc">&nbsp;        moveYaw = createMenuItem(aeromenu, Messages.getString(&quot;CommonMenuBar.moveYaw&quot;), MovementDisplay.MoveCommand.MOVE_YAW.getCmd()); //$NON-NLS-1$</b>
<b class="nc">&nbsp;        moveEndOver = createMenuItem(aeromenu, Messages.getString(&quot;CommonMenuBar.moveEndOver&quot;), MovementDisplay.MoveCommand.MOVE_END_OVER.getCmd()); //$NON-NLS-1$</b>
<b class="nc">&nbsp;        moveStrafe = createMenuItem(aeromenu, Messages.getString(&quot;CommonMenuBar.moveStrafe&quot;), MovementDisplay.MoveCommand.MOVE_STRAFE.getCmd()); //$NON-NLS-1$</b>
<b class="nc">&nbsp;        moveBomb = createMenuItem(aeromenu, Messages.getString(&quot;CommonMenuBar.moveBomb&quot;), MovementDisplay.MoveCommand.MOVE_BOMB.getCmd()); //$NON-NLS-1$</b>
&nbsp;
<b class="nc">&nbsp;        menu.addSeparator();</b>
<b class="nc">&nbsp;        menu.add(aeromenu);</b>
&nbsp;
&nbsp;        // Create the Special sub-menu.
<b class="nc">&nbsp;        submenu = new JMenu(Messages.getString(&quot;CommonMenuBar.SpecialMenu&quot;)); //$NON-NLS-1$</b>
<b class="nc">&nbsp;        moveLoad = createMenuItem(submenu, Messages</b>
<b class="nc">&nbsp;                .getString(&quot;CommonMenuBar.MoveLoad&quot;), MovementDisplay.MoveCommand.MOVE_LOAD.getCmd()); //$NON-NLS-1$</b>
<b class="nc">&nbsp;        moveUnload = createMenuItem(</b>
&nbsp;                submenu,
<b class="nc">&nbsp;                Messages.getString(&quot;CommonMenuBar.MoveUnload&quot;), MovementDisplay.MoveCommand.MOVE_UNLOAD.getCmd()); //$NON-NLS-1$</b>
<b class="nc">&nbsp;        moveTow = createMenuItem(submenu, Messages</b>
<b class="nc">&nbsp;                .getString(&quot;CommonMenuBar.moveTow&quot;), MovementDisplay.MoveCommand.MOVE_TOW.getCmd()); //$NON-NLS-1$</b>
<b class="nc">&nbsp;        moveDisconnect = createMenuItem(</b>
&nbsp;                submenu,
<b class="nc">&nbsp;                Messages.getString(&quot;CommonMenuBar.moveDisconnect&quot;), MovementDisplay.MoveCommand.MOVE_DISCONNECT.getCmd()); //$NON-NLS-1$</b>
<b class="nc">&nbsp;        moveLaunch = createMenuItem(submenu, Messages.getString(&quot;CommonMenuBar.moveLaunch&quot;), MovementDisplay.MoveCommand.MOVE_LAUNCH.getCmd()); //$NON-NLS-1$</b>
<b class="nc">&nbsp;        moveRecover = createMenuItem(submenu, Messages.getString(&quot;CommonMenuBar.moveRecover&quot;), MovementDisplay.MoveCommand.MOVE_RECOVER.getCmd()); //$NON-NLS-1$</b>
<b class="nc">&nbsp;        moveJoin = createMenuItem(submenu, Messages.getString(&quot;CommonMenuBar.moveJoin&quot;), MovementDisplay.MoveCommand.MOVE_JOIN.getCmd()); //$NON-NLS-1$</b>
<b class="nc">&nbsp;        submenu.addSeparator();</b>
<b class="nc">&nbsp;        moveCharge = createMenuItem(</b>
&nbsp;                submenu,
<b class="nc">&nbsp;                Messages.getString(&quot;CommonMenuBar.MoveCharge&quot;), MovementDisplay.MoveCommand.MOVE_CHARGE.getCmd()); //$NON-NLS-1$</b>
<b class="nc">&nbsp;        moveDFA = createMenuItem(submenu, Messages</b>
<b class="nc">&nbsp;                .getString(&quot;CommonMenuBar.MoveDeth&quot;), MovementDisplay.MoveCommand.MOVE_DFA.getCmd()); //$NON-NLS-1$</b>
<b class="nc">&nbsp;        moveRam = createMenuItem(submenu, Messages.getString(&quot;CommonMenuBar.moveRam&quot;), MovementDisplay.MoveCommand.MOVE_RAM.getCmd()); //$NON-NLS-1$</b>
<b class="nc">&nbsp;        submenu.addSeparator();</b>
<b class="nc">&nbsp;        moveFlee = createMenuItem(submenu, Messages</b>
<b class="nc">&nbsp;                .getString(&quot;CommonMenuBar.MoveFlee&quot;), MovementDisplay.MoveCommand.MOVE_FLEE.getCmd()); //$NON-NLS-1$</b>
<b class="nc">&nbsp;        moveFlyOff = createMenuItem(submenu, Messages</b>
<b class="nc">&nbsp;                .getString(&quot;CommonMenuBar.MoveFlyOff&quot;), MovementDisplay.MoveCommand.MOVE_FLY_OFF.getCmd()); //$NON-NLS-1$</b>
<b class="nc">&nbsp;        moveEject = createMenuItem(</b>
&nbsp;                submenu,
<b class="nc">&nbsp;                Messages.getString(&quot;CommonMenuBar.MoveEject&quot;), MovementDisplay.MoveCommand.MOVE_EJECT.getCmd()); //$NON-NLS-1$</b>
<b class="nc">&nbsp;        submenu.addSeparator();</b>
<b class="nc">&nbsp;        moveUnjam = createMenuItem(</b>
&nbsp;                submenu,
<b class="nc">&nbsp;                Messages.getString(&quot;CommonMenuBar.moveUnjam&quot;), MovementDisplay.MoveCommand.MOVE_UNJAM.getCmd()); //$NON-NLS-1$</b>
<b class="nc">&nbsp;        moveSearchlight = createMenuItem(</b>
&nbsp;                submenu,
<b class="nc">&nbsp;                Messages.getString(&quot;CommonMenuBar.moveSearchlight&quot;), MovementDisplay.MoveCommand.MOVE_SEARCHLIGHT.getCmd()); //$NON-NLS-1$</b>
<b class="nc">&nbsp;        moveClear = createMenuItem(</b>
&nbsp;                submenu,
<b class="nc">&nbsp;                Messages.getString(&quot;CommonMenuBar.moveClear&quot;), MovementDisplay.MoveCommand.MOVE_CLEAR.getCmd()); //$NON-NLS-1$</b>
<b class="nc">&nbsp;        moveHullDown = createMenuItem(</b>
&nbsp;                submenu,
<b class="nc">&nbsp;                Messages.getString(&quot;CommonMenuBar.moveHullDown&quot;), MovementDisplay.MoveCommand.MOVE_HULL_DOWN.getCmd()); //$NON-NLS-1$</b>
<b class="nc">&nbsp;        moveLayMine = createMenuItem(</b>
&nbsp;                submenu,
<b class="nc">&nbsp;                Messages.getString(&quot;CommonMenuBar.moveLayMine&quot;), MovementDisplay.MoveCommand.MOVE_LAY_MINE.getCmd()); //$NON-NLS-1$</b>
<b class="nc">&nbsp;        moveDump = createMenuItem(submenu, Messages.getString(&quot;CommonMenuBar.moveDump&quot;), MovementDisplay.MoveCommand.MOVE_DUMP.getCmd()); //$NON-NLS-1$</b>
&nbsp;
<b class="nc">&nbsp;        menu.addSeparator();</b>
<b class="nc">&nbsp;        menu.add(submenu);</b>
&nbsp;
&nbsp;        // Add the cancel button.
<b class="nc">&nbsp;        menu.addSeparator();</b>
<b class="nc">&nbsp;        moveNext = createMenuItem(</b>
&nbsp;                menu,
<b class="nc">&nbsp;                Messages.getString(&quot;CommonMenuBar.moveCancel&quot;), MovementDisplay.MoveCommand.MOVE_CANCEL.getCmd(), KeyEvent.VK_ESCAPE); //$NON-NLS-1$</b>
&nbsp;
&nbsp;        // *** Create the fire menu.
<b class="nc">&nbsp;        menu = new JMenu(Messages.getString(&quot;CommonMenuBar.FireMenu&quot;)); //$NON-NLS-1$</b>
<b class="nc">&nbsp;        menu.setMnemonic(KeyEvent.VK_I);</b>
<b class="nc">&nbsp;        add(menu);</b>
<b class="nc">&nbsp;        fireFire = createMenuItem(</b>
&nbsp;                menu,
<b class="nc">&nbsp;                Messages.getString(&quot;CommonMenuBar.fireFire&quot;), FiringDisplay.FiringCommand.FIRE_FIRE.getCmd(), KeyEvent.VK_F); //$NON-NLS-1$</b>
<b class="nc">&nbsp;        fireSkip = createMenuItem(</b>
&nbsp;                menu,
<b class="nc">&nbsp;                Messages.getString(&quot;CommonMenuBar.fireSkip&quot;), FiringDisplay.FiringCommand.FIRE_SKIP.getCmd(), KeyEvent.VK_S); //$NON-NLS-1$</b>
<b class="nc">&nbsp;        fireNextTarg = createMenuItem(</b>
&nbsp;                menu,
<b class="nc">&nbsp;                Messages.getString(&quot;CommonMenuBar.fireNextTarg&quot;), FiringDisplay.FiringCommand.FIRE_NEXT_TARG.getCmd(), KeyEvent.VK_T); //$NON-NLS-1$</b>
<b class="nc">&nbsp;        fireNext = createMenuItem(</b>
&nbsp;                menu,
<b class="nc">&nbsp;                Messages.getString(&quot;CommonMenuBar.fireNext&quot;), FiringDisplay.FiringCommand.FIRE_NEXT.getCmd(), KeyEvent.VK_N); //$NON-NLS-1$</b>
<b class="nc">&nbsp;        menu.addSeparator();</b>
<b class="nc">&nbsp;        fireTwist = createMenuItem(menu, Messages</b>
<b class="nc">&nbsp;                .getString(&quot;CommonMenuBar.fireTwist&quot;), FiringDisplay.FiringCommand.FIRE_TWIST.getCmd()); //$NON-NLS-1$</b>
<b class="nc">&nbsp;        fireFlipArms = createMenuItem(</b>
&nbsp;                menu,
<b class="nc">&nbsp;                Messages.getString(&quot;CommonMenuBar.fireFlipArms&quot;), FiringDisplay.FiringCommand.FIRE_FLIP_ARMS.getCmd()); //$NON-NLS-1$</b>
<b class="nc">&nbsp;        menu.addSeparator();</b>
<b class="nc">&nbsp;        fireMode = createMenuItem(</b>
&nbsp;                menu,
<b class="nc">&nbsp;                Messages.getString(&quot;CommonMenuBar.fireMode&quot;), FiringDisplay.FiringCommand.FIRE_MODE.getCmd(), KeyEvent.VK_O); //$NON-NLS-1$</b>
<b class="nc">&nbsp;        fireCalled = createMenuItem(</b>
&nbsp;                menu,
<b class="nc">&nbsp;                Messages.getString(&quot;CommonMenuBar.fireCalled&quot;), FiringDisplay.FiringCommand.FIRE_CALLED.getCmd()); //$NON-NLS-1$</b>
<b class="nc">&nbsp;        menu.addSeparator();</b>
<b class="nc">&nbsp;        fireFindClub = createMenuItem(</b>
&nbsp;                menu,
<b class="nc">&nbsp;                Messages.getString(&quot;CommonMenuBar.fireFindClub&quot;), FiringDisplay.FiringCommand.FIRE_FIND_CLUB.getCmd()); //$NON-NLS-1$</b>
<b class="nc">&nbsp;        fireSpot = createMenuItem(menu, Messages</b>
<b class="nc">&nbsp;                .getString(&quot;CommonMenuBar.fireSpot&quot;), FiringDisplay.FiringCommand.FIRE_SPOT.getCmd()); //$NON-NLS-1$</b>
<b class="nc">&nbsp;        fireSearchlight = createMenuItem(</b>
&nbsp;                menu,
<b class="nc">&nbsp;                Messages.getString(&quot;CommonMenuBar.fireSearchlight&quot;), FiringDisplay.FiringCommand.FIRE_SEARCHLIGHT.getCmd()); //$NON-NLS-1$</b>
<b class="nc">&nbsp;        fireClearTurret = createMenuItem(</b>
&nbsp;                menu,
<b class="nc">&nbsp;                Messages.getString(&quot;CommonMenuBar.fireClearTurret&quot;), FiringDisplay.FiringCommand.FIRE_CLEAR_TURRET.getCmd()); //$NON-NLS-1$</b>
<b class="nc">&nbsp;        fireClearWeaponJam = createMenuItem(</b>
&nbsp;                menu,
<b class="nc">&nbsp;                Messages.getString(&quot;CommonMenuBar.fireClearWeaponJam&quot;), FiringDisplay.FiringCommand.FIRE_CLEAR_WEAPON.getCmd()); //$NON-NLS-1$</b>
<b class="nc">&nbsp;        menu.addSeparator();</b>
<b class="nc">&nbsp;        fireStrafe = createMenuItem(</b>
&nbsp;                menu,
<b class="nc">&nbsp;                Messages.getString(&quot;CommonMenuBar.fireStrafe&quot;), FiringDisplay.FiringCommand.FIRE_CLEAR_WEAPON.getCmd()); //$NON-NLS-1$</b>
<b class="nc">&nbsp;        menu.addSeparator();</b>
<b class="nc">&nbsp;        fireCancel = createMenuItem(</b>
&nbsp;                menu,
<b class="nc">&nbsp;                Messages.getString(&quot;CommonMenuBar.fireCancel&quot;), FiringDisplay.FiringCommand.FIRE_CANCEL.getCmd(), KeyEvent.VK_ESCAPE); //$NON-NLS-1$</b>
<b class="nc">&nbsp;        menu.addSeparator();</b>
<b class="nc">&nbsp;        fireSaveWeaponOrder = createMenuItem(</b>
&nbsp;                menu,
<b class="nc">&nbsp;                Messages.getString(&quot;CommonMenuBar.fireSaveWeaponOrder&quot;), ClientGUI.FIRE_SAVE_WEAPON_ORDER); //$NON-NLS-1$</b>
&nbsp;
&nbsp;        // *** Create the physical menu.
<b class="nc">&nbsp;        menu = new JMenu(Messages.getString(&quot;CommonMenuBar.PhysicalMenu&quot;)); //$NON-NLS-1$</b>
<b class="nc">&nbsp;        menu.setMnemonic(KeyEvent.VK_P);</b>
<b class="nc">&nbsp;        add(menu);</b>
<b class="nc">&nbsp;        physicalPunch = createMenuItem(</b>
&nbsp;                menu,
<b class="nc">&nbsp;                Messages.getString(&quot;CommonMenuBar.physicalPunch&quot;), PhysicalDisplay.PhysicalCommand.PHYSICAL_PUNCH.getCmd()); //$NON-NLS-1$</b>
<b class="nc">&nbsp;        physicalKick = createMenuItem(</b>
&nbsp;                menu,
<b class="nc">&nbsp;                Messages.getString(&quot;CommonMenuBar.physicalKick&quot;), PhysicalDisplay.PhysicalCommand.PHYSICAL_KICK.getCmd()); //$NON-NLS-1$</b>
<b class="nc">&nbsp;        physicalPush = createMenuItem(</b>
&nbsp;                menu,
<b class="nc">&nbsp;                Messages.getString(&quot;CommonMenuBar.physicalPush&quot;), PhysicalDisplay.PhysicalCommand.PHYSICAL_PUSH.getCmd()); //$NON-NLS-1$</b>
<b class="nc">&nbsp;        physicalClub = createMenuItem(</b>
&nbsp;                menu,
<b class="nc">&nbsp;                Messages.getString(&quot;CommonMenuBar.physicalClub&quot;), PhysicalDisplay.PhysicalCommand.PHYSICAL_CLUB.getCmd()); //$NON-NLS-1$</b>
<b class="nc">&nbsp;        physicalBrushOff = createMenuItem(</b>
&nbsp;                menu,
<b class="nc">&nbsp;                Messages.getString(&quot;CommonMenuBar.physicalBrushOff&quot;), PhysicalDisplay.PhysicalCommand.PHYSICAL_BRUSH_OFF.getCmd()); //$NON-NLS-1$</b>
<b class="nc">&nbsp;        physicalThrash = createMenuItem(</b>
&nbsp;                menu,
<b class="nc">&nbsp;                Messages.getString(&quot;CommonMenuBar.physicalThrash&quot;), PhysicalDisplay.PhysicalCommand.PHYSICAL_THRASH.getCmd()); //$NON-NLS-1$</b>
<b class="nc">&nbsp;        physicalProto = createMenuItem(</b>
&nbsp;                menu,
<b class="nc">&nbsp;                Messages.getString(&quot;CommonMenuBar.physicalProto&quot;), PhysicalDisplay.PhysicalCommand.PHYSICAL_PROTO.getCmd()); //$NON-NLS-1$</b>
<b class="nc">&nbsp;        physicalDodge = createMenuItem(</b>
&nbsp;                menu,
<b class="nc">&nbsp;                Messages.getString(&quot;CommonMenuBar.physicalDodge&quot;), PhysicalDisplay.PhysicalCommand.PHYSICAL_DODGE.getCmd()); //$NON-NLS-1$</b>
<b class="nc">&nbsp;        physicalVibro = createMenuItem(</b>
&nbsp;                menu,
<b class="nc">&nbsp;                Messages.getString(&quot;CommonMenuBar.physicalVibro&quot;), PhysicalDisplay.PhysicalCommand.PHYSICAL_VIBRO.getCmd()); //$NON-NLS-1$</b>
<b class="nc">&nbsp;        physicalNext = createMenuItem(</b>
&nbsp;                menu,
<b class="nc">&nbsp;                Messages.getString(&quot;CommonMenuBar.physicalNext&quot;), PhysicalDisplay.PhysicalCommand.PHYSICAL_NEXT.getCmd(), KeyEvent.VK_N); //$NON-NLS-1$</b>
&nbsp;
&nbsp;        // *** Create the help menu.
<b class="nc">&nbsp;        menu = new JMenu(Messages.getString(&quot;CommonMenuBar.HelpMenu&quot;)); //$NON-NLS-1$</b>
<b class="nc">&nbsp;        menu.setMnemonic(KeyEvent.VK_H);</b>
<b class="nc">&nbsp;        add(menu);</b>
<b class="nc">&nbsp;        item = new JMenuItem(Messages.getString(&quot;CommonMenuBar.helpContents&quot;)); //$NON-NLS-1$</b>
<b class="nc">&nbsp;        item.addActionListener(this);</b>
<b class="nc">&nbsp;        item.setActionCommand(ClientGUI.HELP_CONTENTS);</b>
<b class="nc">&nbsp;        menu.add(item);</b>
<b class="nc">&nbsp;        item = new JMenuItem(Messages.getString(&quot;CommonMenuBar.helpSkinning&quot;)); //$NON-NLS-1$</b>
<b class="nc">&nbsp;        item.addActionListener(this);</b>
<b class="nc">&nbsp;        item.setActionCommand(ClientGUI.HELP_SKINNING);</b>
<b class="nc">&nbsp;        menu.add(item);</b>
<b class="nc">&nbsp;        menu.addSeparator();</b>
<b class="nc">&nbsp;        item = new JMenuItem(Messages.getString(&quot;CommonMenuBar.helpAbout&quot;)); //$NON-NLS-1$</b>
<b class="nc">&nbsp;        item.setActionCommand(ClientGUI.HELP_ABOUT);</b>
<b class="nc">&nbsp;        item.addActionListener(this);</b>
<b class="nc">&nbsp;        menu.add(item);</b>
&nbsp;
&nbsp;        // Now manage the menu items.
<b class="nc">&nbsp;        manageMenu();</b>
&nbsp;        
<b class="nc">&nbsp;        GUIPreferences.getInstance().addPreferenceChangeListener(this);</b>
&nbsp;    }
&nbsp;
&nbsp;    private JMenuItem createMenuItem(JMenu m, String label, String command, int shortcut) {
<b class="nc">&nbsp;        JMenuItem mi = createMenuItem(m, label, command);</b>
<b class="nc">&nbsp;        mi.setMnemonic(shortcut);</b>
<b class="nc">&nbsp;        mi.setAccelerator(KeyStroke.getKeyStroke(shortcut, getToolkit().getMenuShortcutKeyMask()));</b>
<b class="nc">&nbsp;        return mi;</b>
&nbsp;    }
&nbsp;
&nbsp;    private JMenuItem createMenuItem(JMenu m, String label, String command) {
<b class="nc">&nbsp;        JMenuItem mi = new JMenuItem(label);</b>
<b class="nc">&nbsp;        mi.addActionListener(this);</b>
<b class="nc">&nbsp;        mi.setActionCommand(command);</b>
<b class="nc">&nbsp;        mi.setEnabled(false);</b>
<b class="nc">&nbsp;        m.add(mi);</b>
<b class="nc">&nbsp;        return mi;</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Implement the &lt;code&gt;ActionListener&lt;/code&gt; interface.
&nbsp;     *
&nbsp;     * @param event - the &lt;code&gt;ActionEvent&lt;/code&gt; that spawned this call.
&nbsp;     */
&nbsp;    public void actionPerformed(ActionEvent event) {
&nbsp;        // Pass the action on to each of our listeners.
<b class="nc">&nbsp;        Enumeration&lt;ActionListener&gt; iter = actionListeners.elements();</b>
<b class="nc">&nbsp;        while (iter.hasMoreElements()) {</b>
<b class="nc">&nbsp;            ActionListener listener = iter.nextElement();</b>
<b class="nc">&nbsp;            listener.actionPerformed(event);</b>
<b class="nc">&nbsp;        }</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Register an object that wishes to be alerted when an item on this menu
&nbsp;     * bar has been selected. &lt;p/&gt; Please note, the ActionCommand property of
&nbsp;     * the action event will inform the listener as to which menu item that has
&nbsp;     * been selected. Not all listeners will be interested in all menu items.
&nbsp;     *
&nbsp;     * @param listener - the &lt;code&gt;ActionListener&lt;/code&gt; that wants to
&nbsp;     *            register itself.
&nbsp;     */
&nbsp;    public synchronized void addActionListener(ActionListener listener) {
<b class="nc">&nbsp;        actionListeners.addElement(listener);</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Remove an object that was being alerted when an item on this menu bar was
&nbsp;     * selected.
&nbsp;     *
&nbsp;     * @param listener - the &lt;code&gt;ActionListener&lt;/code&gt; that wants to be
&nbsp;     *            removed.
&nbsp;     */
&nbsp;    public synchronized void removeActionListener(ActionListener listener) {
<b class="nc">&nbsp;        actionListeners.removeElement(listener);</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * A helper function that will manage the enabled states of the items in
&nbsp;     * this menu, based upon the object&#39;s current state.
&nbsp;     */
&nbsp;    private synchronized void manageMenu() {
&nbsp;        // If we have a game, we can&#39;t join a new one, but we can save it.
&nbsp;        // Also, no Game menu in the editor (where (this.hasBoard &amp;&amp;
&nbsp;        // null==this.client)).
<b class="nc">&nbsp;        if ((game != null) || (hasBoard &amp;&amp; (null == client))) {</b>
<b class="nc">&nbsp;            fileGameNew.setEnabled(false);</b>
<b class="nc">&nbsp;            fileGameOpen.setEnabled(false);</b>
<b class="nc">&nbsp;            fileGameScenario.setEnabled(false);</b>
<b class="nc">&nbsp;            fileGameConnectBot.setEnabled(false);</b>
<b class="nc">&nbsp;            fileGameConnect.setEnabled(false);</b>
<b class="nc">&nbsp;            replacePlayer.setEnabled(false);</b>
&nbsp;            // We can only save in certain phases of the game.
<b class="nc">&nbsp;            if ((phase != IGame.Phase.PHASE_UNKNOWN)</b>
&nbsp;                    &amp;&amp; (phase != IGame.Phase.PHASE_SELECTION)
&nbsp;                    &amp;&amp; (phase != IGame.Phase.PHASE_EXCHANGE)
&nbsp;                    &amp;&amp; (phase != IGame.Phase.PHASE_VICTORY)
&nbsp;                    &amp;&amp; (phase != IGame.Phase.PHASE_STARTING_SCENARIO)) {
<b class="nc">&nbsp;                fileGameSave.setEnabled(true);</b>
<b class="nc">&nbsp;                fileGameSaveServer.setEnabled(true);</b>
<b class="nc">&nbsp;                replacePlayer.setEnabled(true);</b>
&nbsp;            } else {
<b class="nc">&nbsp;                fileGameSave.setEnabled(false);</b>
<b class="nc">&nbsp;                fileGameSaveServer.setEnabled(false);</b>
<b class="nc">&nbsp;                replacePlayer.setEnabled(false);</b>
&nbsp;            }
&nbsp;        }
&nbsp;        // If we have no game, we can&#39;t save, but we can create or join one.
&nbsp;        else {
<b class="nc">&nbsp;            fileGameNew.setEnabled(true);</b>
<b class="nc">&nbsp;            fileGameOpen.setEnabled(true);</b>
<b class="nc">&nbsp;            fileGameSave.setEnabled(false);</b>
<b class="nc">&nbsp;            fileGameSaveServer.setEnabled(false);</b>
<b class="nc">&nbsp;            fileGameScenario.setEnabled(true);</b>
<b class="nc">&nbsp;            fileGameConnectBot.setEnabled(true);</b>
<b class="nc">&nbsp;            fileGameConnect.setEnabled(true);</b>
<b class="nc">&nbsp;            replacePlayer.setEnabled(true);</b>
&nbsp;        }
&nbsp;
&nbsp;        // can view Game Opts if we have a game
<b class="nc">&nbsp;        if (game != null) {</b>
<b class="nc">&nbsp;            viewGameOptions.setEnabled(true);</b>
<b class="nc">&nbsp;            viewPlayerSettings.setEnabled(true);</b>
&nbsp;        } else {
<b class="nc">&nbsp;            viewGameOptions.setEnabled(false);</b>
<b class="nc">&nbsp;            viewPlayerSettings.setEnabled(false);</b>
&nbsp;        }
&nbsp;
&nbsp;        // As of 2003-09-04, we can&#39;t ever print.
&nbsp;//        filePrint.setEnabled(false);
&nbsp;
&nbsp;        // the Client doesn&#39;t have any board actions
<b class="nc">&nbsp;        if (client != null) {</b>
<b class="nc">&nbsp;            fileBoardNew.setEnabled(false);</b>
<b class="nc">&nbsp;            fileBoardOpen.setEnabled(false);</b>
<b class="nc">&nbsp;            fileBoardSave.setEnabled(false);</b>
<b class="nc">&nbsp;            fileBoardSaveAs.setEnabled(false);</b>
<b class="nc">&nbsp;            fileBoardSaveAsImage.setEnabled(false);</b>
<b class="nc">&nbsp;            fileBoardSaveAsImageUnits.setEnabled(false);</b>
&nbsp;            // but the main window and map editor do
&nbsp;        } else {
<b class="nc">&nbsp;            fileBoardNew.setEnabled(true);</b>
<b class="nc">&nbsp;            fileBoardOpen.setEnabled(true);</b>
<b class="nc">&nbsp;            fileBoardSave.setEnabled(false);</b>
<b class="nc">&nbsp;            fileBoardSaveAs.setEnabled(false);</b>
<b class="nc">&nbsp;            fileBoardSaveAsImage.setEnabled(false);</b>
&nbsp;        }
&nbsp;
&nbsp;        // If we have a board, we can perform board actions and view the mini
&nbsp;        // map.
<b class="nc">&nbsp;        if (hasBoard) {</b>
<b class="nc">&nbsp;            fileBoardSave.setEnabled(true);</b>
<b class="nc">&nbsp;            fileBoardSaveAs.setEnabled(true);</b>
<b class="nc">&nbsp;            fileBoardSaveAsImage.setEnabled(true);</b>
<b class="nc">&nbsp;            fileBoardSaveAsImageUnits.setEnabled(true);</b>
<b class="nc">&nbsp;            viewMiniMap.setEnabled(true);</b>
<b class="nc">&nbsp;            viewZoomIn.setEnabled(true);</b>
<b class="nc">&nbsp;            viewZoomOut.setEnabled(true);</b>
<b class="nc">&nbsp;            viewKeybindsOverlay.setEnabled(true);</b>
&nbsp;        }
&nbsp;        // If we don&#39;t have a board we can&#39;t view the mini map.
&nbsp;        else {
<b class="nc">&nbsp;            fileBoardSave.setEnabled(false);</b>
<b class="nc">&nbsp;            fileBoardSaveAs.setEnabled(false);</b>
<b class="nc">&nbsp;            fileBoardSaveAsImage.setEnabled(false);</b>
<b class="nc">&nbsp;            fileBoardSaveAsImageUnits.setEnabled(false);</b>
<b class="nc">&nbsp;            viewMiniMap.setEnabled(false);</b>
<b class="nc">&nbsp;            viewZoomIn.setEnabled(false);</b>
<b class="nc">&nbsp;            viewZoomOut.setEnabled(false);</b>
<b class="nc">&nbsp;            viewKeybindsOverlay.setEnabled(false);</b>
&nbsp;        }
&nbsp;
&nbsp;        // If we have a unit list, and if we are in the lounge,
&nbsp;        // then we can still perform all unit list actions.
<b class="nc">&nbsp;        if (hasUnitList) {</b>
<b class="nc">&nbsp;            fileUnitsOpen.setEnabled(phase == IGame.Phase.PHASE_LOUNGE);</b>
<b class="nc">&nbsp;            fileUnitsClear.setEnabled(phase == IGame.Phase.PHASE_LOUNGE);</b>
&nbsp;          //  fileUnitsSave.setEnabled(phase == IGame.Phase.PHASE_LOUNGE);
&nbsp;        }
&nbsp;        // If we don&#39;t have a unit list, but we are in the lounge,
&nbsp;        // then we can open a unit list.
&nbsp;        else {
<b class="nc">&nbsp;            fileUnitsOpen.setEnabled(phase == IGame.Phase.PHASE_LOUNGE);</b>
<b class="nc">&nbsp;            fileUnitsClear.setEnabled(false);</b>
&nbsp;          //  fileUnitsSave.setEnabled(false);
&nbsp;        }
&nbsp;        // Reinforcements cannot be added in the lounge!
<b class="nc">&nbsp;        fileUnitsReinforce.setEnabled(phase != IGame.Phase.PHASE_LOUNGE);</b>
<b class="nc">&nbsp;        fileUnitsReinforceRAT.setEnabled(phase != IGame.Phase.PHASE_LOUNGE);</b>
&nbsp;
&nbsp;        // If an entity has been selected, we can view it.
<b class="nc">&nbsp;        if (entity != null) {</b>
<b class="nc">&nbsp;            viewMekDisplay.setEnabled(true);</b>
&nbsp;        }
&nbsp;        // If we haven&#39;t selected an entity, we can&#39;t view it.
&nbsp;        else {
<b class="nc">&nbsp;            viewMekDisplay.setEnabled(false);</b>
&nbsp;        }
&nbsp;
&nbsp;        // We can only view the LOS/Range tool setting and
&nbsp;        // the mini map in certain phases of the game. Also
&nbsp;        // the board editor has no LOS/Units/Player stuff
<b class="nc">&nbsp;        if ((client == null) &amp;&amp; hasBoard) {</b>
<b class="nc">&nbsp;            viewLOSSetting.setEnabled(false);</b>
<b class="nc">&nbsp;            viewUnitOverview.setEnabled(false);</b>
<b class="nc">&nbsp;            viewPlayerList.setEnabled(false);</b>
<b class="nc">&nbsp;            viewChangeTheme.setEnabled(true);</b>
&nbsp;        }
&nbsp;        // We&#39;re in-game.
<b class="nc">&nbsp;        else if ((phase == IGame.Phase.PHASE_SET_ARTYAUTOHITHEXES)</b>
&nbsp;                || (phase == IGame.Phase.PHASE_DEPLOY_MINEFIELDS)
&nbsp;                || (phase == IGame.Phase.PHASE_MOVEMENT)
&nbsp;                || (phase == IGame.Phase.PHASE_FIRING)
&nbsp;                || (phase == IGame.Phase.PHASE_PHYSICAL)
&nbsp;                || (phase == IGame.Phase.PHASE_OFFBOARD)
&nbsp;                || (phase == IGame.Phase.PHASE_TARGETING)
&nbsp;                || (phase == IGame.Phase.PHASE_DEPLOYMENT)) {
<b class="nc">&nbsp;            viewLOSSetting.setEnabled(true);</b>
<b class="nc">&nbsp;            viewMiniMap.setEnabled(true);</b>
<b class="nc">&nbsp;            viewZoomIn.setEnabled(true);</b>
<b class="nc">&nbsp;            viewZoomOut.setEnabled(true);</b>
<b class="nc">&nbsp;            viewUnitOverview.setEnabled(true);</b>
<b class="nc">&nbsp;            viewPlayerList.setEnabled(true);</b>
<b class="nc">&nbsp;            viewChangeTheme.setEnabled(false);</b>
&nbsp;        }
&nbsp;        // We&#39;re in-game, but not in a phase with map functions.
&nbsp;        else {
<b class="nc">&nbsp;            viewLOSSetting.setEnabled(false);</b>
<b class="nc">&nbsp;            viewMiniMap.setEnabled(false);</b>
<b class="nc">&nbsp;            viewZoomIn.setEnabled(false);</b>
<b class="nc">&nbsp;            viewZoomOut.setEnabled(false);</b>
<b class="nc">&nbsp;            viewUnitOverview.setEnabled(false);</b>
<b class="nc">&nbsp;            viewPlayerList.setEnabled(false);</b>
<b class="nc">&nbsp;            viewChangeTheme.setEnabled(false);</b>
&nbsp;        }
&nbsp;
&nbsp;        // We can only view the round report in certain phases.
<b class="nc">&nbsp;        if ((phase == IGame.Phase.PHASE_INITIATIVE)</b>
&nbsp;                || (phase == IGame.Phase.PHASE_MOVEMENT)
&nbsp;                || (phase == IGame.Phase.PHASE_FIRING)
&nbsp;                || (phase == IGame.Phase.PHASE_PHYSICAL)
&nbsp;                || (phase == IGame.Phase.PHASE_OFFBOARD)
&nbsp;                || (phase == IGame.Phase.PHASE_TARGETING)
&nbsp;                || (phase == IGame.Phase.PHASE_END)
&nbsp;                || (phase == IGame.Phase.PHASE_DEPLOYMENT)) {
<b class="nc">&nbsp;            viewRoundReport.setEnabled(true);</b>
&nbsp;        } else {
<b class="nc">&nbsp;            viewRoundReport.setEnabled(false);</b>
&nbsp;        }
&nbsp;
&nbsp;        // As of 2003-09-04, we can always at least look at the client settings.
<b class="nc">&nbsp;        viewClientSettings.setEnabled(true);</b>
<b class="nc">&nbsp;        if ((phase != IGame.Phase.PHASE_FIRING) || (entity == null)) {</b>
<b class="nc">&nbsp;            fireCancel.setEnabled(false);</b>
&nbsp;        } else {
<b class="nc">&nbsp;            fireCancel.setEnabled(true);</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        updateSaveWeaponOrderMenuItem();</b>
&nbsp;    }
&nbsp;
&nbsp;    public synchronized void updateSaveWeaponOrderMenuItem() {
<b class="nc">&nbsp;        if ((entity != null)) {</b>
<b class="nc">&nbsp;            WeaponOrderHandler.WeaponOrder storedWeapOrder = WeaponOrderHandler</b>
<b class="nc">&nbsp;                    .getWeaponOrder(entity.getChassis(), entity.getModel());</b>
<b class="nc">&nbsp;            WeaponOrderHandler.WeaponOrder newWeapOrder =</b>
&nbsp;                    new WeaponOrderHandler.WeaponOrder();
<b class="nc">&nbsp;            newWeapOrder.orderType = entity.getWeaponSortOrder();</b>
<b class="nc">&nbsp;            newWeapOrder.customWeaponOrderMap = entity.getCustomWeaponOrder();</b>
&nbsp;
<b class="nc">&nbsp;            boolean isDefault = (storedWeapOrder == null)</b>
&nbsp;                    &amp;&amp; (newWeapOrder.orderType == WeaponSortOrder.DEFAULT);
&nbsp;
<b class="nc">&nbsp;            if (!newWeapOrder.equals(storedWeapOrder) &amp;&amp; !isDefault) {</b>
<b class="nc">&nbsp;                fireSaveWeaponOrder.setEnabled(true);</b>
&nbsp;            } else {
<b class="nc">&nbsp;                fireSaveWeaponOrder.setEnabled(false);</b>
&nbsp;            }
<b class="nc">&nbsp;        } else {</b>
<b class="nc">&nbsp;            fireSaveWeaponOrder.setEnabled(false);</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Identify to the menu bar that a &lt;code&gt;IGame&lt;/code&gt; is available to the
&nbsp;     * parent.
&nbsp;     *
&nbsp;     * @param selected - The &lt;code&gt;IGame&lt;/code&gt; that is currently selected.
&nbsp;     *            When there is no selection, set this to &lt;code&gt;null&lt;/code&gt;.
&nbsp;     */
&nbsp;    public synchronized void setGame(IGame selected) {
<b class="nc">&nbsp;        game = selected;</b>
<b class="nc">&nbsp;        manageMenu();</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Identify to the menu bar that a &lt;code&gt;Board&lt;/code&gt; is available to the
&nbsp;     * parent.
&nbsp;     *
&nbsp;     * @param available - &lt;code&gt;true&lt;/code&gt; when a &lt;code&gt;Board&lt;/code&gt; is
&nbsp;     *            available. Set this value to &lt;code&gt;false&lt;/code&gt; after the
&nbsp;     *            &lt;code&gt;Board&lt;/code&gt; is cleared.
&nbsp;     */
&nbsp;    public synchronized void setBoard(boolean available) {
<b class="nc">&nbsp;        hasBoard = available;</b>
<b class="nc">&nbsp;        manageMenu();</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Identify to the menu bar that a unit list is available to the parent.
&nbsp;     *
&nbsp;     * @param available - &lt;code&gt;true&lt;/code&gt; when a unit list is available. Set
&nbsp;     *            this value to &lt;code&gt;false&lt;/code&gt; after the unit list is
&nbsp;     *            cleared.
&nbsp;     */
&nbsp;    public synchronized void setUnitList(boolean available) {
<b class="nc">&nbsp;        hasUnitList = available;</b>
<b class="nc">&nbsp;        manageMenu();</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Identify to the menu bar that a &lt;code&gt;Entity&lt;/code&gt; is available to the
&nbsp;     * parent.
&nbsp;     *
&nbsp;     * @param selected - The &lt;code&gt;Entity&lt;/code&gt; that is currently selected.
&nbsp;     *            When there is no selection, set this to &lt;code&gt;null&lt;/code&gt;.
&nbsp;     */
&nbsp;    public synchronized void setEntity(Entity selected) {
<b class="nc">&nbsp;        entity = selected;</b>
<b class="nc">&nbsp;        manageMenu();</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Identify to the menu bar which phase is currently in progress
&nbsp;     *
&nbsp;     * @param current - the &lt;code&gt;int&lt;/code&gt; value of the current phase (the
&nbsp;     *            valid values for this argument are defined as constants in the
&nbsp;     *            &lt;code&gt;Game&lt;/code&gt; class).
&nbsp;     */
&nbsp;    public synchronized void setPhase(IGame.Phase current) {
<b class="nc">&nbsp;        entity = null;</b>
<b class="nc">&nbsp;        phase = current;</b>
&nbsp;        // There are certain phases where we shouldn&#39;t allow the board to be
&nbsp;        //  saved, however the vast majority of phases should allow it
<b class="nc">&nbsp;        switch (current) {</b>
&nbsp;            case PHASE_STARTING_SCENARIO:
&nbsp;            case PHASE_UNKNOWN:
&nbsp;            case PHASE_LOUNGE:
&nbsp;            case PHASE_SELECTION:
&nbsp;            case PHASE_EXCHANGE:
<b class="nc">&nbsp;                setBoard(false);</b>
<b class="nc">&nbsp;                break;</b>
&nbsp;            default:
<b class="nc">&nbsp;                setBoard(true);</b>
&nbsp;                break;
&nbsp;        }
<b class="nc">&nbsp;        manageMenu();</b>
&nbsp;    }
&nbsp;
&nbsp;    // Manages the movement menu items...
&nbsp;    public synchronized void setMoveWalkEnabled(boolean enabled) {
<b class="nc">&nbsp;        moveWalk.setEnabled(enabled);</b>
&nbsp;    }
&nbsp;
&nbsp;    public synchronized void setMoveTurnEnabled(boolean enabled) {
<b class="nc">&nbsp;        moveTurn.setEnabled(enabled);</b>
&nbsp;    }
&nbsp;
&nbsp;    public synchronized void setMoveNextEnabled(boolean enabled) {
<b class="nc">&nbsp;        moveNext.setEnabled(enabled);</b>
&nbsp;    }
&nbsp;    public synchronized void setMoveForwardIniEnabled(boolean enabled) {
<b class="nc">&nbsp;        moveForwardIni.setEnabled(enabled);</b>
&nbsp;    }
&nbsp;
&nbsp;    public synchronized void setMoveLoadEnabled(boolean enabled) {
<b class="nc">&nbsp;        moveLoad.setEnabled(enabled);</b>
&nbsp;    }
&nbsp;
&nbsp;    public synchronized void setMoveUnloadEnabled(boolean enabled) {
<b class="nc">&nbsp;        moveUnload.setEnabled(enabled);</b>
&nbsp;    }
&nbsp;    
&nbsp;    public synchronized void setMoveTowEnabled(boolean enabled) {
<b class="nc">&nbsp;        moveTow.setEnabled(enabled);</b>
&nbsp;    }
&nbsp;
&nbsp;    public synchronized void setMoveDisconnectEnabled(boolean enabled) {
<b class="nc">&nbsp;        moveDisconnect.setEnabled(enabled);</b>
&nbsp;    }
&nbsp;
&nbsp;    public synchronized void setMoveJumpEnabled(boolean enabled) {
<b class="nc">&nbsp;        moveJump.setEnabled(enabled);</b>
&nbsp;    }
&nbsp;
&nbsp;    public synchronized void setMoveSwimEnabled(boolean enabled) {
<b class="nc">&nbsp;        moveSwim.setEnabled(enabled);</b>
&nbsp;    }
&nbsp;    
&nbsp;    public synchronized void setMoveModeConvertEnabled(boolean enabled) {
<b class="nc">&nbsp;        moveModeConvert.setEnabled(enabled);</b>
&nbsp;    }
&nbsp;
&nbsp;    public synchronized void setMoveLayMineEnabled(boolean enabled) {
<b class="nc">&nbsp;        moveLayMine.setEnabled(enabled);</b>
&nbsp;    }
&nbsp;
&nbsp;    public synchronized void setMoveBackUpEnabled(boolean enabled) {
<b class="nc">&nbsp;        moveBackUp.setEnabled(enabled);</b>
&nbsp;    }
&nbsp;
&nbsp;    public synchronized void setMoveChargeEnabled(boolean enabled) {
<b class="nc">&nbsp;        moveCharge.setEnabled(enabled);</b>
&nbsp;    }
&nbsp;
&nbsp;    public synchronized void setMoveDFAEnabled(boolean enabled) {
<b class="nc">&nbsp;        moveDFA.setEnabled(enabled);</b>
&nbsp;    }
&nbsp;
&nbsp;    public synchronized void setMoveGoProneEnabled(boolean enabled) {
<b class="nc">&nbsp;        moveGoProne.setEnabled(enabled);</b>
&nbsp;    }
&nbsp;
&nbsp;    public synchronized void setMoveFleeEnabled(boolean enabled) {
<b class="nc">&nbsp;        moveFlee.setEnabled(enabled);</b>
&nbsp;    }
&nbsp;
&nbsp;    public synchronized void setMoveFlyOffEnabled(boolean enabled) {
<b class="nc">&nbsp;        moveFlyOff.setEnabled(enabled);</b>
&nbsp;    }
&nbsp;
&nbsp;    public synchronized void setMoveEjectEnabled(boolean enabled) {
<b class="nc">&nbsp;        moveEject.setEnabled(enabled);</b>
&nbsp;    }
&nbsp;
&nbsp;    public synchronized void setMoveUnjamEnabled(boolean enabled) {
<b class="nc">&nbsp;        moveUnjam.setEnabled(enabled);</b>
&nbsp;    }
&nbsp;
&nbsp;    public synchronized void setMoveSearchlightEnabled(boolean enabled) {
<b class="nc">&nbsp;        moveSearchlight.setEnabled(enabled);</b>
&nbsp;    }
&nbsp;
&nbsp;    public synchronized void setMoveHullDownEnabled(boolean enabled) {
<b class="nc">&nbsp;        moveHullDown.setEnabled(enabled);</b>
&nbsp;    }
&nbsp;
&nbsp;    public synchronized void setMoveClearEnabled(boolean enabled) {
<b class="nc">&nbsp;        moveClear.setEnabled(enabled);</b>
&nbsp;    }
&nbsp;
&nbsp;    public synchronized void setMoveGetUpEnabled(boolean enabled) {
<b class="nc">&nbsp;        moveGetUp.setEnabled(enabled);</b>
&nbsp;    }
&nbsp;
&nbsp;    public synchronized void setMoveRaiseEnabled(boolean enabled) {
<b class="nc">&nbsp;        moveRaise.setEnabled(enabled);</b>
&nbsp;    }
&nbsp;
&nbsp;    public synchronized void setMoveLowerEnabled(boolean enabled) {
<b class="nc">&nbsp;        moveLower.setEnabled(enabled);</b>
&nbsp;    }
&nbsp;    public synchronized void setMoveRecklessEnabled(boolean enabled) {
<b class="nc">&nbsp;        moveReckless.setEnabled(enabled);</b>
&nbsp;    }
&nbsp;    public synchronized void setMoveAccEnabled(boolean enabled) {
<b class="nc">&nbsp;        moveAcc.setEnabled(enabled);</b>
&nbsp;    }
&nbsp;    public synchronized void setMoveDecEnabled(boolean enabled) {
<b class="nc">&nbsp;        moveDec.setEnabled(enabled);</b>
&nbsp;    }
&nbsp;    public synchronized void setMoveAccNEnabled(boolean enabled) {
<b class="nc">&nbsp;        moveAccN.setEnabled(enabled);</b>
&nbsp;    }
&nbsp;    public synchronized void setMoveDecNEnabled(boolean enabled) {
<b class="nc">&nbsp;        moveDecN.setEnabled(enabled);</b>
&nbsp;    }
&nbsp;    public synchronized void setMoveEvadeEnabled(boolean enabled) {
<b class="nc">&nbsp;        moveEvade.setEnabled(enabled);</b>
&nbsp;    }
&nbsp;    public synchronized void setMoveBootleggerEnabled(boolean enabled) {
<b class="nc">&nbsp;        moveBootlegger.setEnabled(enabled);</b>
&nbsp;    }
&nbsp;    public synchronized void setMoveShutdownEnabled(boolean enabled) {
<b class="nc">&nbsp;        moveShutdown.setEnabled(enabled);</b>
&nbsp;    }
&nbsp;    public synchronized void setMoveStartupEnabled(boolean enabled) {
<b class="nc">&nbsp;        moveStartup.setEnabled(enabled);</b>
&nbsp;    }
&nbsp;    public synchronized void setMoveSelfDestructEnabled(boolean enabled) {
<b class="nc">&nbsp;        moveSelfDestruct.setEnabled(enabled);</b>
&nbsp;    }
&nbsp;    public synchronized void setMoveTraitorEnabled(boolean enabled) {
&nbsp;        //TODO: moveTraitor.setEnabled(enabled);
<b class="nc">&nbsp;    }</b>
&nbsp;    public synchronized void setMoveEvadeAeroEnabled(boolean enabled) {
<b class="nc">&nbsp;        moveEvadeAero.setEnabled(enabled);</b>
&nbsp;    }
&nbsp;    public synchronized void setMoveRollEnabled(boolean enabled) {
<b class="nc">&nbsp;        moveRoll.setEnabled(enabled);</b>
&nbsp;    }
&nbsp;    public synchronized void setMoveLaunchEnabled(boolean enabled) {
<b class="nc">&nbsp;        moveLaunch.setEnabled(enabled);</b>
&nbsp;    }
&nbsp;    public synchronized void setMoveRecoverEnabled(boolean enabled) {
<b class="nc">&nbsp;        moveRecover.setEnabled(enabled);</b>
&nbsp;    }
&nbsp;    public synchronized void setMoveJoinEnabled(boolean enabled) {
<b class="nc">&nbsp;        moveJoin.setEnabled(enabled);</b>
&nbsp;    }
&nbsp;    public synchronized void setMoveDumpEnabled(boolean enabled) {
<b class="nc">&nbsp;        moveDump.setEnabled(enabled);</b>
&nbsp;    }
&nbsp;    public synchronized void setMoveRamEnabled(boolean enabled) {
<b class="nc">&nbsp;        moveRam.setEnabled(enabled);</b>
&nbsp;    }
&nbsp;    public synchronized void setMoveHoverEnabled(boolean enabled) {
<b class="nc">&nbsp;        moveHover.setEnabled(enabled);</b>
&nbsp;    }
&nbsp;    public synchronized void setMoveManeuverEnabled(boolean enabled) {
<b class="nc">&nbsp;        moveManeuver.setEnabled(enabled);</b>
&nbsp;    }
&nbsp;    public synchronized void setMoveTurnLeftEnabled(boolean enabled) {
<b class="nc">&nbsp;        moveTurnLeft.setEnabled(enabled);</b>
&nbsp;    }
&nbsp;    public synchronized void setMoveTurnRightEnabled(boolean enabled) {
<b class="nc">&nbsp;        moveTurnRight.setEnabled(enabled);</b>
&nbsp;    }
&nbsp;    public synchronized void setMoveThrustEnabled(boolean enabled) {
<b class="nc">&nbsp;        moveThrust.setEnabled(enabled);</b>
&nbsp;    }
&nbsp;    public synchronized void setMoveYawEnabled(boolean enabled) {
<b class="nc">&nbsp;        moveYaw.setEnabled(enabled);</b>
&nbsp;    }
&nbsp;    public synchronized void setMoveEndOverEnabled(boolean enabled) {
<b class="nc">&nbsp;        moveEndOver.setEnabled(enabled);</b>
&nbsp;    }
&nbsp;    public synchronized void setMoveStrafeEnabled(boolean enabled) {
<b class="nc">&nbsp;        moveStrafe.setEnabled(enabled);</b>
&nbsp;    }
&nbsp;    public synchronized void setMoveBombEnabled(boolean enabled) {
<b class="nc">&nbsp;        moveBomb.setEnabled(enabled);</b>
&nbsp;    }
&nbsp;
&nbsp;    // Manages deploy menu items...
&nbsp;    public synchronized void setDeployNextEnabled(boolean enabled) {
<b class="nc">&nbsp;        deployNext.setEnabled(enabled);</b>
&nbsp;    }
&nbsp;
&nbsp;    public synchronized void setDeployTurnEnabled(boolean enabled) {
<b class="nc">&nbsp;        deployTurn.setEnabled(enabled);</b>
&nbsp;    }
&nbsp;
&nbsp;    public synchronized void setDeployLoadEnabled(boolean enabled) {
<b class="nc">&nbsp;        deployLoad.setEnabled(enabled);</b>
&nbsp;    }
&nbsp;
&nbsp;    public synchronized void setDeployUnloadEnabled(boolean enabled) {
<b class="nc">&nbsp;        deployUnload.setEnabled(enabled);</b>
&nbsp;    }
&nbsp;
&nbsp;    public synchronized void setDeployRemoveEnabled(boolean enabled) {
<b class="nc">&nbsp;        deployRemove.setEnabled(enabled);</b>
&nbsp;    }
&nbsp;
&nbsp;    public synchronized void setDeployAssaultDropEnabled(boolean enabled) {
<b class="nc">&nbsp;        deployAssaultDrop.setEnabled(enabled);</b>
&nbsp;    }
&nbsp;
&nbsp;    // Manages deploy minefield items...
&nbsp;    public synchronized void setDeployConventionalEnabled(int nbr) {
<b class="nc">&nbsp;        deployMinesConventional.setText(Messages.getString(</b>
<b class="nc">&nbsp;                &quot;CommonMenuBar.Minefield&quot;, new Object[]{nbr})); //$NON-NLS-1$</b>
<b class="nc">&nbsp;        deployMinesConventional.setEnabled(nbr &gt; 0);</b>
&nbsp;    }
&nbsp;
&nbsp;    public synchronized void setDeployCommandEnabled(int nbr) {
<b class="nc">&nbsp;        deployMinesCommand.setText(Messages.getString(</b>
<b class="nc">&nbsp;                &quot;CommonMenuBar.Command&quot;, new Object[]{nbr})); //$NON-NLS-1$</b>
&nbsp;        // Cannot ever deploy command mines...
<b class="nc">&nbsp;        deployMinesCommand.setEnabled(false);</b>
&nbsp;    }
&nbsp;
&nbsp;    public synchronized void setDeployVibrabombEnabled(int nbr) {
<b class="nc">&nbsp;        deployMinesVibrabomb.setText(Messages.getString(</b>
<b class="nc">&nbsp;                &quot;CommonMenuBar.Vibrabomb&quot;, new Object[]{nbr})); //$NON-NLS-1$</b>
<b class="nc">&nbsp;        deployMinesVibrabomb.setEnabled(nbr &gt; 0);</b>
&nbsp;    }
&nbsp;
&nbsp;    public synchronized void setDeployActiveEnabled(int nbr) {
<b class="nc">&nbsp;        deployMinesActive.setText(Messages.getString(</b>
<b class="nc">&nbsp;                &quot;CommonMenuBar.Active&quot;, new Object[]{nbr})); //$NON-NLS-1$</b>
<b class="nc">&nbsp;        deployMinesActive.setEnabled(nbr &gt; 0);</b>
&nbsp;    }
&nbsp;
&nbsp;    public synchronized void setDeployInfernoEnabled(int nbr) {
<b class="nc">&nbsp;        deployMinesInferno.setText(Messages.getString(</b>
<b class="nc">&nbsp;                &quot;CommonMenuBar.Inferno&quot;, new Object[]{nbr})); //$NON-NLS-1$</b>
<b class="nc">&nbsp;        deployMinesInferno.setEnabled(nbr &gt; 0);</b>
&nbsp;    }
&nbsp;
&nbsp;    // Manages physical menu items...
&nbsp;    public synchronized void setPhysicalNextEnabled(boolean enabled) {
<b class="nc">&nbsp;        physicalNext.setEnabled(enabled);</b>
&nbsp;    }
&nbsp;
&nbsp;    public synchronized void setPhysicalPunchEnabled(boolean enabled) {
<b class="nc">&nbsp;        physicalPunch.setEnabled(enabled);</b>
&nbsp;    }
&nbsp;
&nbsp;    public synchronized void setPhysicalKickEnabled(boolean enabled) {
<b class="nc">&nbsp;        physicalKick.setEnabled(enabled);</b>
&nbsp;    }
&nbsp;
&nbsp;    public synchronized void setPhysicalPushEnabled(boolean enabled) {
<b class="nc">&nbsp;        physicalPush.setEnabled(enabled);</b>
&nbsp;    }
&nbsp;
&nbsp;    public synchronized void setPhysicalClubEnabled(boolean enabled) {
<b class="nc">&nbsp;        physicalClub.setEnabled(enabled);</b>
&nbsp;    }
&nbsp;
&nbsp;    public synchronized void setPhysicalBrushOffEnabled(boolean enabled) {
<b class="nc">&nbsp;        physicalBrushOff.setEnabled(enabled);</b>
&nbsp;    }
&nbsp;
&nbsp;    public synchronized void setPhysicalDodgeEnabled(boolean enabled) {
<b class="nc">&nbsp;        physicalDodge.setEnabled(enabled);</b>
&nbsp;    }
&nbsp;
&nbsp;    public synchronized void setPhysicalThrashEnabled(boolean enabled) {
<b class="nc">&nbsp;        physicalThrash.setEnabled(enabled);</b>
&nbsp;    }
&nbsp;
&nbsp;    public synchronized void setPhysicalProtoEnabled(boolean enabled) {
<b class="nc">&nbsp;        physicalProto.setEnabled(enabled);</b>
&nbsp;    }
&nbsp;
&nbsp;    public synchronized void setPhysicalVibroEnabled(boolean enabled) {
<b class="nc">&nbsp;        physicalVibro.setEnabled(enabled);</b>
&nbsp;    }
&nbsp;
&nbsp;    // Manages fire menu items...
&nbsp;
&nbsp;    public synchronized void setFireFireEnabled(boolean enabled) {
<b class="nc">&nbsp;        fireFire.setEnabled(enabled);</b>
&nbsp;    }
&nbsp;
&nbsp;    public synchronized void setFireSkipEnabled(boolean enabled) {
<b class="nc">&nbsp;        fireSkip.setEnabled(enabled);</b>
&nbsp;    }
&nbsp;
&nbsp;    public synchronized void setFireNextTargetEnabled(boolean enabled) {
<b class="nc">&nbsp;        fireNextTarg.setEnabled(enabled);</b>
&nbsp;    }
&nbsp;
&nbsp;    public synchronized void setFireNextEnabled(boolean enabled) {
<b class="nc">&nbsp;        fireNext.setEnabled(enabled);</b>
&nbsp;    }
&nbsp;
&nbsp;    public synchronized void setFireTwistEnabled(boolean enabled) {
<b class="nc">&nbsp;        fireTwist.setEnabled(enabled);</b>
&nbsp;    }
&nbsp;
&nbsp;    public synchronized void setFireFlipArmsEnabled(boolean enabled) {
<b class="nc">&nbsp;        fireFlipArms.setEnabled(enabled);</b>
&nbsp;    }
&nbsp;
&nbsp;    public synchronized void setFireModeEnabled(boolean enabled) {
<b class="nc">&nbsp;        fireMode.setEnabled(enabled);</b>
&nbsp;    }
&nbsp;
&nbsp;    public synchronized void setFireCalledEnabled(boolean enabled) {
<b class="nc">&nbsp;        fireCalled.setEnabled(enabled);</b>
&nbsp;    }
&nbsp;
&nbsp;    public synchronized void setFireFindClubEnabled(boolean enabled) {
<b class="nc">&nbsp;        fireFindClub.setEnabled(enabled);</b>
&nbsp;    }
&nbsp;
&nbsp;    public synchronized void setFireSpotEnabled(boolean enabled) {
<b class="nc">&nbsp;        fireSpot.setEnabled(enabled);</b>
&nbsp;    }
&nbsp;
&nbsp;    public synchronized void setFireSearchlightEnabled(boolean enabled) {
<b class="nc">&nbsp;        fireSearchlight.setEnabled(enabled);</b>
&nbsp;    }
&nbsp;
&nbsp;    public synchronized void setFireClearTurretEnabled(boolean enabled) {
<b class="nc">&nbsp;        fireClearTurret.setEnabled(enabled);</b>
&nbsp;    }
&nbsp;
&nbsp;    public synchronized void setFireClearWeaponJamEnabled(boolean enabled) {
<b class="nc">&nbsp;        fireClearWeaponJam.setEnabled(enabled);</b>
&nbsp;    }
&nbsp;
&nbsp;    public synchronized void setStrafeEnabled(boolean enabled) {
<b class="nc">&nbsp;        fireStrafe.setEnabled(enabled);</b>
&nbsp;    }
&nbsp;
&nbsp;    @Override
&nbsp;    public void preferenceChange(PreferenceChangeEvent e) {
<b class="nc">&nbsp;        if (e.getName().equals(GUIPreferences.USE_ISOMETRIC)) {</b>
<b class="nc">&nbsp;            toggleIsometric.setSelected((Boolean)e.getNewValue());</b>
<b class="nc">&nbsp;        } else if (e.getName().equals(GUIPreferences.SHOW_FIELD_OF_FIRE)) {</b>
<b class="nc">&nbsp;            toggleFieldOfFire.setSelected((Boolean)e.getNewValue());</b>
<b class="nc">&nbsp;        } else if (e.getName().equals(GUIPreferences.SHOW_KEYBINDS_OVERLAY)) {</b>
<b class="nc">&nbsp;            viewKeybindsOverlay.setSelected((Boolean)e.getNewValue());</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    public void die() {
<b class="nc">&nbsp;        GUIPreferences.getInstance().removePreferenceChangeListener(this);        </b>
&nbsp;    }
&nbsp;}
</code>
</pre>
</div>

<script type="text/javascript">
(function() {
    var msie = false, msie9 = false;
    /*@cc_on
      msie = true;
      @if (@_jscript_version >= 9)
        msie9 = true;
      @end
    @*/

    if (!msie || msie && msie9) {
      hljs.highlightAll()
      hljs.initLineNumbersOnLoad();
    }
})();
</script>

<div class="footer">
    
    <div style="float:right;">generated on 2023-05-16 16:28</div>
</div>
</body>
</html>
