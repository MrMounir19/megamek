


<!DOCTYPE html>
<html id="htmlId">
<head>
  <title>Coverage Report > PlanetaryConditions</title>
  <style type="text/css">
    @import "../../css/coverage.css";
    @import "../../css/idea.min.css";
  </style>
  <script type="text/javascript" src="../../js/highlight.min.js"></script>
  <script type="text/javascript" src="../../js/highlightjs-line-numbers.min.js"></script>
</head>

<body>
<div class="content">
<div class="breadCrumbs">
Current scope:     <a href="../../index.html">all classes</a>
    <span class="separator">|</span>
    <a href="../index.html">megamek.common</a>
</div>

<h1>Coverage Summary for Class: PlanetaryConditions (megamek.common)</h1>

<table class="coverageStats">
<tr>
  <th class="name">Class</th>
<th class="coverageStat 
">
  Class, %
</th>
<th class="coverageStat 
">
  Method, %
</th>
<th class="coverageStat 
">
  Line, %
</th>
</tr>
<tr>
  <td class="name">PlanetaryConditions</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (1/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    2.7%
  </span>
  <span class="absValue">
    (2/73)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    7.5%
  </span>
  <span class="absValue">
    (34/452)
  </span>
</td>
</tr>

</table>

<br/>
<br/>


<pre>
<code class="sourceCode" id="sourceCode">&nbsp;/*
&nbsp;* MegaMek -
&nbsp;* Copyright (C) 2005 Ben Mazur (bmazur@sev.org)
&nbsp;* Copyright (C) 2018 The MegaMek Team
&nbsp;*
&nbsp;* This program is free software; you can redistribute it and/or modify it under
&nbsp;* the terms of the GNU General Public License as published by the Free Software
&nbsp;* Foundation; either version 2 of the License, or (at your option) any later
&nbsp;* version.
&nbsp;*
&nbsp;* This program is distributed in the hope that it will be useful, but WITHOUT
&nbsp;* ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS
&nbsp;* FOR A PARTICULAR PURPOSE. See the GNU General Public License for more
&nbsp;* details.
&nbsp;*/
&nbsp;
&nbsp;package megamek.common;
&nbsp;
&nbsp;import java.io.Serializable;
&nbsp;
&nbsp;/**
&nbsp; * This class will hold all the information on planetary conditions and a variety of helper functions
&nbsp; * for those conditions
&nbsp; */
&nbsp;public class PlanetaryConditions implements Serializable {
&nbsp;
&nbsp;    private static final long serialVersionUID = 6838624193286089781L;
&nbsp;
&nbsp;    //light
&nbsp;    public static final int L_DAY          = 0;
&nbsp;    public static final int L_DUSK         = 1;
&nbsp;    public static final int L_FULL_MOON    = 2;
&nbsp;    public static final int L_MOONLESS     = 3;
&nbsp;    public static final int L_PITCH_BLACK  = 4;
<b class="fc">&nbsp;    private static String[] lightNames = { &quot;Daylight&quot;, &quot;Dusk&quot;, &quot;Full Moon Night&quot;, &quot;Moonless Night&quot;,</b>
&nbsp;                                           &quot;Pitch Black&quot;};
<b class="fc">&nbsp;    public static final int L_SIZE = lightNames.length;</b>
&nbsp;
&nbsp;    //Weather
&nbsp;    public static final int WE_NONE             = 0;
&nbsp;    public static final int WE_LIGHT_RAIN       = 1;
&nbsp;    public static final int WE_MOD_RAIN         = 2;
&nbsp;    public static final int WE_HEAVY_RAIN       = 3;
&nbsp;    public static final int WE_GUSTING_RAIN     = 4;
&nbsp;    public static final int WE_DOWNPOUR         = 5;
&nbsp;    public static final int WE_LIGHT_SNOW       = 6;
&nbsp;    public static final int WE_MOD_SNOW         = 7;
&nbsp;    public static final int WE_SNOW_FLURRIES    = 8;
&nbsp;    public static final int WE_HEAVY_SNOW       = 9;
&nbsp;    public static final int WE_SLEET            = 10;
&nbsp;    public static final int WE_BLIZZARD         = 11;
&nbsp;    public static final int WE_ICE_STORM        = 12;
&nbsp;    public static final int WE_LIGHT_HAIL       = 13;
&nbsp;    public static final int WE_HEAVY_HAIL       = 14;
<b class="fc">&nbsp;    private static String[] weatherNames = { &quot;Clear&quot;, &quot;Light Rain&quot;, &quot;Moderate Rain&quot;, &quot;Heavy Rain&quot;, &quot;Gusting Rain&quot;, &quot;Torrential Downpour&quot;,</b>
&nbsp;                                             &quot;Light Snowfall&quot;, &quot;Moderate Snowfall&quot;, &quot;Snow Flurries&quot;, &quot;Heavy Snowfall&quot;, &quot;Sleet&quot;, &quot;Blizzard&quot;,
&nbsp;                                             &quot;Ice Storm&quot;};//, &quot;Light Hail&quot;, &quot;Heavy Hail&quot;};
<b class="fc">&nbsp;    public static final int WE_SIZE = weatherNames.length;</b>
&nbsp;
&nbsp;    //Wind
&nbsp;    public static final int WI_NONE        = 0;
&nbsp;    public static final int WI_LIGHT_GALE  = 1;
&nbsp;    public static final int WI_MOD_GALE    = 2;
&nbsp;    public static final int WI_STRONG_GALE = 3;
&nbsp;    public static final int WI_STORM       = 4;
&nbsp;    public static final int WI_TORNADO_F13 = 5;
&nbsp;    public static final int WI_TORNADO_F4  = 6;
&nbsp;
<b class="fc">&nbsp;    private static String[] windNames = { &quot;Calm&quot;, &quot;Light Gale&quot;, &quot;Moderate Gale&quot;, &quot;Strong Gale&quot;, &quot;Storm&quot;, &quot;Tornado F1-F3&quot;, &quot;Tornado F4&quot;};</b>
<b class="fc">&nbsp;    public static final int WI_SIZE = windNames.length;</b>
&nbsp;
&nbsp;    //wind direction
<b class="fc">&nbsp;    private static String[] dirNames = { &quot;North&quot;, &quot;Northeast&quot;, &quot;Southeast&quot;, &quot;South&quot;, &quot;Southwest&quot;, &quot;Northwest&quot;, &quot;RandomWindDirection&quot; };</b>
<b class="fc">&nbsp;    public static final int DIR_SIZE = dirNames.length;</b>
&nbsp;    public static final int DIR_RANDOM = 6;
&nbsp;    
&nbsp;
&nbsp;    //atmospheric pressure
&nbsp;    public static final int ATMO_VACUUM   = 0;
&nbsp;    public static final int ATMO_TRACE    = 1;
&nbsp;    public static final int ATMO_THIN     = 2;
&nbsp;    public static final int ATMO_STANDARD = 3;
&nbsp;    public static final int ATMO_HIGH     = 4;
&nbsp;    public static final int ATMO_VHIGH    = 5;
&nbsp;
<b class="fc">&nbsp;    public static String[] atmoNames = {&quot;Vacuum&quot;, &quot;Trace&quot;, &quot;Thin&quot;, &quot;Standard&quot;, &quot;High&quot;, &quot;Very High&quot; };</b>
<b class="fc">&nbsp;    public static final int ATMO_SIZE = atmoNames.length;</b>
&nbsp;
&nbsp;    //fog
&nbsp;    public static final int FOG_NONE  = 0;
&nbsp;    public static final int FOG_LIGHT = 1;
&nbsp;    public static final int FOG_HEAVY = 2;
&nbsp;
<b class="fc">&nbsp;    private static String[] fogNames = {&quot;None&quot;, &quot;Light Fog&quot;, &quot;Heavy Fog&quot; };</b>
<b class="fc">&nbsp;    public static final int FOG_SIZE = fogNames.length;</b>
&nbsp;
&nbsp;    //misc
<b class="fc">&nbsp;    private boolean blowingSand = false;</b>
<b class="fc">&nbsp;    private boolean sandStorm = false;</b>
<b class="fc">&nbsp;    private boolean runOnce = false;</b>
&nbsp;
&nbsp;    //set up the specific conditions
<b class="fc">&nbsp;    private int lightConditions = L_DAY;</b>
<b class="fc">&nbsp;    private int weatherConditions = WE_NONE;</b>
<b class="fc">&nbsp;    private int oldWeatherConditions = WE_NONE;</b>
<b class="fc">&nbsp;    private int windStrength = WI_NONE;</b>
<b class="fc">&nbsp;    private int windDirection = DIR_RANDOM;</b>
<b class="fc">&nbsp;    private boolean shiftWindDirection = false;</b>
<b class="fc">&nbsp;    private boolean shiftWindStrength = false;</b>
<b class="fc">&nbsp;    private boolean isSleeting = false;</b>
<b class="fc">&nbsp;    private int atmosphere = ATMO_STANDARD;</b>
<b class="fc">&nbsp;    private int fog = FOG_NONE;</b>
<b class="fc">&nbsp;    private int temperature = 25;</b>
<b class="fc">&nbsp;    private int oldTemperature = 25;</b>
<b class="fc">&nbsp;    private float gravity = (float)1.0;</b>
<b class="fc">&nbsp;    private boolean emi = false;</b>
<b class="fc">&nbsp;    private boolean terrainAffected = true;</b>
<b class="fc">&nbsp;    private int maxWindStrength = PlanetaryConditions.WI_TORNADO_F4;</b>
<b class="fc">&nbsp;    private int minWindStrength = PlanetaryConditions.WI_NONE;</b>
&nbsp;
&nbsp;    /**
&nbsp;     * Constructor
&nbsp;     */
<b class="fc">&nbsp;    public PlanetaryConditions() {</b>
&nbsp;
<b class="fc">&nbsp;    }</b>
&nbsp;
&nbsp;    /** Creates new PlanetaryConditions that is a duplicate of another */
<b class="nc">&nbsp;    public PlanetaryConditions(PlanetaryConditions other) {</b>
<b class="nc">&nbsp;        lightConditions = other.lightConditions;</b>
<b class="nc">&nbsp;        weatherConditions = other.weatherConditions;</b>
<b class="nc">&nbsp;        windStrength = other.windStrength;</b>
<b class="nc">&nbsp;        windDirection = other.windDirection;</b>
<b class="nc">&nbsp;        shiftWindDirection = other.shiftWindDirection;</b>
<b class="nc">&nbsp;        shiftWindStrength = other.shiftWindStrength;</b>
<b class="nc">&nbsp;        minWindStrength = other.minWindStrength;</b>
<b class="nc">&nbsp;        maxWindStrength = other.maxWindStrength;</b>
<b class="nc">&nbsp;        atmosphere = other.atmosphere;</b>
<b class="nc">&nbsp;        temperature = other.temperature;</b>
<b class="nc">&nbsp;        gravity = other.gravity;</b>
<b class="nc">&nbsp;        emi = other.emi;</b>
<b class="nc">&nbsp;        fog = other.fog;</b>
<b class="nc">&nbsp;        terrainAffected = other.terrainAffected;</b>
<b class="nc">&nbsp;        blowingSand = other.blowingSand;</b>
<b class="nc">&nbsp;        runOnce = other.runOnce;</b>
<b class="nc">&nbsp;    }</b>
&nbsp;
&nbsp;    /** clone! */
&nbsp;    @Override
&nbsp;    public Object clone() {
<b class="nc">&nbsp;        return new PlanetaryConditions(this);</b>
&nbsp;    }
&nbsp;
&nbsp;    public static String getLightDisplayableName(int type) {
<b class="nc">&nbsp;        if ((type &gt;= 0) &amp;&amp; (type &lt; L_SIZE)) {</b>
<b class="nc">&nbsp;            return Messages.getString(&quot;PlanetaryConditions.&quot; + lightNames[type]);</b>
&nbsp;        }
<b class="nc">&nbsp;        throw new IllegalArgumentException(&quot;Unknown light condition&quot;);</b>
&nbsp;    }
&nbsp;
&nbsp;    public static String getWeatherDisplayableName(int type) {
<b class="nc">&nbsp;        if ((type &gt;= 0) &amp;&amp; (type &lt; WE_SIZE)) {</b>
<b class="nc">&nbsp;            return Messages.getString(&quot;PlanetaryConditions.&quot; + weatherNames[type]);</b>
&nbsp;        }
<b class="nc">&nbsp;        throw new IllegalArgumentException(&quot;Unknown weather condition&quot;);</b>
&nbsp;    }
&nbsp;
&nbsp;    public static String getWindDirDisplayableName(int type) {
<b class="nc">&nbsp;        if ((type &gt;= 0) &amp;&amp; (type &lt; DIR_SIZE)) {</b>
<b class="nc">&nbsp;            return Messages.getString(&quot;PlanetaryConditions.&quot; + dirNames[type]);</b>
&nbsp;        }
<b class="nc">&nbsp;        throw new IllegalArgumentException(&quot;Unknown wind direction&quot;);</b>
&nbsp;    }
&nbsp;
&nbsp;    public static String getWindDisplayableName(int type) {
<b class="nc">&nbsp;        if ((type &gt;= 0) &amp;&amp; (type &lt; WI_SIZE)) {</b>
<b class="nc">&nbsp;            return Messages.getString(&quot;PlanetaryConditions.&quot; + windNames[type]);</b>
&nbsp;        }
<b class="nc">&nbsp;        throw new IllegalArgumentException(&quot;Unknown wind condition&quot;);</b>
&nbsp;    }
&nbsp;
&nbsp;    public static String getAtmosphereDisplayableName(int type) {
<b class="nc">&nbsp;        if ((type &gt;= 0) &amp;&amp; (type &lt; ATMO_SIZE)) {</b>
<b class="nc">&nbsp;            return Messages.getString(&quot;PlanetaryConditions.&quot; + atmoNames[type]);</b>
&nbsp;        }
<b class="nc">&nbsp;        throw new IllegalArgumentException(&quot;Unknown atmospheric pressure condition&quot;);</b>
&nbsp;    }
&nbsp;
&nbsp;    public static String getFogDisplayableName(int type) {
<b class="nc">&nbsp;        if ((type &gt;= 0) &amp;&amp; (type &lt; FOG_SIZE)) {</b>
<b class="nc">&nbsp;            return Messages.getString(&quot;PlanetaryConditions.&quot; + fogNames[type]);</b>
&nbsp;        }
<b class="nc">&nbsp;        throw new IllegalArgumentException(&quot;Unknown fog condition&quot;);</b>
&nbsp;    }
&nbsp;
&nbsp;    public String getWindDirDisplayableName() {
<b class="nc">&nbsp;        return getWindDirDisplayableName(windDirection);</b>
&nbsp;    }
&nbsp;
&nbsp;    public String getLightDisplayableName() {
<b class="nc">&nbsp;        return getLightDisplayableName(lightConditions);</b>
&nbsp;    }
&nbsp;
&nbsp;    public String getWeatherDisplayableName() {
<b class="nc">&nbsp;        return getWeatherDisplayableName(weatherConditions);</b>
&nbsp;    }
&nbsp;
&nbsp;    public String getWindDisplayableName() {
<b class="nc">&nbsp;        return getWindDisplayableName(windStrength);</b>
&nbsp;    }
&nbsp;
&nbsp;    public String getAtmosphereDisplayableName() {
<b class="nc">&nbsp;        return getAtmosphereDisplayableName(atmosphere);</b>
&nbsp;    }
&nbsp;
&nbsp;    public String getFogDisplayableName() {
<b class="nc">&nbsp;        return getFogDisplayableName(fog);</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * to-hit penalty for light
&nbsp;     */
&nbsp;    public int getLightHitPenalty(boolean isWeapon) {
<b class="nc">&nbsp;        int penalty = 0;</b>
<b class="nc">&nbsp;        if(isWeapon) {</b>
<b class="nc">&nbsp;            if(lightConditions == L_DUSK) {</b>
<b class="nc">&nbsp;                penalty = 1;</b>
&nbsp;            }
<b class="nc">&nbsp;            else if(lightConditions == L_FULL_MOON) {</b>
<b class="nc">&nbsp;                penalty = 2;</b>
&nbsp;            }
<b class="nc">&nbsp;            else if(lightConditions == L_MOONLESS) {</b>
<b class="nc">&nbsp;                penalty = 3;</b>
&nbsp;            }
<b class="nc">&nbsp;            else if(lightConditions == L_PITCH_BLACK) {</b>
<b class="nc">&nbsp;                penalty = 4;</b>
&nbsp;            }
&nbsp;        }
&nbsp;        else {
<b class="nc">&nbsp;            if(lightConditions == L_MOONLESS) {</b>
<b class="nc">&nbsp;                penalty = 1;</b>
&nbsp;            }
<b class="nc">&nbsp;            else if(lightConditions == L_PITCH_BLACK) {</b>
<b class="nc">&nbsp;                penalty = 2;</b>
&nbsp;            }
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        return penalty;</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * heat bonus to hit for being overheated in darkness
&nbsp;     */
&nbsp;    public int getLightHeatBonus(int heat) {
<b class="nc">&nbsp;        double divisor = 10000.0;</b>
<b class="nc">&nbsp;        if(lightConditions == L_DUSK) {</b>
<b class="nc">&nbsp;            divisor = 25.0;</b>
&nbsp;        }
<b class="nc">&nbsp;        else if(lightConditions == L_FULL_MOON) {</b>
<b class="nc">&nbsp;            divisor = 20.0;</b>
&nbsp;        }
<b class="nc">&nbsp;        else if(lightConditions == L_MOONLESS) {</b>
<b class="nc">&nbsp;            divisor = 15.0;</b>
&nbsp;        }
<b class="nc">&nbsp;        else if(lightConditions == L_PITCH_BLACK) {</b>
<b class="nc">&nbsp;            divisor = 10.0;</b>
&nbsp;        }
<b class="nc">&nbsp;        return (-1 * (int)Math.floor(heat / divisor));</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * piloting penalty for running/flanking/etc for light
&nbsp;     */
&nbsp;    public int getLightPilotPenalty() {
<b class="nc">&nbsp;        if(lightConditions == L_MOONLESS) {</b>
<b class="nc">&nbsp;            return 1;</b>
&nbsp;        }
<b class="nc">&nbsp;        else if(lightConditions == L_PITCH_BLACK) {</b>
<b class="nc">&nbsp;            return 2;</b>
&nbsp;        }
<b class="nc">&nbsp;        return 0;</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * to-hit penalty for weather
&nbsp;     */
&nbsp;    public int getWeatherHitPenalty(Entity en) {
<b class="nc">&nbsp;        if(((weatherConditions == WE_LIGHT_RAIN) || (weatherConditions == WE_LIGHT_SNOW))</b>
&nbsp;                &amp;&amp; (en instanceof Infantry) &amp;&amp; !(en instanceof BattleArmor)) {
<b class="nc">&nbsp;            return 1;</b>
&nbsp;        }
<b class="nc">&nbsp;        else if((weatherConditions == WE_MOD_RAIN) || (weatherConditions == WE_HEAVY_RAIN)</b>
&nbsp;                || (weatherConditions == WE_MOD_SNOW) || (weatherConditions == WE_HEAVY_SNOW)
&nbsp;                || (weatherConditions == WE_SLEET) || (weatherConditions == WE_GUSTING_RAIN)
&nbsp;                || (weatherConditions == WE_SNOW_FLURRIES) || (weatherConditions == WE_BLIZZARD)) {
<b class="nc">&nbsp;            return 1;</b>
&nbsp;        }
<b class="nc">&nbsp;        else if(weatherConditions == WE_DOWNPOUR) {</b>
<b class="nc">&nbsp;            return 2;</b>
&nbsp;        }
&nbsp;        else  {
<b class="nc">&nbsp;            return 0;</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * piloting penalty for weather
&nbsp;     */
&nbsp;    public int getWeatherPilotPenalty() {
<b class="nc">&nbsp;        if((weatherConditions == WE_HEAVY_RAIN) || (weatherConditions == WE_HEAVY_SNOW)</b>
&nbsp;                || (weatherConditions == WE_GUSTING_RAIN) || (weatherConditions == WE_BLIZZARD)) {
<b class="nc">&nbsp;            return 1;</b>
&nbsp;        }
<b class="nc">&nbsp;        else if(weatherConditions == WE_DOWNPOUR) {</b>
<b class="nc">&nbsp;            return 2;</b>
&nbsp;        }
&nbsp;        else  {
<b class="nc">&nbsp;            return 0;</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;
&nbsp;    /**
&nbsp;     * gravity penalties to PSRs
&nbsp;     * According to email from TPTB, you apply a penalty for every 0.5 gravities above or below 1 (rounding up)
&nbsp;     */
&nbsp;    public int getGravityPilotPenalty() {
<b class="nc">&nbsp;        return (int)Math.floor(Math.abs(gravity - 1.0) / 0.5);</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * piloting penalty for wind
&nbsp;     */
&nbsp;    public int getWindPilotPenalty(Entity en) {
<b class="nc">&nbsp;        int penalty = 0;</b>
&nbsp;
<b class="nc">&nbsp;        switch(windStrength) {</b>
&nbsp;        case (WI_MOD_GALE):
<b class="nc">&nbsp;            if((en instanceof VTOL) || (en.getMovementMode() == EntityMovementMode.WIGE)) {</b>
<b class="nc">&nbsp;                penalty = 1;</b>
&nbsp;            }
&nbsp;            break;
&nbsp;        case (WI_STRONG_GALE):
<b class="nc">&nbsp;            if((en instanceof VTOL) || (en.getMovementMode() == EntityMovementMode.WIGE)</b>
<b class="nc">&nbsp;                    || (en.getMovementMode() == EntityMovementMode.HOVER)) {</b>
<b class="nc">&nbsp;                penalty = 2;</b>
&nbsp;            }
<b class="nc">&nbsp;            else if((en instanceof Mech) || (en.isAirborne())) {</b>
<b class="nc">&nbsp;                penalty = 1;</b>
&nbsp;            }
&nbsp;            break;
&nbsp;        case (WI_STORM):
<b class="nc">&nbsp;            if((en instanceof VTOL) || (en instanceof Mech) || (en.getMovementMode() == EntityMovementMode.WIGE)</b>
<b class="nc">&nbsp;                    || (en.getMovementMode() == EntityMovementMode.HOVER)) {</b>
<b class="nc">&nbsp;                penalty = 3;</b>
&nbsp;            }
<b class="nc">&nbsp;            else if(en.isAirborne()) {</b>
<b class="nc">&nbsp;                penalty = 2;</b>
&nbsp;            }
&nbsp;            break;
&nbsp;        case (WI_TORNADO_F13):
<b class="nc">&nbsp;            penalty = 3;</b>
<b class="nc">&nbsp;            break;</b>
&nbsp;        case (WI_TORNADO_F4):
<b class="nc">&nbsp;            penalty = 5;</b>
<b class="nc">&nbsp;            break;</b>
&nbsp;        default:
<b class="nc">&nbsp;            penalty = 0;</b>
&nbsp;        }
<b class="nc">&nbsp;        return penalty;</b>
&nbsp;    }
&nbsp;
&nbsp;    public void determineWind() {
<b class="nc">&nbsp;        if (windDirection == DIR_RANDOM) {</b>
&nbsp;            // Initial wind direction. If using level 2 rules, this
&nbsp;            // will be the wind direction for the whole battle.
<b class="nc">&nbsp;            windDirection = Compute.d6(1) - 1;</b>
<b class="nc">&nbsp;        } else if (shiftWindDirection) {</b>
&nbsp;            // Wind direction changes on a roll of 1 or 6
<b class="nc">&nbsp;            switch (Compute.d6()) {</b>
&nbsp;                case 1: // rotate clockwise
<b class="nc">&nbsp;                    windDirection = (windDirection + 1) % 6;</b>
<b class="nc">&nbsp;                    break;</b>
&nbsp;                case 6: // rotate counter-clockwise
<b class="nc">&nbsp;                    windDirection = (windDirection + 5) % 6;</b>
&nbsp;            }
&nbsp;        }
<b class="nc">&nbsp;        if (shiftWindStrength) {</b>
&nbsp;            // Wind strength changes on a roll of 1 or 6
<b class="nc">&nbsp;            switch (Compute.d6()) {</b>
&nbsp;            case 1: // weaker
<b class="nc">&nbsp;                windStrength = Math.max(minWindStrength, --windStrength);</b>
<b class="nc">&nbsp;                doSleetCheck();</b>
<b class="nc">&nbsp;                doSandStormCheck();</b>
<b class="nc">&nbsp;                break;</b>
&nbsp;            case 6: // stronger
<b class="nc">&nbsp;                windStrength = Math.min(maxWindStrength, ++windStrength);</b>
<b class="nc">&nbsp;                doSleetCheck();</b>
<b class="nc">&nbsp;                doSandStormCheck();</b>
&nbsp;                break;
&nbsp;            }
&nbsp;        }
&nbsp;
&nbsp;        //atmospheric pressure may limit wind strength
<b class="nc">&nbsp;        if((atmosphere == ATMO_TRACE) &amp;&amp; (windStrength &gt; WI_STORM)) {</b>
<b class="nc">&nbsp;            windStrength = WI_STORM;</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        if((atmosphere ==ATMO_THIN) &amp;&amp; (windStrength &gt; WI_TORNADO_F13)) {</b>
<b class="nc">&nbsp;            windStrength = WI_TORNADO_F13;</b>
&nbsp;        }
<b class="nc">&nbsp;    }</b>
&nbsp;
&nbsp;    /**
&nbsp;     * modifiers for fire ignition
&nbsp;     */
&nbsp;    public int getIgniteModifiers() {
<b class="nc">&nbsp;        int mod = 0;</b>
&nbsp;
<b class="nc">&nbsp;        if((weatherConditions == WE_LIGHT_RAIN) || (weatherConditions == WE_MOD_RAIN)) {</b>
<b class="nc">&nbsp;            mod += 1;</b>
&nbsp;        }
<b class="nc">&nbsp;        if((weatherConditions == WE_HEAVY_RAIN) || (weatherConditions == WE_DOWNPOUR)</b>
&nbsp;                || (weatherConditions == WE_LIGHT_SNOW) || (weatherConditions == WE_MOD_SNOW)
&nbsp;                || (weatherConditions == WE_GUSTING_RAIN) || (weatherConditions == WE_SNOW_FLURRIES)) {
<b class="nc">&nbsp;            mod += 2;</b>
&nbsp;        }
<b class="nc">&nbsp;        if((weatherConditions == WE_HEAVY_SNOW) || (weatherConditions == WE_BLIZZARD)</b>
&nbsp;                || (weatherConditions == WE_LIGHT_HAIL) || (weatherConditions == WE_HEAVY_HAIL)) {
<b class="nc">&nbsp;            mod += 3;</b>
&nbsp;        }
<b class="nc">&nbsp;        if((windStrength == WI_LIGHT_GALE) || (windStrength == WI_MOD_GALE)) {</b>
<b class="nc">&nbsp;            mod += 2;</b>
&nbsp;        }
<b class="nc">&nbsp;        if((windStrength == WI_STRONG_GALE) || (windStrength == WI_STORM) || (weatherConditions == WE_ICE_STORM)) {</b>
<b class="nc">&nbsp;            mod += 4;</b>
&nbsp;        }
<b class="nc">&nbsp;        if (getTemperature() &gt; 30) {</b>
<b class="nc">&nbsp;            mod -= getTemperatureDifference(30,-30);</b>
<b class="nc">&nbsp;        } else if (getTemperature() &lt; 30) {</b>
<b class="nc">&nbsp;            mod += getTemperatureDifference(30, -30);</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        return mod;</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Do a roll for these weather conditions putting out fire
&nbsp;     * return boolean
&nbsp;     */
&nbsp;    public boolean putOutFire() {
<b class="nc">&nbsp;        int roll = Compute.d6(2);</b>
<b class="nc">&nbsp;        switch(weatherConditions) {</b>
&nbsp;        case (WE_LIGHT_HAIL):
&nbsp;        case (WE_LIGHT_RAIN):
&nbsp;        case (WE_LIGHT_SNOW):
<b class="nc">&nbsp;            roll = roll + 1;</b>
<b class="nc">&nbsp;            break;</b>
&nbsp;        case (WE_HEAVY_HAIL):
&nbsp;        case (WE_MOD_RAIN):
&nbsp;        case (WE_MOD_SNOW):
&nbsp;        case WE_SNOW_FLURRIES:
<b class="nc">&nbsp;            roll = roll + 2;</b>
<b class="nc">&nbsp;            break;</b>
&nbsp;        case (WE_HEAVY_RAIN):
&nbsp;        case (WE_GUSTING_RAIN):
&nbsp;        case (WE_HEAVY_SNOW):
&nbsp;        case WE_BLIZZARD:
<b class="nc">&nbsp;            roll = roll + 3;</b>
<b class="nc">&nbsp;            break;</b>
&nbsp;        case (WE_DOWNPOUR):
<b class="nc">&nbsp;            roll = roll + 4;</b>
<b class="nc">&nbsp;            break;</b>
&nbsp;        default:
<b class="nc">&nbsp;            roll = -1;</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        if(roll &gt; 10) {</b>
<b class="nc">&nbsp;            return true;</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;          return false;</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Returns how much higher or lower than a given range, divided by
&nbsp;     * ten, rounded up, the temperature is
&nbsp;     */
&nbsp;
&nbsp;    public int getTemperatureDifference(int high, int low) {
<b class="nc">&nbsp;        int i = 0;</b>
&nbsp;        //if the low is more than the high, reverse
<b class="nc">&nbsp;        if(low &gt; high) {</b>
<b class="nc">&nbsp;            int tempLow = low;</b>
<b class="nc">&nbsp;            low = high;</b>
<b class="nc">&nbsp;            high = tempLow;</b>
&nbsp;
&nbsp;        }
<b class="nc">&nbsp;        if ((getTemperature() &gt;= low)</b>
<b class="nc">&nbsp;                &amp;&amp; (getTemperature() &lt;= high)) {</b>
<b class="nc">&nbsp;            return i;</b>
<b class="nc">&nbsp;        } else if (getTemperature() &lt; low) {</b>
&nbsp;            do {
<b class="nc">&nbsp;                i++;</b>
<b class="nc">&nbsp;            } while ((getTemperature() + (i * 10)) &lt; low);</b>
<b class="nc">&nbsp;            return i;</b>
&nbsp;        } else {
&nbsp;            do {
<b class="nc">&nbsp;                i++;</b>
<b class="nc">&nbsp;            } while ((getTemperature() - (i * 10)) &gt; high);</b>
&nbsp;        }
<b class="nc">&nbsp;        return i;</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     *
&nbsp;     * @return a &lt;code&gt;String&lt;/code&gt; with the reason why you cannot start a fire here
&nbsp;     */
&nbsp;    public String cannotStartFire() {
<b class="nc">&nbsp;        if(atmosphere &lt; ATMO_THIN) {</b>
<b class="nc">&nbsp;            return &quot;atmosphere this thin&quot;;</b>
&nbsp;        }
<b class="nc">&nbsp;        if(windStrength &gt; WI_STORM) {</b>
<b class="nc">&nbsp;            return &quot;a tornado&quot;;</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        return null;</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Planetary conditions on movement, except for gravity
&nbsp;     * @param en - the entity in question
&nbsp;     * @return an &lt;code&gt;int&lt;/code&gt; with the modifier to movement
&nbsp;     */
&nbsp;    public int getMovementMods(Entity en) {
<b class="nc">&nbsp;        int mod = 0;</b>
&nbsp;
&nbsp;        // weather mods are calculated based on conditional effects ie extreme temperatures, wind
&nbsp;
&nbsp;        // wind mods
<b class="nc">&nbsp;        switch(windStrength) {</b>
&nbsp;        case(WI_LIGHT_GALE):
<b class="nc">&nbsp;            if(!(en instanceof BattleArmor)</b>
<b class="nc">&nbsp;                    &amp;&amp; ((en.getMovementMode() == EntityMovementMode.INF_LEG)</b>
<b class="nc">&nbsp;                            || (en.getMovementMode() == EntityMovementMode.INF_JUMP))) {</b>
<b class="nc">&nbsp;                mod -= 1;</b>
&nbsp;            }
&nbsp;            break;
&nbsp;        case (WI_MOD_GALE):
<b class="nc">&nbsp;            if((en instanceof Infantry) &amp;&amp; !(en instanceof BattleArmor)) {</b>
<b class="nc">&nbsp;                mod -= 1;</b>
&nbsp;            }
&nbsp;            break;
&nbsp;        case (WI_STRONG_GALE):
&nbsp;        case (WI_STORM):
<b class="nc">&nbsp;            if(en instanceof BattleArmor) {</b>
<b class="nc">&nbsp;                mod -= 1;</b>
&nbsp;            }
<b class="nc">&nbsp;            else if(en instanceof Infantry) {</b>
<b class="nc">&nbsp;                mod -= 2;</b>
&nbsp;            }
&nbsp;            break;
&nbsp;        case (WI_TORNADO_F13):
<b class="nc">&nbsp;            if(en.isAirborne()) {</b>
<b class="nc">&nbsp;                mod -= 1;</b>
&nbsp;            }
&nbsp;            else {
<b class="nc">&nbsp;                mod -= 2;</b>
&nbsp;            }
&nbsp;            break;
&nbsp;        }
&nbsp;
&nbsp;        // atmospheric pressure mods
<b class="nc">&nbsp;        switch(atmosphere) {</b>
&nbsp;        case(ATMO_THIN):
<b class="nc">&nbsp;            if((en.getMovementMode() == EntityMovementMode.HOVER)</b>
<b class="nc">&nbsp;                    || (en.getMovementMode() == EntityMovementMode.WIGE)</b>
<b class="nc">&nbsp;                    || (en.getMovementMode() == EntityMovementMode.VTOL)) {</b>
<b class="nc">&nbsp;                mod -= 2;</b>
&nbsp;            }
&nbsp;            break;
&nbsp;        case(ATMO_HIGH):
&nbsp;        case(ATMO_VHIGH):
<b class="nc">&nbsp;            if((en.getMovementMode() == EntityMovementMode.HOVER)</b>
<b class="nc">&nbsp;                    || (en.getMovementMode() == EntityMovementMode.WIGE)</b>
<b class="nc">&nbsp;                    || (en.getMovementMode() == EntityMovementMode.VTOL)) {</b>
<b class="nc">&nbsp;                mod += 1;</b>
&nbsp;            }
&nbsp;            break;
&nbsp;        }
&nbsp;
&nbsp;        // temperature difference
<b class="nc">&nbsp;        if((en instanceof Tank) || ((en instanceof Infantry) &amp;&amp; !((Infantry)en).isXCT()) || (en instanceof Protomech)) {</b>
<b class="nc">&nbsp;            mod -= Math.abs(getTemperatureDifference(50,-30));</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        return mod;</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * is the given entity type doomed in these conditions?
&nbsp;     * @return a string given the reason for being doomed, null if not doomed
&nbsp;     */
&nbsp;    public String whyDoomed(Entity en, IGame game) {
<b class="nc">&nbsp;        if ((atmosphere &lt; ATMO_THIN) &amp;&amp; en.doomedInVacuum()) {</b>
<b class="nc">&nbsp;            return &quot;vacuum&quot;;</b>
&nbsp;        }
<b class="nc">&nbsp;        if ((windStrength == WI_TORNADO_F4) &amp;&amp; !(en instanceof Mech)) {</b>
<b class="nc">&nbsp;            return &quot;tornado&quot;;</b>
&nbsp;        }
<b class="nc">&nbsp;        if ((windStrength == WI_TORNADO_F13)</b>
&nbsp;                &amp;&amp; (((en instanceof Infantry) &amp;&amp; !(en instanceof BattleArmor))
<b class="nc">&nbsp;                        || ((en.getMovementMode() == EntityMovementMode.HOVER)</b>
<b class="nc">&nbsp;                    || (en.getMovementMode() == EntityMovementMode.WIGE)</b>
<b class="nc">&nbsp;                    || (en.getMovementMode() == EntityMovementMode.VTOL)))) {</b>
<b class="nc">&nbsp;            return &quot;tornado&quot;;</b>
&nbsp;        }
<b class="nc">&nbsp;        if((windStrength == WI_STORM) &amp;&amp; ((en instanceof Infantry) &amp;&amp; !(en instanceof BattleArmor))) {</b>
<b class="nc">&nbsp;            return &quot;storm&quot;;</b>
&nbsp;        }
<b class="nc">&nbsp;        if ((temperature &gt; 50 || temperature &lt; -30) &amp;&amp; en.doomedInExtremeTemp()) {</b>
<b class="nc">&nbsp;            if (Compute.isInBuilding(game, en)) {</b>
<b class="nc">&nbsp;                return null;</b>
&nbsp;            }
<b class="nc">&nbsp;            return &quot;extreme temperature&quot;;</b>
&nbsp;        }
<b class="nc">&nbsp;        return null;</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * visual range based on conditions
&nbsp;     *
&nbsp;     */
&nbsp;    public int getVisualRange(Entity en, boolean targetIlluminated) {
&nbsp;
<b class="nc">&nbsp;        boolean Spotlight = false;</b>
&nbsp;
<b class="nc">&nbsp;        boolean isMechVee = false;</b>
<b class="nc">&nbsp;        boolean isLargeCraft = false;</b>
<b class="nc">&nbsp;        boolean isAero = false;</b>
&nbsp;
&nbsp;        //Needed for MekWars for Maximum Visual Range.
<b class="nc">&nbsp;        if ( en == null ) {</b>
<b class="nc">&nbsp;            isMechVee = true;</b>
<b class="nc">&nbsp;            Spotlight = targetIlluminated;</b>
&nbsp;        }else {
<b class="nc">&nbsp;            Spotlight = en.isUsingSpotlight();</b>
<b class="nc">&nbsp;            isMechVee = (en instanceof Mech &amp;&amp; !en.isAero()) || (en instanceof Tank);</b>
<b class="nc">&nbsp;            isLargeCraft = (en instanceof Dropship) || (en instanceof Jumpship);</b>
<b class="nc">&nbsp;            isAero = (en.isAero()) &amp;&amp; !isLargeCraft;</b>
&nbsp;        }
&nbsp;        //anything else is infantry
&nbsp;        
&nbsp;        //Beyond altitude 9, Aeros can&#39;t see. No need to repeat this test.
<b class="nc">&nbsp;        if (isAero &amp;&amp; (en.getAltitude() &gt; 9)) {</b>
<b class="nc">&nbsp;            return 0;</b>
&nbsp;        }
&nbsp;        
&nbsp;        //New rulings per v3.02 errata. Spotlights are easier, yay!
&nbsp;        //Illuminated?  Flat 45 hex distance
<b class="nc">&nbsp;        if (targetIlluminated &amp;&amp; (lightConditions &gt; L_DAY)) {</b>
<b class="nc">&nbsp;            return 45;</b>
<b class="nc">&nbsp;        } else if (Spotlight &amp;&amp; (lightConditions &gt; L_DAY)) {</b>
&nbsp;            //Using a searchlight?  Flat 30 hex range
<b class="nc">&nbsp;            if (isMechVee || isAero || isLargeCraft) {</b>
<b class="nc">&nbsp;                return 30;</b>
&nbsp;            }
&nbsp;            //Except infantry/handheld, 10 hexes
<b class="nc">&nbsp;            return 10;</b>
<b class="nc">&nbsp;        } else if (lightConditions == L_PITCH_BLACK) {</b>
<b class="nc">&nbsp;            if (isMechVee || (isAero &amp;&amp; (en.getAltitude() &lt; 2))) {</b>
<b class="nc">&nbsp;                return 3;</b>
&nbsp;            }
<b class="nc">&nbsp;            if (isAero) {</b>
<b class="nc">&nbsp;                return 5;</b>
&nbsp;            }
<b class="nc">&nbsp;            if (isLargeCraft) {</b>
<b class="nc">&nbsp;                return 4;</b>
&nbsp;            }
<b class="nc">&nbsp;            return 1;</b>
<b class="nc">&nbsp;        } else if ((lightConditions == L_MOONLESS)</b>
&nbsp;                || (fog == FOG_HEAVY)) {
<b class="nc">&nbsp;            if(isMechVee || (isAero &amp;&amp; (en.getAltitude() &lt; 2))) {</b>
<b class="nc">&nbsp;                return 5;</b>
&nbsp;            }
<b class="nc">&nbsp;            if (isAero) {</b>
<b class="nc">&nbsp;                return 10;</b>
&nbsp;            }
<b class="nc">&nbsp;            if (isLargeCraft) {</b>
<b class="nc">&nbsp;                return 8;</b>
&nbsp;            }
<b class="nc">&nbsp;            return 2;</b>
<b class="nc">&nbsp;        } else if ((weatherConditions == WE_HEAVY_HAIL)</b>
&nbsp;                || (weatherConditions == WE_SLEET)
&nbsp;                || (weatherConditions == WE_HEAVY_SNOW)
&nbsp;                || (blowingSand &amp;&amp; (windStrength &gt;= WI_MOD_GALE))
&nbsp;                || (lightConditions == L_FULL_MOON)
&nbsp;                || (weatherConditions == WE_GUSTING_RAIN)
&nbsp;                || (weatherConditions == WE_BLIZZARD)
&nbsp;                || (weatherConditions == WE_ICE_STORM)
&nbsp;                || (weatherConditions == WE_DOWNPOUR)) {
<b class="nc">&nbsp;            if (isMechVee || (isAero &amp;&amp; (en.getAltitude() &lt; 2))) {</b>
<b class="nc">&nbsp;                return 10;</b>
&nbsp;            }
<b class="nc">&nbsp;            if (isAero) {</b>
<b class="nc">&nbsp;                return 20;</b>
&nbsp;            }
<b class="nc">&nbsp;            if (isLargeCraft) {</b>
<b class="nc">&nbsp;                return 15;</b>
&nbsp;            }
<b class="nc">&nbsp;            return 5;</b>
<b class="nc">&nbsp;        } else if ((lightConditions == L_DUSK)</b>
&nbsp;                || (weatherConditions == WE_HEAVY_RAIN)
&nbsp;                || (weatherConditions == WE_SNOW_FLURRIES)
&nbsp;                || (weatherConditions == WE_MOD_SNOW) &amp;&amp; (windStrength &gt;= WI_MOD_GALE)) {
<b class="nc">&nbsp;            if (isMechVee || (isAero &amp;&amp; (en.getAltitude() &lt; 2))) {</b>
<b class="nc">&nbsp;                return 15;</b>
&nbsp;            }
<b class="nc">&nbsp;            if (isAero) {</b>
<b class="nc">&nbsp;                return 30;</b>
&nbsp;            }
<b class="nc">&nbsp;            if (isLargeCraft) {</b>
<b class="nc">&nbsp;                return 20;</b>
&nbsp;            }
<b class="nc">&nbsp;            return 8;</b>
<b class="nc">&nbsp;        } else if ((weatherConditions == WE_MOD_SNOW)</b>
&nbsp;                || (weatherConditions == WE_MOD_RAIN)) {
<b class="nc">&nbsp;            if (isMechVee || (isAero &amp;&amp; (en.getAltitude() &lt; 2))) {</b>
<b class="nc">&nbsp;                return 20;</b>
&nbsp;            }
<b class="nc">&nbsp;            if (isAero) {</b>
<b class="nc">&nbsp;                return 50;</b>
&nbsp;            }
<b class="nc">&nbsp;            if (isLargeCraft) {</b>
<b class="nc">&nbsp;                return 25;</b>
&nbsp;            }
<b class="nc">&nbsp;            return 10;</b>
<b class="nc">&nbsp;        } else if ((lightConditions &gt; L_DAY)</b>
&nbsp;                || (weatherConditions == WE_LIGHT_SNOW)
&nbsp;                || (weatherConditions == WE_LIGHT_RAIN)
&nbsp;                || (weatherConditions == WE_LIGHT_HAIL) 
&nbsp;                || (fog == FOG_LIGHT)) {
<b class="nc">&nbsp;            if (isMechVee || (isAero &amp;&amp; (en.getAltitude() &lt; 2))) {</b>
<b class="nc">&nbsp;                return 30;</b>
&nbsp;            }
<b class="nc">&nbsp;            if (isAero) {</b>
<b class="nc">&nbsp;                return 60;</b>
&nbsp;            }
<b class="nc">&nbsp;            if (isLargeCraft) {</b>
<b class="nc">&nbsp;                return 35;</b>
&nbsp;            }
<b class="nc">&nbsp;            return 15;</b>
&nbsp;        } else {
<b class="nc">&nbsp;            if (isMechVee || (isAero &amp;&amp; (en.getAltitude() &lt; 2))) {</b>
<b class="nc">&nbsp;                return 60;</b>
&nbsp;            }
<b class="nc">&nbsp;            if (isAero) {</b>
<b class="nc">&nbsp;                return 120;</b>
&nbsp;            }
<b class="nc">&nbsp;            if (isLargeCraft) {</b>
<b class="nc">&nbsp;                return 70;</b>
&nbsp;            }
<b class="nc">&nbsp;            return 30;</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    public int getDropRate() {
&nbsp;
&nbsp;        //atmospheric pressure mods
<b class="nc">&nbsp;        switch(atmosphere) {</b>
&nbsp;        case(ATMO_TRACE):
<b class="nc">&nbsp;            return 8;</b>
&nbsp;        case(ATMO_THIN):
<b class="nc">&nbsp;            return 5;</b>
&nbsp;        case(ATMO_HIGH):
<b class="nc">&nbsp;            return 2;</b>
&nbsp;        case(ATMO_VHIGH):
<b class="nc">&nbsp;            return 1;</b>
&nbsp;        default:
<b class="nc">&nbsp;            return 3;</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    public void setLight(int type) {
<b class="nc">&nbsp;        lightConditions = type;</b>
<b class="nc">&nbsp;    }</b>
&nbsp;
&nbsp;
&nbsp;    /** @return The time of day lighting conditions (one of PlanetaryConditions.L_*). */
&nbsp;    public int getLight() {
<b class="nc">&nbsp;        return lightConditions;</b>
&nbsp;    }
&nbsp;
&nbsp;    public void setWeather(int type) {
<b class="nc">&nbsp;        weatherConditions = type;</b>
<b class="nc">&nbsp;    }</b>
&nbsp;
&nbsp;    public int getWeather() {
<b class="nc">&nbsp;        return weatherConditions;</b>
&nbsp;    }
&nbsp;
&nbsp;    public void setWindStrength(int type) {
<b class="nc">&nbsp;        windStrength = type;</b>
<b class="nc">&nbsp;    }</b>
&nbsp;
&nbsp;    public int getWindStrength() {
<b class="nc">&nbsp;        return windStrength;</b>
&nbsp;    }
&nbsp;
&nbsp;    public void setWindDirection(int type) {
<b class="nc">&nbsp;        windDirection = type;</b>
<b class="nc">&nbsp;    }</b>
&nbsp;
&nbsp;    public int getWindDirection() {
<b class="nc">&nbsp;        return windDirection;</b>
&nbsp;    }
&nbsp;
&nbsp;    public void setShiftingWindDirection(boolean b) {
<b class="nc">&nbsp;        shiftWindDirection = b;</b>
<b class="nc">&nbsp;    }</b>
&nbsp;
&nbsp;    public boolean shiftingWindDirection() {
<b class="nc">&nbsp;        return shiftWindDirection;</b>
&nbsp;    }
&nbsp;
&nbsp;    public void setShiftingWindStrength(boolean b) {
<b class="nc">&nbsp;        shiftWindStrength = b;</b>
<b class="nc">&nbsp;    }</b>
&nbsp;
&nbsp;    public boolean shiftingWindStrength() {
<b class="nc">&nbsp;        return shiftWindStrength;</b>
&nbsp;    }
&nbsp;
&nbsp;    public void setAtmosphere(int a) {
<b class="nc">&nbsp;        atmosphere = a;</b>
<b class="nc">&nbsp;    }</b>
&nbsp;
&nbsp;    public int getAtmosphere() {
<b class="nc">&nbsp;        return atmosphere;</b>
&nbsp;    }
&nbsp;
&nbsp;    public void setTemperature(int tem) {
<b class="nc">&nbsp;        temperature = tem;</b>
<b class="nc">&nbsp;    }</b>
&nbsp;
&nbsp;    public int getTemperature() {
<b class="nc">&nbsp;        return temperature;</b>
&nbsp;    }
&nbsp;
&nbsp;    public boolean isVacuum() {
<b class="nc">&nbsp;        return (atmosphere == ATMO_VACUUM) || (atmosphere == ATMO_TRACE);</b>
&nbsp;    }
&nbsp;
&nbsp;    public void setGravity(float f) {
<b class="nc">&nbsp;        gravity = f;</b>
<b class="nc">&nbsp;    }</b>
&nbsp;
&nbsp;    public float getGravity() {
<b class="nc">&nbsp;        return gravity;</b>
&nbsp;    }
&nbsp;
&nbsp;    public void setEMI(boolean b) {
<b class="nc">&nbsp;        emi = b;</b>
<b class="nc">&nbsp;    }</b>
&nbsp;
&nbsp;    public boolean hasEMI() {
<b class="nc">&nbsp;        return emi;</b>
&nbsp;    }
&nbsp;
&nbsp;    public int getFog() {
<b class="nc">&nbsp;        return fog;</b>
&nbsp;    }
&nbsp;
&nbsp;    public void setFog(int fog) {
<b class="nc">&nbsp;        this.fog = fog;</b>
<b class="nc">&nbsp;    }</b>
&nbsp;
&nbsp;    public void setTerrainAffected(boolean b) {
<b class="nc">&nbsp;        terrainAffected = b;</b>
<b class="nc">&nbsp;    }</b>
&nbsp;
&nbsp;    //can weather alter the terrain (add snow, mud, etc.)
&nbsp;    public boolean isTerrainAffected() {
<b class="nc">&nbsp;        return terrainAffected;</b>
&nbsp;    }
&nbsp;
&nbsp;    public boolean isRecklessConditions() {
<b class="nc">&nbsp;        return (fog &gt; FOG_NONE) || (lightConditions &gt; L_DUSK);</b>
&nbsp;    }
&nbsp;
&nbsp;    public int getMaxWindStrength(){
<b class="nc">&nbsp;        return maxWindStrength;</b>
&nbsp;    }
&nbsp;
&nbsp;    public void setMaxWindStrength(int strength){
<b class="nc">&nbsp;        maxWindStrength = strength;</b>
<b class="nc">&nbsp;    }</b>
&nbsp;
&nbsp;    public int getMinWindStrength(){
<b class="nc">&nbsp;        return minWindStrength;</b>
&nbsp;    }
&nbsp;
&nbsp;    public void setMinWindStrength(int strength){
<b class="nc">&nbsp;        minWindStrength = strength;</b>
<b class="nc">&nbsp;    }</b>
&nbsp;
&nbsp;    public boolean isSandBlowing() {
<b class="nc">&nbsp;        return blowingSand;</b>
&nbsp;    }
&nbsp;
&nbsp;    public void setBlowingSand(boolean b) {
<b class="nc">&nbsp;        blowingSand = b;</b>
<b class="nc">&nbsp;    }</b>
&nbsp;
&nbsp;    public void alterConditions(PlanetaryConditions conditions) {
<b class="nc">&nbsp;        lightConditions = conditions.lightConditions;</b>
<b class="nc">&nbsp;        weatherConditions = conditions.weatherConditions;</b>
<b class="nc">&nbsp;        windStrength = conditions.windStrength;</b>
<b class="nc">&nbsp;        windDirection = conditions.windDirection;</b>
<b class="nc">&nbsp;        shiftWindDirection = conditions.shiftWindDirection;</b>
<b class="nc">&nbsp;        shiftWindStrength = conditions.shiftWindStrength;</b>
<b class="nc">&nbsp;        minWindStrength = conditions.minWindStrength;</b>
<b class="nc">&nbsp;        maxWindStrength = conditions.maxWindStrength;</b>
<b class="nc">&nbsp;        atmosphere = conditions.atmosphere;</b>
<b class="nc">&nbsp;        temperature = conditions.temperature;</b>
<b class="nc">&nbsp;        gravity = conditions.gravity;</b>
<b class="nc">&nbsp;        emi = conditions.emi;</b>
<b class="nc">&nbsp;        fog = conditions.fog;</b>
<b class="nc">&nbsp;        terrainAffected = conditions.terrainAffected;</b>
<b class="nc">&nbsp;        blowingSand = conditions.blowingSand;</b>
<b class="nc">&nbsp;        runOnce = conditions.runOnce;</b>
&nbsp;
<b class="nc">&nbsp;        if (!runOnce) {</b>
<b class="nc">&nbsp;            setTempFromWeather();</b>
<b class="nc">&nbsp;            setWindFromWeather();</b>
<b class="nc">&nbsp;            setSandStorm();</b>
<b class="nc">&nbsp;            runOnce = true;</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;    }</b>
&nbsp;
&nbsp;    private void setTempFromWeather() {
<b class="nc">&nbsp;        switch (weatherConditions) {</b>
&nbsp;            case WE_SLEET:
&nbsp;            case WE_LIGHT_SNOW:
<b class="nc">&nbsp;                temperature = -40;</b>
<b class="nc">&nbsp;                break;</b>
&nbsp;            case WE_MOD_SNOW:
&nbsp;            case WE_SNOW_FLURRIES:
&nbsp;            case WE_HEAVY_SNOW:
&nbsp;            case WE_BLIZZARD:
<b class="nc">&nbsp;                temperature = -50;</b>
<b class="nc">&nbsp;                break;</b>
&nbsp;            case WE_ICE_STORM:
<b class="nc">&nbsp;                temperature = -60;</b>
&nbsp;                break;
&nbsp;        }
<b class="nc">&nbsp;    }</b>
&nbsp;
&nbsp;    private void setWindFromWeather() {
<b class="nc">&nbsp;        switch (weatherConditions) {</b>
&nbsp;            case WE_SLEET:
<b class="nc">&nbsp;                setSleet(true);</b>
<b class="nc">&nbsp;                break;</b>
&nbsp;            case WE_ICE_STORM:
&nbsp;            case WE_SNOW_FLURRIES:
<b class="nc">&nbsp;                windStrength = WI_MOD_GALE;</b>
<b class="nc">&nbsp;                shiftWindStrength = false;</b>
<b class="nc">&nbsp;                break;</b>
&nbsp;            case WE_GUSTING_RAIN:
&nbsp;            case WE_BLIZZARD:
<b class="nc">&nbsp;                windStrength = WI_STRONG_GALE;</b>
<b class="nc">&nbsp;                shiftWindStrength = false;</b>
&nbsp;                break;
&nbsp;        }
<b class="nc">&nbsp;    }</b>
&nbsp;
&nbsp;    public boolean isSleeting() {
<b class="nc">&nbsp;        return isSleeting;</b>
&nbsp;    }
&nbsp;
&nbsp;    public void setSleet(boolean sleet) {
<b class="nc">&nbsp;        isSleeting = sleet;</b>
<b class="nc">&nbsp;    }</b>
&nbsp;
&nbsp;    private void doSleetCheck() {
<b class="nc">&nbsp;        if (isSleeting &amp;&amp; windStrength &lt; WI_MOD_GALE) {</b>
<b class="nc">&nbsp;            setSleet(false);</b>
<b class="nc">&nbsp;            weatherConditions = WE_NONE;</b>
<b class="nc">&nbsp;            oldWeatherConditions = WE_SLEET;</b>
<b class="nc">&nbsp;            oldTemperature = temperature;</b>
<b class="nc">&nbsp;            temperature = 25;</b>
&nbsp;        }
<b class="nc">&nbsp;        if (isSleeting() &amp;&amp; windStrength &gt; WI_MOD_GALE) {</b>
<b class="nc">&nbsp;            shiftWindStrength = false;</b>
<b class="nc">&nbsp;            windStrength = WI_MOD_GALE;</b>
&nbsp;        }
<b class="nc">&nbsp;        if ((oldWeatherConditions == WE_SLEET)</b>
&nbsp;                &amp;&amp; (windStrength == WI_MOD_GALE)
<b class="nc">&nbsp;                &amp;&amp; !isSleeting() ) {</b>
<b class="nc">&nbsp;            setSleet(true);</b>
<b class="nc">&nbsp;            temperature = oldTemperature;</b>
<b class="nc">&nbsp;            oldWeatherConditions = WE_NONE;</b>
<b class="nc">&nbsp;            oldTemperature = 25;</b>
<b class="nc">&nbsp;            weatherConditions = WE_SLEET;</b>
&nbsp;        }
<b class="nc">&nbsp;    }</b>
&nbsp;
&nbsp;    private void setSandStorm() {
<b class="nc">&nbsp;        if (blowingSand &amp;&amp; windStrength &lt; WI_MOD_GALE) {</b>
<b class="nc">&nbsp;            windStrength = WI_MOD_GALE;</b>
<b class="nc">&nbsp;            sandStorm = true;</b>
&nbsp;        }
<b class="nc">&nbsp;    }</b>
&nbsp;
&nbsp;    private void doSandStormCheck() {
<b class="nc">&nbsp;        if (blowingSand &amp;&amp; windStrength &lt; WI_MOD_GALE) {</b>
<b class="nc">&nbsp;            sandStorm = blowingSand;</b>
<b class="nc">&nbsp;            blowingSand = false;</b>
&nbsp;        }
<b class="nc">&nbsp;        if (sandStorm &amp;&amp; windStrength &gt; WI_LIGHT_GALE) {</b>
<b class="nc">&nbsp;            sandStorm = blowingSand;</b>
<b class="nc">&nbsp;            blowingSand = true;</b>
&nbsp;        }
<b class="nc">&nbsp;    }</b>
&nbsp;
&nbsp;    public void setRunOnce(boolean run) {
<b class="nc">&nbsp;        runOnce = run;</b>
<b class="nc">&nbsp;    }</b>
&nbsp;}
</code>
</pre>
</div>

<script type="text/javascript">
(function() {
    var msie = false, msie9 = false;
    /*@cc_on
      msie = true;
      @if (@_jscript_version >= 9)
        msie9 = true;
      @end
    @*/

    if (!msie || msie && msie9) {
      hljs.highlightAll()
      hljs.initLineNumbersOnLoad();
    }
})();
</script>

<div class="footer">
    
    <div style="float:right;">generated on 2023-05-16 16:28</div>
</div>
</body>
</html>
