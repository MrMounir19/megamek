


<!DOCTYPE html>
<html id="htmlId">
<head>
  <title>Coverage Report > ITechnology</title>
  <style type="text/css">
    @import "../../css/coverage.css";
    @import "../../css/idea.min.css";
  </style>
  <script type="text/javascript" src="../../js/highlight.min.js"></script>
  <script type="text/javascript" src="../../js/highlightjs-line-numbers.min.js"></script>
</head>

<body>
<div class="content">
<div class="breadCrumbs">
Current scope:     <a href="../../index.html">all classes</a>
    <span class="separator">|</span>
    <a href="../index.html">megamek.common</a>
</div>

<h1>Coverage Summary for Class: ITechnology (megamek.common)</h1>

<table class="coverageStats">
<tr>
  <th class="name">Class</th>
<th class="coverageStat 
">
  Class, %
</th>
<th class="coverageStat 
">
  Method, %
</th>
<th class="coverageStat 
">
  Line, %
</th>
</tr>
<tr>
  <td class="name">ITechnology</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (1/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    28.9%
  </span>
  <span class="absValue">
    (13/45)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    20.3%
  </span>
  <span class="absValue">
    (29/143)
  </span>
</td>
</tr>

</table>

<br/>
<br/>


<pre>
<code class="sourceCode" id="sourceCode">&nbsp;/*
&nbsp;* MegaMek -
&nbsp;* Copyright (C) 2017 The MegaMek Team
&nbsp;*
&nbsp;* This program is free software; you can redistribute it and/or modify it under
&nbsp;* the terms of the GNU General Public License as published by the Free Software
&nbsp;* Foundation; either version 2 of the License, or (at your option) any later
&nbsp;* version.
&nbsp;*
&nbsp;* This program is distributed in the hope that it will be useful, but WITHOUT
&nbsp;* ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS
&nbsp;* FOR A PARTICULAR PURPOSE. See the GNU General Public License for more
&nbsp;* details.
&nbsp;*/
&nbsp;
&nbsp;package megamek.common;
&nbsp;
&nbsp;/**
&nbsp; * Implemented by any class that is subject to tech advancement (entities, equipment, systems, etc.)
&nbsp; *
&nbsp; * @author Neoancient
&nbsp; *
&nbsp; */
&nbsp;public interface ITechnology {
&nbsp;
&nbsp;    public static final int TECH_BASE_ALL  = 0;
&nbsp;    public static final int TECH_BASE_IS   = 1;
&nbsp;    public static final int TECH_BASE_CLAN = 2;
&nbsp;
&nbsp;    public static final int RATING_A = 0;
&nbsp;    public static final int RATING_B = 1;
&nbsp;    public static final int RATING_C = 2;
&nbsp;    public static final int RATING_D = 3;
&nbsp;    public static final int RATING_E = 4;
&nbsp;    public static final int RATING_F = 5;
&nbsp;    public static final int RATING_FSTAR = 6; // Increasing F (Clan equipmment for IS or extinct equipment
&nbsp;                                              // during SW era has a 50% chance of being X, denoted by F*.
&nbsp;    public static final int RATING_X = 7;
&nbsp;
<b class="fc">&nbsp;    public static final String[] ratingNames = { &quot;A&quot;, &quot;B&quot;, &quot;C&quot;, &quot;D&quot;, &quot;E&quot;, &quot;F&quot;, &quot;F*&quot;,</b>
&nbsp;    &quot;X&quot; };
&nbsp;
&nbsp;    public static final int ERA_SL   = 0;
&nbsp;    public static final int ERA_SW   = 1;
&nbsp;    public static final int ERA_CLAN = 2;
&nbsp;    public static final int ERA_DA   = 3;
&nbsp;    public static final int ERA_NUM  = 4;
&nbsp;
&nbsp;    public static final int DATE_NONE = -1;
&nbsp;    public static final int DATE_PS = 1950;
&nbsp;    public static final int DATE_ES = 2100;
&nbsp;
&nbsp;    //codes for recording which factions had access to technology at various points
&nbsp;    public static final int F_NONE = -1; // Indicates that factions should be ignored when calculating tech level.
&nbsp;    public static final int F_IS = 0;
&nbsp;    public static final int F_CC = 1;
&nbsp;    public static final int F_CF = 2;
&nbsp;    public static final int F_CP = 3;
&nbsp;    public static final int F_CS = 4;
&nbsp;    public static final int F_DC = 5;
&nbsp;    public static final int F_EI = 6;
&nbsp;    public static final int F_FC = 7;
&nbsp;    public static final int F_FR = 8;
&nbsp;    public static final int F_FS = 9;
&nbsp;    public static final int F_FW = 10;
&nbsp;    public static final int F_LC = 11;
&nbsp;    public static final int F_MC = 12;
&nbsp;    public static final int F_MH = 13;
&nbsp;    public static final int F_OA = 14;
&nbsp;    public static final int F_TA = 15;
&nbsp;    public static final int F_TC = 16;
&nbsp;    public static final int F_TH = 17;
&nbsp;    public static final int F_RD = 18;
&nbsp;    public static final int F_RS = 19;
&nbsp;    public static final int F_RA = 20;
&nbsp;    public static final int F_RW = 21;
&nbsp;    public static final int F_WB = 22;
&nbsp;    public static final int F_MERC = 23;
&nbsp;    public static final int F_PER = 24;
&nbsp;    public static final int F_CLAN = 25;
&nbsp;    public static final int F_CBR = 26;
&nbsp;    public static final int F_CBS = 27;
&nbsp;    public static final int F_CCY = 28;
&nbsp;    public static final int F_CCC = 29;
&nbsp;    public static final int F_CFM = 30;
&nbsp;    public static final int F_CGB = 31;
&nbsp;    public static final int F_CGS = 32;
&nbsp;    public static final int F_CHH = 33;
&nbsp;    public static final int F_CIH = 34;
&nbsp;    public static final int F_CJF = 35;
&nbsp;    public static final int F_CMN = 36;
&nbsp;    public static final int F_CNC = 37;
&nbsp;    public static final int F_CSF = 38;
&nbsp;    public static final int F_CSJ = 39;
&nbsp;    public static final int F_CSR = 40;
&nbsp;    public static final int F_CSV = 41;
&nbsp;    public static final int F_CSA = 42;
&nbsp;    public static final int F_CWM = 43;
&nbsp;    public static final int F_CWF = 44;
&nbsp;    public static final int F_CWX = 45;
&nbsp;    public static final int F_CWV = 46;
&nbsp;
&nbsp;    //display codes using values from IOps
<b class="fc">&nbsp;    public static final String[] IO_FACTION_CODES = {</b>
&nbsp;            &quot;IS&quot;, &quot;CC&quot;, &quot;CF&quot;, &quot;CP&quot;, &quot;CS&quot;, &quot;DC&quot;, &quot;EI&quot;, &quot;FC&quot;, &quot;FR&quot;, &quot;FS&quot;, &quot;FW&quot;, &quot;LC&quot;, &quot;MC&quot;,
&nbsp;            &quot;MH&quot;, &quot;OA&quot;, &quot;TA&quot;, &quot;TC&quot;, &quot;TH&quot;, &quot;RD&quot;, &quot;RS&quot;, &quot;RA&quot;, &quot;RW&quot;, &quot;WB&quot;, &quot;Merc&quot;, &quot;Per&quot;,
&nbsp;            &quot;Clan&quot;, &quot;CBR&quot;, &quot;CBS&quot;, &quot;CCY&quot;, &quot;CCC&quot;, &quot;CFM&quot;, &quot;CGB&quot;, &quot;CGS&quot;, &quot;CHH&quot;, &quot;CIH&quot;, &quot;CJF&quot;, &quot;CMN&quot;,
&nbsp;            &quot;CNC&quot;, &quot;CSF&quot;, &quot;CSJ&quot;, &quot;CSR&quot;, &quot;CSV&quot;, &quot;CSA&quot;, &quot;CWM&quot;, &quot;CWF&quot;, &quot;CWX&quot;, &quot;CWV&quot;
&nbsp;    };
&nbsp;
&nbsp;    //faction lookup names for MHQ
<b class="fc">&nbsp;    public static final String[] MM_FACTION_CODES = {</b>
&nbsp;            &quot;IS&quot;, &quot;CC&quot;, &quot;CIR&quot;, &quot;CDP&quot;, &quot;CS&quot;, &quot;DC&quot;, &quot;CEI&quot;, &quot;FC&quot;, &quot;FRR&quot;, &quot;FS&quot;, &quot;FWL&quot;, &quot;LA&quot;, &quot;MOC&quot;,
&nbsp;            &quot;MH&quot;, &quot;OA&quot;, &quot;TA&quot;, &quot;TC&quot;, &quot;TH&quot;, &quot;RD&quot;, &quot;ROS&quot;, &quot;RA&quot;, &quot;RWR&quot;, &quot;WOB&quot;, &quot;MERC&quot;, &quot;Periphery&quot;,
&nbsp;            &quot;CLAN&quot;, &quot;CB&quot;, &quot;CBS&quot;, &quot;CCO&quot;, &quot;CCC&quot;, &quot;CFM&quot;, &quot;CGB&quot;, &quot;CGS&quot;, &quot;CHH&quot;, &quot;CIH&quot;, &quot;CJF&quot;, &quot;CMG&quot;,
&nbsp;            &quot;CNC&quot;, &quot;CDS&quot;, &quot;CSJ&quot;, &quot;CSR&quot;, &quot;CSV&quot;, &quot;CSA&quot;, &quot;CWI&quot;, &quot;CW&quot;, &quot;CWIE&quot;, &quot;CWOV&quot;,
&nbsp;    };
&nbsp;
&nbsp;    boolean isClan();
&nbsp;    boolean isMixedTech();
&nbsp;    int getTechBase();
&nbsp;
&nbsp;    int getIntroductionDate();
&nbsp;    int getPrototypeDate();
&nbsp;    int getProductionDate();
&nbsp;    int getCommonDate();
&nbsp;    int getExtinctionDate();
&nbsp;    int getReintroductionDate();
&nbsp;
&nbsp;    int getTechRating();
&nbsp;    int getBaseAvailability(int era);
&nbsp;
&nbsp;    default int getIntroductionDate(boolean clan) {
<b class="nc">&nbsp;        return getIntroductionDate();</b>
&nbsp;    }
&nbsp;    int getIntroductionDate(boolean clan, int faction);
&nbsp;    default int getPrototypeDate(boolean clan) {
<b class="nc">&nbsp;        return getPrototypeDate();</b>
&nbsp;    }
&nbsp;    int getPrototypeDate(boolean clan, int faction);
&nbsp;    default int getProductionDate(boolean clan) {
<b class="nc">&nbsp;        return getProductionDate();</b>
&nbsp;    }
&nbsp;    int getProductionDate(boolean clan, int faction);
&nbsp;    default int getCommonDate(boolean clan) {
<b class="fc">&nbsp;        return getCommonDate();</b>
&nbsp;    }
&nbsp;    int getExtinctionDate(boolean clan, int faction);
&nbsp;    default int getExtinctionDate(boolean clan) {
<b class="nc">&nbsp;        return getExtinctionDate();</b>
&nbsp;    }
&nbsp;    int getReintroductionDate(boolean clan, int faction);
&nbsp;    default int getReintroductionDate(boolean clan) {
<b class="nc">&nbsp;        return getReintroductionDate();</b>
&nbsp;    }
&nbsp;
&nbsp;    public static int getTechEra(int year) {
<b class="fc">&nbsp;        if (year &lt; 2780) {</b>
<b class="fc">&nbsp;            return ERA_SL;</b>
<b class="fc">&nbsp;        } else if (year &lt; 3050) {</b>
<b class="fc">&nbsp;            return ERA_SW;</b>
<b class="nc">&nbsp;        } else if (year &lt; 3130) {</b>
<b class="nc">&nbsp;            return ERA_CLAN;</b>
&nbsp;        } else {
<b class="nc">&nbsp;            return ERA_DA;</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    default int getTechLevel(int year, boolean clan) {
<b class="fc">&nbsp;        return getSimpleLevel(year, clan).getCompoundTechLevel(clan);</b>
&nbsp;    }
&nbsp;
&nbsp;    default int getTechLevel(int year) {
<b class="fc">&nbsp;        return getTechLevel(year, isClan());</b>
&nbsp;    }
&nbsp;
&nbsp;    default SimpleTechLevel getSimpleLevel(int year) {
<b class="nc">&nbsp;        if (getSimpleLevel(year, true).compareTo(getSimpleLevel(year, false)) &lt; 0) {</b>
<b class="nc">&nbsp;            return getSimpleLevel(year, true);</b>
&nbsp;        }
<b class="nc">&nbsp;        return getSimpleLevel(year, false);</b>
&nbsp;    }
&nbsp;
&nbsp;    default SimpleTechLevel getSimpleLevel(int year, boolean clan) {
<b class="fc">&nbsp;        return getSimpleLevel(year, clan, F_NONE);</b>
&nbsp;    }
&nbsp;
&nbsp;    default SimpleTechLevel getSimpleLevel(int year, boolean clan, int faction) {
<b class="fc">&nbsp;        if (isUnofficial()) {</b>
<b class="nc">&nbsp;            return SimpleTechLevel.UNOFFICIAL;</b>
<b class="fc">&nbsp;        } else if (year &gt;= getCommonDate(clan) &amp;&amp; getCommonDate(clan) != DATE_NONE) {</b>
<b class="fc">&nbsp;            if (isIntroLevel()) {</b>
<b class="fc">&nbsp;                return SimpleTechLevel.INTRO;</b>
&nbsp;            } else {
<b class="fc">&nbsp;                return SimpleTechLevel.STANDARD;</b>
&nbsp;            }
<b class="fc">&nbsp;        } else if (year &gt;= getProductionDate(clan, faction) &amp;&amp; getProductionDate(clan, faction) != DATE_NONE) {</b>
<b class="fc">&nbsp;            return SimpleTechLevel.ADVANCED;</b>
<b class="nc">&nbsp;        } else if (year &gt;= getPrototypeDate(clan, faction) &amp;&amp; getPrototypeDate(clan, faction) != DATE_NONE) {</b>
<b class="nc">&nbsp;            return SimpleTechLevel.EXPERIMENTAL;</b>
&nbsp;        } else {
<b class="nc">&nbsp;            return SimpleTechLevel.UNOFFICIAL;</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * For non-era-based usage, provide a single tech level that does not vary with date.
&nbsp;     *
&nbsp;     * @return The base rules level of the equipment or unit.
&nbsp;     */
&nbsp;    SimpleTechLevel getStaticTechLevel();
&nbsp;
&nbsp;    default boolean isIntroLevel() {
<b class="fc">&nbsp;        return getStaticTechLevel() == SimpleTechLevel.INTRO;</b>
&nbsp;    }
&nbsp;
&nbsp;    default boolean isUnofficial() {
<b class="fc">&nbsp;        return getStaticTechLevel() == SimpleTechLevel.UNOFFICIAL;</b>
&nbsp;    }
&nbsp;
&nbsp;
&nbsp;    /**
&nbsp;     * Finds the lowest rules level the equipment qualifies for, for either IS or Clan faction
&nbsp;     * using it.
&nbsp;     *
&nbsp;     * @param clan - whether tech level is being calculated for a Clan faction
&nbsp;     * @return - the lowest tech level available to the item
&nbsp;     */
&nbsp;    default SimpleTechLevel findMinimumRulesLevel(boolean clan) {
<b class="nc">&nbsp;        if (getCommonDate(clan) != DATE_NONE) {</b>
<b class="nc">&nbsp;            return (getStaticTechLevel() == SimpleTechLevel.INTRO)?</b>
<b class="nc">&nbsp;                    SimpleTechLevel.INTRO : SimpleTechLevel.STANDARD;</b>
&nbsp;        }
<b class="nc">&nbsp;        if (getProductionDate(clan) != DATE_NONE) {</b>
<b class="nc">&nbsp;            return SimpleTechLevel.ADVANCED;</b>
&nbsp;        }
<b class="nc">&nbsp;        if (getPrototypeDate(clan) != DATE_NONE) {</b>
<b class="nc">&nbsp;            return SimpleTechLevel.EXPERIMENTAL;</b>
&nbsp;        }
<b class="nc">&nbsp;        return SimpleTechLevel.UNOFFICIAL;</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Finds the lowest rules level the equipment qualifies for regardless of faction using it.
&nbsp;     *
&nbsp;     * @return - the lowest tech level available to the item
&nbsp;     */
&nbsp;    default SimpleTechLevel findMinimumRulesLevel() {
<b class="nc">&nbsp;        if (getCommonDate() != DATE_NONE) {</b>
<b class="nc">&nbsp;            return (getStaticTechLevel() == SimpleTechLevel.INTRO)?</b>
<b class="nc">&nbsp;                    SimpleTechLevel.INTRO : SimpleTechLevel.STANDARD;</b>
&nbsp;        }
<b class="nc">&nbsp;        if (getProductionDate() != DATE_NONE) {</b>
<b class="nc">&nbsp;            return SimpleTechLevel.ADVANCED;</b>
&nbsp;        }
<b class="nc">&nbsp;        if (getPrototypeDate() != DATE_NONE) {</b>
<b class="nc">&nbsp;            return SimpleTechLevel.EXPERIMENTAL;</b>
&nbsp;        }
<b class="nc">&nbsp;        return SimpleTechLevel.UNOFFICIAL;</b>
&nbsp;    }
&nbsp;
&nbsp;    default boolean isExtinct(int year, boolean clan) {
<b class="fc">&nbsp;        return getExtinctionDate(clan) != DATE_NONE</b>
<b class="nc">&nbsp;                &amp;&amp; getExtinctionDate(clan) &lt; year</b>
<b class="nc">&nbsp;                &amp;&amp; (getReintroductionDate(clan) == DATE_NONE</b>
<b class="nc">&nbsp;                || year &lt; getReintroductionDate(clan));</b>
&nbsp;    }
&nbsp;
&nbsp;    default boolean isExtinct(int year, boolean clan, int faction) {
&nbsp;        // Tech that is lost but later recovered in the IS is not lost to ComStar.
<b class="nc">&nbsp;        if ((F_CS == faction) &amp;&amp; (getReintroductionDate(false) != DATE_NONE)) {</b>
<b class="nc">&nbsp;            return false;</b>
&nbsp;        }
<b class="nc">&nbsp;        return getExtinctionDate(clan) != DATE_NONE</b>
<b class="nc">&nbsp;                &amp;&amp; getExtinctionDate(clan) &lt; year</b>
<b class="nc">&nbsp;                &amp;&amp; (getReintroductionDate(clan) == DATE_NONE</b>
<b class="nc">&nbsp;                || year &lt; getReintroductionDate(clan, faction));</b>
&nbsp;    }
&nbsp;
&nbsp;    default boolean isExtinct(int year) {
<b class="nc">&nbsp;        return getExtinctionDate() != DATE_NONE</b>
<b class="nc">&nbsp;                &amp;&amp; getExtinctionDate() &lt; year</b>
<b class="nc">&nbsp;                &amp;&amp; (getReintroductionDate() == DATE_NONE</b>
<b class="nc">&nbsp;                || year &lt; getReintroductionDate());</b>
&nbsp;    }
&nbsp;
&nbsp;    default boolean isAvailableIn(int year, boolean clan) {
<b class="fc">&nbsp;        return year &gt;= getIntroductionDate(clan) &amp;&amp; getIntroductionDate(clan) != DATE_NONE  &amp;&amp; !isExtinct(year, clan);</b>
&nbsp;    }
&nbsp;
&nbsp;    default boolean isAvailableIn(int year) {
<b class="nc">&nbsp;        return year &gt;= getIntroductionDate() &amp;&amp; getIntroductionDate() != DATE_NONE &amp;&amp; !isExtinct(year);</b>
&nbsp;    }
&nbsp;
&nbsp;    default boolean isAvailableIn(int year, boolean clan, int faction) {
<b class="nc">&nbsp;        return year &gt;= getIntroductionDate(clan, faction)</b>
<b class="nc">&nbsp;                &amp;&amp; getIntroductionDate(clan, faction) != DATE_NONE  &amp;&amp; !isExtinct(year, clan, faction);</b>
&nbsp;    }
&nbsp;
&nbsp;    default boolean isLegal(int year, int techLevel, boolean mixedTech) {
<b class="fc">&nbsp;        return isLegal(year, SimpleTechLevel.convertCompoundToSimple(techLevel),</b>
<b class="fc">&nbsp;                TechConstants.isClan(techLevel), mixedTech);</b>
&nbsp;    }
&nbsp;
&nbsp;    default boolean isLegal(int year, SimpleTechLevel simpleRulesLevel, boolean clanBase, boolean mixedTech) {
<b class="fc">&nbsp;        if (mixedTech) {</b>
<b class="nc">&nbsp;            if (!isAvailableIn(year)) {</b>
<b class="nc">&nbsp;                return false;</b>
&nbsp;            } else {
<b class="nc">&nbsp;                return getSimpleLevel(year).ordinal() &lt;= simpleRulesLevel.ordinal();</b>
&nbsp;            }
&nbsp;        } else {
<b class="fc">&nbsp;            if (getTechBase() != TECH_BASE_ALL</b>
<b class="fc">&nbsp;                    &amp;&amp; clanBase != isClan()) {</b>
<b class="nc">&nbsp;                return false;</b>
&nbsp;            }
<b class="fc">&nbsp;            if (!isAvailableIn(year, clanBase)) {</b>
<b class="nc">&nbsp;                return false;</b>
&nbsp;            }
<b class="fc">&nbsp;            return getSimpleLevel(year, clanBase).ordinal() &lt;= simpleRulesLevel.ordinal();</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Adjusts availability for certain combinations of era and IS/Clan use
&nbsp;     * @param era - one of the four tech eras
&nbsp;     * @param clanUse - whether the faction trying to obtain the tech is IS or Clan
&nbsp;     * @return - the adjusted availability code
&nbsp;     */
&nbsp;    default int calcEraAvailability(int era, boolean clanUse) {
<b class="nc">&nbsp;        if (clanUse) {</b>
<b class="nc">&nbsp;            if (!isClan()</b>
&nbsp;                    &amp;&amp; era &lt; ERA_CLAN
<b class="nc">&nbsp;                    &amp;&amp; getPrototypeDate(false) &gt;= 2780) {</b>
<b class="nc">&nbsp;                return ITechnology.RATING_X;</b>
&nbsp;            } else {
<b class="nc">&nbsp;                return getBaseAvailability(era);</b>
&nbsp;            }
&nbsp;        } else {
<b class="nc">&nbsp;            if (isClan()) {</b>
<b class="nc">&nbsp;                if (era &lt; ERA_CLAN) {</b>
<b class="nc">&nbsp;                    return ITechnology.RATING_X;</b>
&nbsp;                } else {
<b class="nc">&nbsp;                    return Math.min(ITechnology.RATING_X, getBaseAvailability(era) + 1);</b>
&nbsp;                }
&nbsp;            } else {
<b class="nc">&nbsp;                return getBaseAvailability(era);</b>
&nbsp;            }
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    default int calcYearAvailability(int year, boolean clanUse) {
<b class="nc">&nbsp;        return calcYearAvailability(year, clanUse, -1);</b>
&nbsp;    }
&nbsp;
&nbsp;    default int calcYearAvailability(int year, boolean clanUse, int faction) {
<b class="nc">&nbsp;        if (!clanUse &amp;&amp; !isClan() &amp;&amp; (faction != F_CS) &amp;&amp; (getTechEra(year) == ERA_SW)</b>
<b class="nc">&nbsp;                &amp;&amp; (getBaseAvailability(ERA_SW) &gt;= RATING_E)</b>
<b class="nc">&nbsp;                &amp;&amp; (getExtinctionDate(false) != DATE_NONE)</b>
<b class="nc">&nbsp;                &amp;&amp; (getExtinctionDate(false) &lt;= year)</b>
<b class="nc">&nbsp;                &amp;&amp; ((getReintroductionDate(false) == DATE_NONE)</b>
<b class="nc">&nbsp;                        || (getReintroductionDate() &gt; year))) {</b>
<b class="nc">&nbsp;            return Math.min(getBaseAvailability(ERA_SW) + 1, RATING_X);</b>
&nbsp;        }
<b class="nc">&nbsp;        return calcEraAvailability(getTechEra(year), clanUse);</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Adjusts base availability code for IS/Clan and IS extinction
&nbsp;     *
&nbsp;     * @param era - one of the ERA_* constants from EquipmentType
&nbsp;     * @param clanUse - whether this should be calculated for a Clan faction rather than IS
&nbsp;     * @return - The availability code for the faction in the era. The code for an IS faction
&nbsp;     *           during the SW era may be two values indicating availability before and after
&nbsp;     *           the extinction date.
&nbsp;     */
&nbsp;    default String getEraAvailabilityName(int era, boolean clanUse) {
<b class="nc">&nbsp;        if (!clanUse &amp;&amp; !isClan() &amp;&amp; era == ERA_SW</b>
<b class="nc">&nbsp;                &amp;&amp; getBaseAvailability(ERA_SW) &gt;= RATING_E</b>
<b class="nc">&nbsp;                &amp;&amp; getBaseAvailability(ERA_SW) &lt; RATING_X</b>
<b class="nc">&nbsp;                &amp;&amp; getExtinctionDate(false) != DATE_NONE</b>
<b class="nc">&nbsp;                &amp;&amp; getTechEra(getExtinctionDate(false)) == ERA_SW) {</b>
<b class="nc">&nbsp;            return getRatingName(getBaseAvailability(ERA_SW))</b>
<b class="nc">&nbsp;                    + &quot;(&quot; + getRatingName(getBaseAvailability(ERA_SW) + 1) + &quot;)&quot;;</b>
&nbsp;        }
<b class="nc">&nbsp;        return getRatingName(calcEraAvailability(era, clanUse));</b>
&nbsp;    }
&nbsp;
&nbsp;    default String getTechRatingName() {
<b class="nc">&nbsp;        return getRatingName(getTechRating());</b>
&nbsp;    }
&nbsp;
&nbsp;    default String getEraAvailabilityName(int era) {
<b class="nc">&nbsp;        return getEraAvailabilityName(era, isClan());</b>
&nbsp;    }
&nbsp;
&nbsp;    default String getFullRatingName(boolean clanUse) {
<b class="nc">&nbsp;        String rating = getRatingName(getTechRating());</b>
<b class="nc">&nbsp;        rating += &quot;/&quot;;</b>
<b class="nc">&nbsp;        rating += getEraAvailabilityName(ERA_SL, clanUse);</b>
<b class="nc">&nbsp;        rating += &quot;-&quot;;</b>
<b class="nc">&nbsp;        rating += getEraAvailabilityName(ERA_SW, clanUse);</b>
<b class="nc">&nbsp;        rating += &quot;-&quot;;</b>
<b class="nc">&nbsp;        rating += getEraAvailabilityName(ERA_CLAN, clanUse);</b>
<b class="nc">&nbsp;        rating += &quot;-&quot;;</b>
<b class="nc">&nbsp;        rating += getEraAvailabilityName(ERA_DA, clanUse);</b>
<b class="nc">&nbsp;        return rating;</b>
&nbsp;    }
&nbsp;
&nbsp;    default String getFullRatingName() {
<b class="nc">&nbsp;        return getFullRatingName(isClan());</b>
&nbsp;    }
&nbsp;
&nbsp;    default int calcEraAvailability(int era) {
<b class="nc">&nbsp;        return calcEraAvailability(era, isClan());</b>
&nbsp;    }
&nbsp;
&nbsp;    default int calcYearAvailability(int year) {
<b class="nc">&nbsp;        return calcYearAvailability(year, isClan());</b>
&nbsp;    }
&nbsp;
&nbsp;    public static String getRatingName(int rating) {
<b class="nc">&nbsp;        if ((rating &lt; 0) || (rating &gt;= ratingNames.length)) {</b>
<b class="nc">&nbsp;            return &quot;U&quot;;</b>
&nbsp;        }
<b class="nc">&nbsp;        return ratingNames[rating];</b>
&nbsp;    }
&nbsp;
&nbsp;    public static String getDateRange(int startIncl, int endNonIncl) {
<b class="nc">&nbsp;        if (startIncl == DATE_NONE) {</b>
<b class="nc">&nbsp;            return &quot;-&quot;;</b>
&nbsp;        }
<b class="nc">&nbsp;        StringBuilder sb = new StringBuilder();</b>
<b class="nc">&nbsp;        sb.append(startIncl);</b>
<b class="nc">&nbsp;        if (endNonIncl == DATE_NONE) {</b>
<b class="nc">&nbsp;            sb.append(&quot;+&quot;);</b>
<b class="nc">&nbsp;        } else if (endNonIncl &gt; startIncl + 1) {</b>
<b class="nc">&nbsp;            sb.append(&quot;-&quot;).append(endNonIncl - 1);</b>
&nbsp;        }
<b class="nc">&nbsp;        return sb.toString();</b>
&nbsp;    }
&nbsp;
&nbsp;    default String getExperimentalRange(boolean clan) {
<b class="nc">&nbsp;        return getDateRange(getPrototypeDate(clan), getProductionDate(clan));</b>
&nbsp;    }
&nbsp;    default String getAdvancedRange(boolean clan) {
<b class="nc">&nbsp;        return getDateRange(getProductionDate(clan), getCommonDate(clan));</b>
&nbsp;    }
&nbsp;    default String getStandardRange(boolean clan) {
<b class="nc">&nbsp;        return getDateRange(getCommonDate(clan), DATE_NONE);</b>
&nbsp;    }
&nbsp;    default String getExtinctionRange(boolean clan) {
<b class="nc">&nbsp;        return getDateRange(getExtinctionDate(clan), getReintroductionDate(clan));</b>
&nbsp;    }
&nbsp;
&nbsp;    default String getExperimentalRange() {
<b class="nc">&nbsp;        return getDateRange(getPrototypeDate(), getProductionDate());</b>
&nbsp;    }
&nbsp;    default String getAdvancedRange() {
<b class="nc">&nbsp;        return getDateRange(getProductionDate(), getCommonDate());</b>
&nbsp;    }
&nbsp;    default String getStandardRange() {
<b class="nc">&nbsp;        return getDateRange(getCommonDate(), DATE_NONE);</b>
&nbsp;    }
&nbsp;    default String getExtinctionRange() {
<b class="nc">&nbsp;        return getDateRange(getExtinctionDate(), getReintroductionDate());</b>
&nbsp;    }
&nbsp;}
</code>
</pre>
</div>

<script type="text/javascript">
(function() {
    var msie = false, msie9 = false;
    /*@cc_on
      msie = true;
      @if (@_jscript_version >= 9)
        msie9 = true;
      @end
    @*/

    if (!msie || msie && msie9) {
      hljs.highlightAll()
      hljs.initLineNumbersOnLoad();
    }
})();
</script>

<div class="footer">
    
    <div style="float:right;">generated on 2023-05-16 16:28</div>
</div>
</body>
</html>
