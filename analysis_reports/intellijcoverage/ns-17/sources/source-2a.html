


<!DOCTYPE html>
<html id="htmlId">
<head>
  <title>Coverage Report > Engine</title>
  <style type="text/css">
    @import "../../css/coverage.css";
    @import "../../css/idea.min.css";
  </style>
  <script type="text/javascript" src="../../js/highlight.min.js"></script>
  <script type="text/javascript" src="../../js/highlightjs-line-numbers.min.js"></script>
</head>

<body>
<div class="content">
<div class="breadCrumbs">
Current scope:     <a href="../../index.html">all classes</a>
    <span class="separator">|</span>
    <a href="../index.html">megamek.common</a>
</div>

<h1>Coverage Summary for Class: Engine (megamek.common)</h1>

<table class="coverageStats">
<tr>
  <th class="name">Class</th>
<th class="coverageStat 
">
  Class, %
</th>
<th class="coverageStat 
">
  Method, %
</th>
<th class="coverageStat 
">
  Line, %
</th>
</tr>
<tr>
  <td class="name">Engine</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (1/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    42.6%
  </span>
  <span class="absValue">
    (23/54)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    39.7%
  </span>
  <span class="absValue">
    (257/647)
  </span>
</td>
</tr>

</table>

<br/>
<br/>


<pre>
<code class="sourceCode" id="sourceCode">&nbsp;/*
&nbsp; * MegaMek -
&nbsp; * Copyright (C) 2000,2001,2002,2003,2004,2005 Ben Mazur (bmazur@sev.org)
&nbsp; *
&nbsp; *  This program is free software; you can redistribute it and/or modify it
&nbsp; *  under the terms of the GNU General Public License as published by the Free
&nbsp; *  Software Foundation; either version 2 of the License, or (at your option)
&nbsp; *  any later version.
&nbsp; *
&nbsp; *  This program is distributed in the hope that it will be useful, but
&nbsp; *  WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY
&nbsp; *  or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License
&nbsp; *  for more details.
&nbsp; */
&nbsp;
&nbsp;/*
&nbsp; * Author: Reinhard Vicinus
&nbsp; */
&nbsp;
&nbsp;package megamek.common;
&nbsp;
&nbsp;import java.io.Serializable;
&nbsp;
&nbsp;/**
&nbsp; * This class represents an engine, such as those driving mechs.
&nbsp; */
&nbsp;public class Engine implements Serializable, ITechnology {
&nbsp;    /**
&nbsp;     *
&nbsp;     */
&nbsp;    private static final long serialVersionUID = -246032529363109609L;
&nbsp;
<b class="fc">&nbsp;    public static final double[] ENGINE_RATINGS = { 0.0, 0.25, 0.5, 0.5,</b>
&nbsp;            0.5, 0.5, 1.0, 1.0, 1.0, 1.0, 1.5, 1.5, 1.5, 2.0, 2.0,
&nbsp;            2.0, 2.5, 2.5, 3.0, 3.0, 3.0, 3.5, 3.5, 4.0, 4.0, 4.0,
&nbsp;            4.5, 4.5, 5.0, 5.0, 5.5, 5.5, 6.0, 6.0, 6.0, 7.0, 7.0,
&nbsp;            7.5, 7.5, 8.0, 8.5,
&nbsp;
&nbsp;            8.5, 9.0, 9.5, 10.0, 10.0, 10.5, 11.0, 11.5, 12.0, 12.5,
&nbsp;            13.0, 13.5, 14.0, 14.5, 15.5, 16.0, 16.5, 17.5, 18.0,
&nbsp;            19.0, 19.5, 20.5, 21.5, 22.5, 23.5, 24.5, 25.5, 27.0,
&nbsp;            28.5, 29.5, 31.5, 33.0, 34.5, 36.5, 38.5, 41.0, 43.5,
&nbsp;            46.0, 49.0, 52.5,
&nbsp;
&nbsp;            56.5, 61.0, 66.5, 72.5, 79.5, 87.5, 97.0, 107.5, 119.5,
&nbsp;            133.5, 150.0, 168.5, 190.0, 214.5, 243.0, 275.5, 313.0,
&nbsp;            356.0, 405.5, 462.5 };
&nbsp;    
&nbsp;  
&nbsp;    // flags
&nbsp;    public static final int CLAN_ENGINE = 0x1;
&nbsp;    public static final int TANK_ENGINE = 0x2;
&nbsp;    public static final int LARGE_ENGINE = 0x4;
&nbsp;    public static final int SUPERHEAVY_ENGINE = 0x8;
&nbsp;    public static final int SUPPORT_VEE_ENGINE = 0x10;
&nbsp;
&nbsp;    // types
&nbsp;    public static final int COMBUSTION_ENGINE = 0;
&nbsp;    public static final int NORMAL_ENGINE = 1;
&nbsp;    public static final int XL_ENGINE = 2;
&nbsp;    public static final int XXL_ENGINE = 3;
&nbsp;    public static final int FUEL_CELL = 4;
&nbsp;    public static final int LIGHT_ENGINE = 5;
&nbsp;    public static final int COMPACT_ENGINE = 6;
&nbsp;    public static final int FISSION = 7;
&nbsp;    public static final int NONE = 8;
&nbsp;    public static final int MAGLEV = 9;
&nbsp;    public static final int STEAM = 10;
&nbsp;    public static final int BATTERY = 11;
&nbsp;    public static final int SOLAR = 12;
&nbsp;    public static final int EXTERNAL = 13;
&nbsp;    private static final int NUM_ENGINE_TYPES = 14;
&nbsp;
&nbsp;    /** Keys for retrieving engine name from {@link Messages} */
<b class="fc">&nbsp;    private static final String[] TYPE_KEYS = {</b>
&nbsp;            &quot;ICE&quot;, &quot;Fusion&quot;, &quot;XL&quot;, &quot;XXL&quot;, &quot;FuelCell&quot;, &quot;Light&quot;, &quot;Compact&quot;, &quot;Fission&quot;, &quot;None&quot;,
&nbsp;            &quot;MagLev&quot;, &quot;Steam&quot;, &quot;Battery&quot;, &quot;Solar&quot;, &quot;External&quot;
&nbsp;    };
&nbsp;    
&nbsp;    //These are the SUPPORT VEHICLE ENGINE WEIGHT MULTIPLIERS from TM PG 127
&nbsp;    //The other engine types are assumed to have a value of ) in the array
&nbsp;    //if not listed.
<b class="fc">&nbsp;    private static final double[][] SV_ENGINE_RATINGS = new double[NUM_ENGINE_TYPES][6];</b>
&nbsp;    static { 
<b class="fc">&nbsp;        SV_ENGINE_RATINGS[STEAM][EquipmentType.RATING_A] = 4.0;</b>
<b class="fc">&nbsp;        SV_ENGINE_RATINGS[STEAM][EquipmentType.RATING_B] = 3.5;</b>
<b class="fc">&nbsp;        SV_ENGINE_RATINGS[STEAM][EquipmentType.RATING_C] = 3.0;</b>
<b class="fc">&nbsp;        SV_ENGINE_RATINGS[STEAM][EquipmentType.RATING_D] = 2.8;</b>
<b class="fc">&nbsp;        SV_ENGINE_RATINGS[STEAM][EquipmentType.RATING_E] = 2.6;</b>
<b class="fc">&nbsp;        SV_ENGINE_RATINGS[STEAM][EquipmentType.RATING_F] = 2.5;</b>
&nbsp;        
<b class="fc">&nbsp;        SV_ENGINE_RATINGS[COMBUSTION_ENGINE][EquipmentType.RATING_A] = 0.0;</b>
<b class="fc">&nbsp;        SV_ENGINE_RATINGS[COMBUSTION_ENGINE][EquipmentType.RATING_B] = 3.0;</b>
<b class="fc">&nbsp;        SV_ENGINE_RATINGS[COMBUSTION_ENGINE][EquipmentType.RATING_C] = 2.0;</b>
<b class="fc">&nbsp;        SV_ENGINE_RATINGS[COMBUSTION_ENGINE][EquipmentType.RATING_D] = 1.5;</b>
<b class="fc">&nbsp;        SV_ENGINE_RATINGS[COMBUSTION_ENGINE][EquipmentType.RATING_E] = 1.3;</b>
<b class="fc">&nbsp;        SV_ENGINE_RATINGS[COMBUSTION_ENGINE][EquipmentType.RATING_F] = 1.0;</b>
&nbsp;        
<b class="fc">&nbsp;        SV_ENGINE_RATINGS[BATTERY][EquipmentType.RATING_A] = 0.0;</b>
<b class="fc">&nbsp;        SV_ENGINE_RATINGS[BATTERY][EquipmentType.RATING_B] = 0.0;</b>
<b class="fc">&nbsp;        SV_ENGINE_RATINGS[BATTERY][EquipmentType.RATING_C] = 1.5;</b>
<b class="fc">&nbsp;        SV_ENGINE_RATINGS[BATTERY][EquipmentType.RATING_D] = 1.2;</b>
<b class="fc">&nbsp;        SV_ENGINE_RATINGS[BATTERY][EquipmentType.RATING_E] = 1.0;</b>
<b class="fc">&nbsp;        SV_ENGINE_RATINGS[BATTERY][EquipmentType.RATING_F] = 0.8;</b>
&nbsp;        
<b class="fc">&nbsp;        SV_ENGINE_RATINGS[FUEL_CELL][EquipmentType.RATING_A] = 0.0;</b>
<b class="fc">&nbsp;        SV_ENGINE_RATINGS[FUEL_CELL][EquipmentType.RATING_B] = 0.0;</b>
<b class="fc">&nbsp;        SV_ENGINE_RATINGS[FUEL_CELL][EquipmentType.RATING_C] = 1.2;</b>
<b class="fc">&nbsp;        SV_ENGINE_RATINGS[FUEL_CELL][EquipmentType.RATING_D] = 1.0;</b>
<b class="fc">&nbsp;        SV_ENGINE_RATINGS[FUEL_CELL][EquipmentType.RATING_E] = 0.9;</b>
<b class="fc">&nbsp;        SV_ENGINE_RATINGS[FUEL_CELL][EquipmentType.RATING_F] = 0.7;</b>
&nbsp;        
<b class="fc">&nbsp;        SV_ENGINE_RATINGS[SOLAR][EquipmentType.RATING_A] = 0.0;</b>
<b class="fc">&nbsp;        SV_ENGINE_RATINGS[SOLAR][EquipmentType.RATING_B] = 0.0;</b>
<b class="fc">&nbsp;        SV_ENGINE_RATINGS[SOLAR][EquipmentType.RATING_C] = 5.0;</b>
<b class="fc">&nbsp;        SV_ENGINE_RATINGS[SOLAR][EquipmentType.RATING_D] = 4.5;</b>
<b class="fc">&nbsp;        SV_ENGINE_RATINGS[SOLAR][EquipmentType.RATING_E] = 4.0;</b>
<b class="fc">&nbsp;        SV_ENGINE_RATINGS[SOLAR][EquipmentType.RATING_F] = 3.5;</b>
&nbsp;        
<b class="fc">&nbsp;        SV_ENGINE_RATINGS[FISSION][EquipmentType.RATING_A] = 0.0;</b>
<b class="fc">&nbsp;        SV_ENGINE_RATINGS[FISSION][EquipmentType.RATING_B] = 0.0;</b>
<b class="fc">&nbsp;        SV_ENGINE_RATINGS[FISSION][EquipmentType.RATING_C] = 1.75;</b>
<b class="fc">&nbsp;        SV_ENGINE_RATINGS[FISSION][EquipmentType.RATING_D] = 1.5;</b>
<b class="fc">&nbsp;        SV_ENGINE_RATINGS[FISSION][EquipmentType.RATING_E] = 1.4;</b>
<b class="fc">&nbsp;        SV_ENGINE_RATINGS[FISSION][EquipmentType.RATING_F] = 1.3;</b>
&nbsp;
<b class="fc">&nbsp;        SV_ENGINE_RATINGS[NORMAL_ENGINE][EquipmentType.RATING_A] = 0.0;</b>
<b class="fc">&nbsp;        SV_ENGINE_RATINGS[NORMAL_ENGINE][EquipmentType.RATING_B] = 0.0;</b>
<b class="fc">&nbsp;        SV_ENGINE_RATINGS[NORMAL_ENGINE][EquipmentType.RATING_C] = 1.5;</b>
<b class="fc">&nbsp;        SV_ENGINE_RATINGS[NORMAL_ENGINE][EquipmentType.RATING_D] = 1.0;</b>
<b class="fc">&nbsp;        SV_ENGINE_RATINGS[NORMAL_ENGINE][EquipmentType.RATING_E] = 0.75;</b>
<b class="fc">&nbsp;        SV_ENGINE_RATINGS[NORMAL_ENGINE][EquipmentType.RATING_F] = 0.5;</b>
&nbsp;
<b class="fc">&nbsp;        SV_ENGINE_RATINGS[NONE][EquipmentType.RATING_A] = 0.0;</b>
<b class="fc">&nbsp;        SV_ENGINE_RATINGS[NONE][EquipmentType.RATING_B] = 0.0;</b>
<b class="fc">&nbsp;        SV_ENGINE_RATINGS[NONE][EquipmentType.RATING_C] = 0.0;</b>
<b class="fc">&nbsp;        SV_ENGINE_RATINGS[NONE][EquipmentType.RATING_D] = 0.0;</b>
<b class="fc">&nbsp;        SV_ENGINE_RATINGS[NONE][EquipmentType.RATING_E] = 0.0;</b>
<b class="fc">&nbsp;        SV_ENGINE_RATINGS[NONE][EquipmentType.RATING_F] = 0.0;</b>
&nbsp;
<b class="fc">&nbsp;        SV_ENGINE_RATINGS[EXTERNAL][EquipmentType.RATING_A] = 0.0;</b>
<b class="fc">&nbsp;        SV_ENGINE_RATINGS[EXTERNAL][EquipmentType.RATING_B] = 1.4;</b>
<b class="fc">&nbsp;        SV_ENGINE_RATINGS[EXTERNAL][EquipmentType.RATING_C] = 1.0;</b>
<b class="fc">&nbsp;        SV_ENGINE_RATINGS[EXTERNAL][EquipmentType.RATING_D] = 0.8;</b>
<b class="fc">&nbsp;        SV_ENGINE_RATINGS[EXTERNAL][EquipmentType.RATING_E] = 0.7;</b>
<b class="fc">&nbsp;        SV_ENGINE_RATINGS[EXTERNAL][EquipmentType.RATING_F] = 0.6;</b>
&nbsp;    }
&nbsp;
&nbsp;    public boolean engineValid;
&nbsp;    private int engineRating;
&nbsp;    private int engineType;
&nbsp;    private int engineFlags;
<b class="fc">&nbsp;    private int baseChassisHeatSinks = -1;</b>
<b class="fc">&nbsp;    public StringBuffer problem = new StringBuffer(&quot;Illegal engine: &quot;);</b>
&nbsp;
&nbsp;    /**
&nbsp;     * The constructor takes the rating of the engine, the type of engine and
&nbsp;     * any flags. Engine ratings are divided by the weight of the mech to get
&nbsp;     * they walk MP.
&nbsp;     *
&nbsp;     * @param engineRating the rating of the engine
&nbsp;     * @param engineType the type of the engine, either combustion or a type of
&nbsp;     *            fusion engine.
&nbsp;     * @param engineFlags Wether the engine is a tank engine, a clan engine, or
&nbsp;     *            large engine, or any combination of those.
&nbsp;     */
<b class="fc">&nbsp;    public Engine(int engineRating, int engineType, int engineFlags) {</b>
<b class="fc">&nbsp;        engineValid = true;</b>
<b class="fc">&nbsp;        this.engineRating = engineRating;</b>
<b class="fc">&nbsp;        this.engineType = engineType;</b>
<b class="fc">&nbsp;        this.engineFlags = engineFlags;</b>
&nbsp;
<b class="fc">&nbsp;        if (!isValidEngine()) {</b>
<b class="nc">&nbsp;            engineValid = false;</b>
<b class="nc">&nbsp;            this.engineRating = 0;</b>
<b class="nc">&nbsp;            this.engineType = -1;</b>
<b class="nc">&nbsp;            this.engineFlags = -1;</b>
&nbsp;        }
<b class="fc">&nbsp;    }</b>
&nbsp;
&nbsp;    /**
&nbsp;     * returns true if the engine has the flag set, false otherwise
&nbsp;     *
&nbsp;     * @param flag the flag to check for.
&nbsp;     * @return true if the flag is set.
&nbsp;     */
&nbsp;    public boolean hasFlag(int flag) {
<b class="fc">&nbsp;        return (engineFlags &amp; flag) != 0;</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Sanity checks the engine, no negative ratings, and similar checks.
&nbsp;     *
&nbsp;     * @return true if the engine is useable.
&nbsp;     */
&nbsp;    private boolean isValidEngine() {
<b class="fc">&nbsp;        if (hasFlag(~(CLAN_ENGINE | TANK_ENGINE | LARGE_ENGINE</b>
&nbsp;                | SUPERHEAVY_ENGINE | SUPPORT_VEE_ENGINE))) {
<b class="nc">&nbsp;            problem.append(&quot;Flags:&quot;).append(engineFlags);</b>
<b class="nc">&nbsp;            return false;</b>
&nbsp;        }
&nbsp;        
<b class="fc">&nbsp;        if (hasFlag(SUPPORT_VEE_ENGINE) &amp;&amp; (engineType != STEAM)</b>
&nbsp;                &amp;&amp; (engineType != COMBUSTION_ENGINE) &amp;&amp; (engineType != BATTERY)
&nbsp;                &amp;&amp; (engineType != FUEL_CELL) &amp;&amp; (engineType != SOLAR)
&nbsp;                &amp;&amp; (engineType != FISSION) &amp;&amp; (engineType != NORMAL_ENGINE)
&nbsp;                &amp;&amp; (engineType != MAGLEV) &amp;&amp; (engineType != NONE)
&nbsp;                &amp;&amp; (engineType != EXTERNAL)) {
<b class="nc">&nbsp;            problem.append(&quot;Invalid Engine type for support vehicle engines!&quot;);</b>
<b class="nc">&nbsp;            return false;</b>
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        if ((((int) Math.ceil(engineRating / 5) &gt; ENGINE_RATINGS.length)</b>
<b class="nc">&nbsp;                || (engineRating &lt; 0)) &amp;&amp; !hasFlag(SUPPORT_VEE_ENGINE)) {</b>
<b class="nc">&nbsp;            problem.append(&quot;Rating:&quot;).append(engineRating);</b>
<b class="nc">&nbsp;            return false;</b>
&nbsp;        }
<b class="fc">&nbsp;        if ((engineRating &gt; 400) &amp;&amp; !hasFlag(SUPPORT_VEE_ENGINE)) {</b>
<b class="nc">&nbsp;            engineFlags |= LARGE_ENGINE;</b>
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        switch (engineType) {</b>
&nbsp;            case COMBUSTION_ENGINE:
&nbsp;            case NORMAL_ENGINE:
&nbsp;            case XL_ENGINE:
&nbsp;            case XXL_ENGINE:
&nbsp;            case FUEL_CELL:
&nbsp;            case NONE:
&nbsp;            case MAGLEV:
&nbsp;            case BATTERY:
&nbsp;            case SOLAR:
&nbsp;            case STEAM:
&nbsp;            case EXTERNAL:
<b class="fc">&nbsp;                break;</b>
&nbsp;            case COMPACT_ENGINE:
<b class="nc">&nbsp;                if (hasFlag(LARGE_ENGINE)) {</b>
<b class="nc">&nbsp;                    problem.append(Messages</b>
<b class="nc">&nbsp;                            .getString(&quot;Engine.invalidCompactLarge&quot;));</b>
<b class="nc">&nbsp;                    return false;</b>
&nbsp;                }
&nbsp;                break;
&nbsp;            case LIGHT_ENGINE:
&nbsp;            case FISSION:
<b class="nc">&nbsp;                if (hasFlag(CLAN_ENGINE)) {</b>
<b class="nc">&nbsp;                    problem.append(Messages</b>
<b class="nc">&nbsp;                            .getString(&quot;Engine.invalidSphereOnly&quot;));</b>
<b class="nc">&nbsp;                    return false;</b>
&nbsp;                }
&nbsp;                break;
&nbsp;            default:
<b class="nc">&nbsp;                problem.append(&quot;Type:&quot;).append(engineType);</b>
<b class="nc">&nbsp;                return false;</b>
&nbsp;        }
&nbsp;
<b class="fc">&nbsp;        return true;</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Parses a string to find the engine type.
&nbsp;     *
&nbsp;     * @param type the string to parse
&nbsp;     * @return the type of the engine.
&nbsp;     */
&nbsp;    public static int getEngineTypeByString(String type) {
<b class="fc">&nbsp;        if (type.toLowerCase().contains(&quot;xxl&quot;)) {</b>
<b class="nc">&nbsp;            return XXL_ENGINE;</b>
<b class="fc">&nbsp;        } else if (type.toLowerCase().contains(&quot;xl&quot;)) {</b>
<b class="fc">&nbsp;            return XL_ENGINE;</b>
<b class="fc">&nbsp;        } else if (type.toLowerCase().contains(&quot;light&quot;)) {</b>
<b class="nc">&nbsp;            return LIGHT_ENGINE;</b>
<b class="fc">&nbsp;        } else if (type.toLowerCase().contains(&quot;compact&quot;)) {</b>
<b class="nc">&nbsp;            return COMPACT_ENGINE;</b>
<b class="fc">&nbsp;        } else if (type.toLowerCase().contains(&quot;ice&quot;)) {</b>
<b class="nc">&nbsp;            return COMBUSTION_ENGINE;</b>
<b class="fc">&nbsp;        } else if (type.toLowerCase().contains(&quot;i.c.e.&quot;)) {</b>
<b class="nc">&nbsp;            return COMBUSTION_ENGINE;</b>
<b class="fc">&nbsp;        } else if (type.toLowerCase().contains(&quot;fission&quot;)) {</b>
<b class="nc">&nbsp;            return FISSION;</b>
<b class="fc">&nbsp;        } else if (type.toLowerCase().contains(&quot;fuel cell&quot;)) {</b>
<b class="nc">&nbsp;            return FUEL_CELL;</b>
<b class="fc">&nbsp;        } else if (type.toLowerCase().contains(&quot;fuel-cell&quot;)) {</b>
<b class="nc">&nbsp;            return FUEL_CELL;</b>
<b class="fc">&nbsp;        } else if (type.toLowerCase().contains(&quot;none&quot;)) {</b>
<b class="nc">&nbsp;            return NONE;</b>
<b class="fc">&nbsp;        } else if (type.toLowerCase().contains(&quot;maglev&quot;)) {</b>
<b class="nc">&nbsp;            return MAGLEV;</b>
<b class="fc">&nbsp;        } else if (type.toLowerCase().contains(&quot;steam&quot;)) {</b>
<b class="nc">&nbsp;            return STEAM;</b>
<b class="fc">&nbsp;        } else if (type.toLowerCase().contains(&quot;battery&quot;)) {</b>
<b class="nc">&nbsp;            return BATTERY;</b>
<b class="fc">&nbsp;        } else if (type.toLowerCase().contains(&quot;solar&quot;)) {</b>
<b class="nc">&nbsp;            return SOLAR;</b>
&nbsp;        } else {
<b class="fc">&nbsp;            return NORMAL_ENGINE;</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * returns true if and only if this engine is a fusion engine
&nbsp;     *
&nbsp;     * @return true if it is not an internal combustion engine.
&nbsp;     */
&nbsp;    public boolean isFusion() {
<b class="fc">&nbsp;        return (engineType != COMBUSTION_ENGINE) &amp;&amp; (engineType != FISSION) &amp;&amp; (engineType != FUEL_CELL)</b>
&nbsp;                &amp;&amp; (engineType != NONE) &amp;&amp; (engineType != BATTERY) &amp;&amp; (engineType != SOLAR)
&nbsp;                &amp;&amp; (engineType != STEAM) &amp;&amp; (engineType != MAGLEV) &amp;&amp; (engineType != EXTERNAL);
&nbsp;    }
&nbsp; 
&nbsp;
&nbsp;    /**
&nbsp;     * Returns the weight of the engine in tons, rounded to the next highest half
&nbsp;     * ton.
&nbsp;     *
&nbsp;     * @return the weight of the engine.
&nbsp;     */
&nbsp;    public double getWeightEngine(Entity entity) {
<b class="fc">&nbsp;        return getWeightEngine(entity, RoundWeight.STANDARD);</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Returns the weight of the engine, rounded by roundWeight.
&nbsp;     *
&nbsp;     * @param roundWeight One of the rounding factors given in
&nbsp;     *            {@link megamek.common.verifier.TestEntity}.
&nbsp;     * @return the weight of the engine in tons.
&nbsp;     */
&nbsp;    public double getWeightEngine(Entity entity, RoundWeight roundWeight) {
&nbsp;        // Support Vehicles compute engine weight differently
<b class="fc">&nbsp;        if ((entity.isSupportVehicle() || hasFlag(SUPPORT_VEE_ENGINE))</b>
<b class="nc">&nbsp;                &amp;&amp; isValidEngine()) {</b>
<b class="nc">&nbsp;            int mp = entity.getOriginalWalkMP();</b>
<b class="nc">&nbsp;            if (entity.getMovementMode().equals(EntityMovementMode.RAIL)</b>
<b class="nc">&nbsp;                    || entity.getMovementMode().equals(EntityMovementMode.MAGLEV)) {</b>
<b class="nc">&nbsp;                mp = Math.max(0, mp - 2);</b>
&nbsp;            }
<b class="nc">&nbsp;            double movementFactor = 4 + mp * mp;</b>
<b class="nc">&nbsp;            double engineWeightMult = SV_ENGINE_RATINGS[engineType][entity</b>
<b class="nc">&nbsp;                    .getEngineTechRating()];</b>
<b class="nc">&nbsp;            double weight = entity.getBaseEngineValue() * movementFactor</b>
<b class="nc">&nbsp;                    * engineWeightMult * entity.getWeight();</b>
&nbsp;            // Fusion engines have a minimum weight of 0.25t at D+ and 0.5t at C. Fission engines have
&nbsp;            // a minimum of 0.5t at all tech ratings.
<b class="nc">&nbsp;            if ((engineType == NORMAL_ENGINE) &amp;&amp; (entity.getEngineTechRating() &gt;= RATING_D)) {</b>
<b class="nc">&nbsp;                weight = Math.max(weight, 0.25);</b>
<b class="nc">&nbsp;            } else if ((engineType == NORMAL_ENGINE) || (engineType == FISSION)) {</b>
<b class="nc">&nbsp;                weight = Math.max(weight, 0.5);</b>
&nbsp;            }
&nbsp;            // Hovercraft have a minimum engine weight of 20% of the vehicle.
<b class="nc">&nbsp;            if (entity.getMovementMode().equals(EntityMovementMode.HOVER)) {</b>
<b class="nc">&nbsp;                weight = Math.max(weight, entity.getWeight() * 0.2);</b>
&nbsp;            }
<b class="nc">&nbsp;            return roundWeight.round(weight, entity);</b>
&nbsp;        }
&nbsp;        // Protomech engines with rating &lt; 40 use a special calculation
<b class="fc">&nbsp;        if (entity.hasETypeFlag(Entity.ETYPE_PROTOMECH) &amp;&amp; (engineRating &lt; 40)) {</b>
<b class="fc">&nbsp;            return roundWeight.round(engineRating * 0.025, entity);</b>
&nbsp;        }
<b class="fc">&nbsp;        double weight = ENGINE_RATINGS[(int) Math.ceil(engineRating / 5.0)];</b>
<b class="fc">&nbsp;        switch (engineType) {</b>
&nbsp;            case COMBUSTION_ENGINE:
<b class="nc">&nbsp;                weight *= 2.0;</b>
<b class="nc">&nbsp;                break;</b>
&nbsp;            case NORMAL_ENGINE:
<b class="fc">&nbsp;                break;</b>
&nbsp;            case XL_ENGINE:
<b class="nc">&nbsp;                weight *= 0.5;</b>
<b class="nc">&nbsp;                break;</b>
&nbsp;            case LIGHT_ENGINE:
<b class="nc">&nbsp;                weight *= 0.75;</b>
<b class="nc">&nbsp;                break;</b>
&nbsp;            case XXL_ENGINE:
<b class="nc">&nbsp;                weight /= 3;</b>
<b class="nc">&nbsp;                break;</b>
&nbsp;            case COMPACT_ENGINE:
<b class="nc">&nbsp;                weight *= 1.5;</b>
<b class="nc">&nbsp;                break;</b>
&nbsp;            case FISSION:
<b class="nc">&nbsp;                weight *= 1.75;</b>
<b class="nc">&nbsp;                weight = Math.max(5, weight);</b>
<b class="nc">&nbsp;                break;</b>
&nbsp;            case FUEL_CELL:
<b class="nc">&nbsp;                weight *= 1.2;</b>
<b class="nc">&nbsp;                break;</b>
&nbsp;            case NONE:
<b class="nc">&nbsp;                return 0;</b>
&nbsp;        }
<b class="fc">&nbsp;        weight = roundWeight.round(weight, entity);</b>
&nbsp;
<b class="fc">&nbsp;        if (hasFlag(TANK_ENGINE) &amp;&amp; (isFusion() || (engineType == FISSION))) {</b>
<b class="nc">&nbsp;            weight *= 1.5;</b>
&nbsp;        }
&nbsp;        
&nbsp;        
<b class="fc">&nbsp;        double toReturn = roundWeight.round(weight, entity);</b>
&nbsp;        // hover have a minimum weight of 20%
<b class="fc">&nbsp;        if ((entity.getMovementMode() == EntityMovementMode.HOVER) &amp;&amp; (entity instanceof Tank)) {</b>
<b class="nc">&nbsp;            toReturn = Math.max(roundWeight.round(entity.getWeight() / 5.0, entity), toReturn);</b>
&nbsp;        }
<b class="fc">&nbsp;        return toReturn;</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * @return the number of heatsinks that fit weight-free into the engine
&nbsp;     */
&nbsp;    public int getWeightFreeEngineHeatSinks() {
&nbsp;        // Support Vee engines never provide free heat-sinks, TM pg 133
<b class="nc">&nbsp;        if (hasFlag(SUPPORT_VEE_ENGINE)) {</b>
<b class="nc">&nbsp;            return 0;</b>
&nbsp;        }
<b class="nc">&nbsp;        if (isFusion()) {</b>
<b class="nc">&nbsp;            return 10;</b>
<b class="nc">&nbsp;        } else if (engineType == FISSION) {</b>
<b class="nc">&nbsp;            return 5;</b>
<b class="nc">&nbsp;        } else if (engineType == FUEL_CELL) {</b>
<b class="nc">&nbsp;            return 1;</b>
&nbsp;        } else {
<b class="nc">&nbsp;            return 0;</b>
&nbsp;        }
&nbsp;
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Returns the number of heat sinks which can be built into the engine and
&nbsp;     * therefore don&#39;t require a critical slot.
&nbsp;     *
&nbsp;     * @param compact Whether this engine uses compact heat sinks or not.
&nbsp;     *
&nbsp;     * @return the maximum number of heat sinks built into the engine.
&nbsp;     */
&nbsp;    public int integralHeatSinkCapacity(boolean compact) {
<b class="fc">&nbsp;        if (compact) {</b>
<b class="nc">&nbsp;            return (engineRating / 25) * 2;</b>
&nbsp;        }
&nbsp;        else {
<b class="fc">&nbsp;            return engineRating / 25;</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Get the name of this engine, this is the localized name used in displays.
&nbsp;     * The name of an Engine is based on its type.
&nbsp;     *
&nbsp;     * @return the engine name.
&nbsp;     */
&nbsp;    public String getShortEngineName() {
<b class="nc">&nbsp;        if (engineType &lt; TYPE_KEYS.length) {</b>
<b class="nc">&nbsp;            return String.format(&quot;%d%s&quot;, engineRating, Messages.getString(&quot;Engine.&quot; + TYPE_KEYS[engineType]));</b>
&nbsp;        } else {
<b class="nc">&nbsp;            return Messages.getString(&quot;Engine.invalid&quot;);</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * This returns a non-localized name of the engine, it&#39;s mostly used to
&nbsp;     * generate files.
&nbsp;     */
&nbsp;    // Don&#39;t localize the marked strings below since they are used in mech
&nbsp;    // file parsing.
&nbsp;    public String getEngineName() {
<b class="fc">&nbsp;        if (!isValidEngine()) {</b>
<b class="nc">&nbsp;            return Messages.getString(&quot;Engine.invalid&quot;);</b>
&nbsp;        }
<b class="fc">&nbsp;        StringBuilder sb = new StringBuilder();</b>
<b class="fc">&nbsp;        if (!hasFlag(SUPPORT_VEE_ENGINE)) {</b>
<b class="fc">&nbsp;            sb.append(engineRating);</b>
&nbsp;        }
<b class="fc">&nbsp;        if (hasFlag(LARGE_ENGINE)) {</b>
<b class="nc">&nbsp;            sb.append(Messages.getString(&quot;Engine.Large&quot;));</b>
&nbsp;        }
<b class="fc">&nbsp;        sb.append(Messages.getString(&quot;Engine.&quot; + TYPE_KEYS[engineType]));</b>
<b class="fc">&nbsp;        if (hasFlag(CLAN_ENGINE)) {</b>
<b class="nc">&nbsp;            sb.append(Messages.getString(&quot;Engine.Clan&quot;));</b>
&nbsp;        }
<b class="fc">&nbsp;        if (hasFlag(SUPPORT_VEE_ENGINE)) {</b>
<b class="nc">&nbsp;            sb.append(Messages.getString(&quot;Engine.SupportVehicle&quot;));</b>
<b class="fc">&nbsp;        } else if (hasFlag(TANK_ENGINE)) {</b>
<b class="nc">&nbsp;            sb.append(Messages.getString(&quot;Engine.Vehicle&quot;));</b>
&nbsp;        }
<b class="fc">&nbsp;        return sb.toString();</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * @return The rating of the engine
&nbsp;     */
&nbsp;    public int getRating() {
<b class="fc">&nbsp;        return engineRating;</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * @return The slots taken up by the engine in the center torso.
&nbsp;     */
&nbsp;    public int[] getCenterTorsoCriticalSlots(int gyroType) {
<b class="nc">&nbsp;        if (engineType == COMPACT_ENGINE) {</b>
&nbsp;            int[] slots;
<b class="nc">&nbsp;            if (hasFlag(SUPERHEAVY_ENGINE)) {</b>
<b class="nc">&nbsp;                slots = new int[]{ 0, 1 };</b>
&nbsp;            } else {
<b class="nc">&nbsp;                slots = new int[]{ 0, 1, 2 };</b>
&nbsp;            }
<b class="nc">&nbsp;            return slots;</b>
<b class="nc">&nbsp;        } else if (hasFlag(LARGE_ENGINE)) {</b>
<b class="nc">&nbsp;            if (gyroType == Mech.GYRO_COMPACT) {</b>
&nbsp;                int[] slots;
<b class="nc">&nbsp;                if (hasFlag(SUPERHEAVY_ENGINE)) {</b>
<b class="nc">&nbsp;                    slots = new int[]{ 0, 1, 2, 5 };</b>
&nbsp;                } else {
<b class="nc">&nbsp;                    slots = new int[]{ 0, 1, 2, 5, 6, 7, 8, 9 };</b>
&nbsp;                }
<b class="nc">&nbsp;                return slots;</b>
&nbsp;            }
&nbsp;            int[] slots;
<b class="nc">&nbsp;            if (hasFlag(SUPERHEAVY_ENGINE)) {</b>
<b class="nc">&nbsp;                slots = new int[]{ 0, 1, 2, 5 };</b>
&nbsp;            } else {
<b class="nc">&nbsp;                slots = new int[]{ 0, 1, 2, 7, 8, 9, 10, 11 };</b>
&nbsp;            }
<b class="nc">&nbsp;            return slots;</b>
&nbsp;        } else {
<b class="nc">&nbsp;            if (gyroType == Mech.GYRO_COMPACT) {</b>
&nbsp;                int[] slots;
<b class="nc">&nbsp;                if (hasFlag(SUPERHEAVY_ENGINE)) {</b>
<b class="nc">&nbsp;                    slots = new int[]{ 0, 1, 2 };</b>
&nbsp;                } else {
<b class="nc">&nbsp;                    slots = new int[]{ 0, 1, 2, 5, 6, 7 };</b>
&nbsp;                }
<b class="nc">&nbsp;                return slots;</b>
<b class="nc">&nbsp;            } else if (gyroType == Mech.GYRO_XL) {</b>
&nbsp;                int[] slots;
<b class="nc">&nbsp;                if (hasFlag(SUPERHEAVY_ENGINE)) {</b>
<b class="nc">&nbsp;                    slots = new int[]{ 0, 1, 2 };</b>
&nbsp;                } else {
<b class="nc">&nbsp;                    slots = new int[]{ 0, 1, 2, 9, 10, 11 };</b>
&nbsp;                }
<b class="nc">&nbsp;                return slots;</b>
&nbsp;            } else {
&nbsp;                int[] slots;
<b class="nc">&nbsp;                if (hasFlag(SUPERHEAVY_ENGINE)) {</b>
<b class="nc">&nbsp;                    slots = new int[]{ 0, 1, 2 };</b>
&nbsp;                } else {
<b class="nc">&nbsp;                    slots = new int[]{ 0, 1, 2, 7, 8, 9 };</b>
&nbsp;                }
<b class="nc">&nbsp;                return slots;</b>
&nbsp;            }
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * @return the engine criticals in the side torsos.
&nbsp;     */
&nbsp;    public int[] getSideTorsoCriticalSlots() {
<b class="nc">&nbsp;        if ((engineType == LIGHT_ENGINE)</b>
<b class="nc">&nbsp;                || ((engineType == XL_ENGINE) &amp;&amp; hasFlag(CLAN_ENGINE))) {</b>
&nbsp;            int[] slots;
<b class="nc">&nbsp;            if (hasFlag(SUPERHEAVY_ENGINE)) {</b>
<b class="nc">&nbsp;                slots = new int[]{ 0 };</b>
&nbsp;            } else {
<b class="nc">&nbsp;                slots = new int[]{ 0, 1 };</b>
&nbsp;            }
<b class="nc">&nbsp;            return slots;</b>
<b class="nc">&nbsp;        } else if (engineType == XL_ENGINE) {</b>
&nbsp;            int[] slots;
<b class="nc">&nbsp;            if (hasFlag(SUPERHEAVY_ENGINE)) {</b>
<b class="nc">&nbsp;                slots = new int[]{ 0, 1 };</b>
&nbsp;            } else {
<b class="nc">&nbsp;                slots = new int[]{ 0, 1, 2 };</b>
&nbsp;            }
<b class="nc">&nbsp;            return slots;</b>
<b class="nc">&nbsp;        } else if ((engineType == XXL_ENGINE) &amp;&amp; hasFlag(CLAN_ENGINE)) {</b>
&nbsp;            int[] slots;
<b class="nc">&nbsp;            if (hasFlag(SUPERHEAVY_ENGINE)) {</b>
<b class="nc">&nbsp;                slots = new int[]{ 0, 1 };</b>
&nbsp;            } else {
<b class="nc">&nbsp;                slots = new int[]{ 0, 1, 2, 3 };</b>
&nbsp;            }
<b class="nc">&nbsp;            return slots;</b>
<b class="nc">&nbsp;        } else if (engineType == XXL_ENGINE) {</b>
&nbsp;            int[] slots;
<b class="nc">&nbsp;            if (hasFlag(SUPERHEAVY_ENGINE)) {</b>
<b class="nc">&nbsp;                slots = new int[]{ 0, 1, 2 };</b>
&nbsp;            } else {
<b class="nc">&nbsp;                slots = new int[]{ 0, 1, 2, 3, 4, 5 };</b>
&nbsp;            }
<b class="nc">&nbsp;            return slots;</b>
&nbsp;        } else {
<b class="nc">&nbsp;            return new int[]{};</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * @return the heat generated while the mech is standing still.
&nbsp;     */
&nbsp;    public int getStandingHeat() {
<b class="nc">&nbsp;        if (engineType == XXL_ENGINE) {</b>
<b class="nc">&nbsp;            return 2;</b>
&nbsp;        }
<b class="nc">&nbsp;        return 0;</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * @return the heat generated while the mech is walking.
&nbsp;     */
&nbsp;    public int getWalkHeat(Entity e) {
<b class="nc">&nbsp;        switch (engineType) {</b>
&nbsp;            case COMBUSTION_ENGINE:
&nbsp;            case FUEL_CELL:
<b class="nc">&nbsp;                return 0;</b>
&nbsp;            case XXL_ENGINE:
<b class="nc">&nbsp;                return 4;</b>
&nbsp;            default:
<b class="nc">&nbsp;                return 1;</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * @return the heat generated while the mech is running.
&nbsp;     */
&nbsp;    public int getRunHeat(Entity e) {
<b class="nc">&nbsp;        switch (engineType) {</b>
&nbsp;            case COMBUSTION_ENGINE:
&nbsp;            case FUEL_CELL:
<b class="nc">&nbsp;                return 0;</b>
&nbsp;            case XXL_ENGINE:
<b class="nc">&nbsp;                return 6;</b>
&nbsp;            default:
<b class="nc">&nbsp;                return 2;</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * @return the heat generated while the mech is sprinting.
&nbsp;     */
&nbsp;    public int getSprintHeat() {
<b class="nc">&nbsp;        switch (engineType) {</b>
&nbsp;            case COMBUSTION_ENGINE:
&nbsp;            case FUEL_CELL:
<b class="nc">&nbsp;                return 0;</b>
&nbsp;            case XXL_ENGINE:
<b class="nc">&nbsp;                return 9;</b>
&nbsp;            default:
<b class="nc">&nbsp;                return 3;</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * @return the heat generated while the mech is jumping.
&nbsp;     */
&nbsp;    public int getJumpHeat(int movedMP) {
<b class="nc">&nbsp;        if (engineType == XXL_ENGINE) {</b>
<b class="nc">&nbsp;            return Math.max(6, movedMP * 2);</b>
&nbsp;        }
<b class="nc">&nbsp;        return Math.max(3, movedMP);</b>
&nbsp;    }
&nbsp;
&nbsp;    public double getBVMultiplier() {
<b class="nc">&nbsp;        int sideCrits = getSideTorsoCriticalSlots().length;</b>
<b class="nc">&nbsp;        if (sideCrits &gt;= 6) {</b>
<b class="nc">&nbsp;            return 0.25; // IS XXL</b>
<b class="nc">&nbsp;        } else if (sideCrits &gt;= 3) {</b>
<b class="nc">&nbsp;            return 0.5; // IS XL, clan XXL, superheavy IS XXL, superheavy IS large XXL</b>
<b class="nc">&nbsp;        } else if (sideCrits &gt;= 2) {</b>
<b class="nc">&nbsp;            return 0.75; // IS light, clan XL, superheavy clan XXL, superheavy clan large XXL</b>
<b class="nc">&nbsp;        } else if (sideCrits &gt;= 1) {</b>
<b class="nc">&nbsp;            return 0.825; // superheavy IS Light, superheavy clan XL</b>
&nbsp;        } else {
<b class="nc">&nbsp;            return 1; // standard, compact, ice, fuel cell, fission</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    public int getBaseCost() {
<b class="nc">&nbsp;        int cost = 0;</b>
<b class="nc">&nbsp;        switch (engineType) {</b>
&nbsp;            case COMBUSTION_ENGINE:
<b class="nc">&nbsp;                cost = 1250;</b>
<b class="nc">&nbsp;                break;</b>
&nbsp;            case NORMAL_ENGINE:
<b class="nc">&nbsp;                cost = 5000;</b>
<b class="nc">&nbsp;                break;</b>
&nbsp;            case XL_ENGINE:
<b class="nc">&nbsp;                cost = 20000;</b>
<b class="nc">&nbsp;                break;</b>
&nbsp;            case XXL_ENGINE:
<b class="nc">&nbsp;                cost = 100000;</b>
<b class="nc">&nbsp;                break;</b>
&nbsp;            case COMPACT_ENGINE:
<b class="nc">&nbsp;                cost = 10000;</b>
<b class="nc">&nbsp;                break;</b>
&nbsp;            case LIGHT_ENGINE:
<b class="nc">&nbsp;                cost = 15000;</b>
<b class="nc">&nbsp;                break;</b>
&nbsp;            case FUEL_CELL:
<b class="nc">&nbsp;                cost = 3500;</b>
<b class="nc">&nbsp;                break;</b>
&nbsp;            case FISSION:
<b class="nc">&nbsp;                cost = 7500;</b>
<b class="nc">&nbsp;                break;</b>
&nbsp;            case NONE:
<b class="nc">&nbsp;                cost = 0;</b>
&nbsp;                break;
&nbsp;            }
<b class="nc">&nbsp;        if (hasFlag(LARGE_ENGINE)) {</b>
<b class="nc">&nbsp;            cost *= 2;</b>
&nbsp;        }
<b class="nc">&nbsp;        return cost;</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Values used for calculating the cost of a support vehicle engine. The engine cost in C-bills is
&nbsp;     * tonnage * 5,000 * type multiplier
&nbsp;     *
&nbsp;     * @param etype The engine type
&nbsp;     * @return      The type multiplier for cost
&nbsp;     */
&nbsp;    public static double getSVCostMultiplier(int etype) {
<b class="nc">&nbsp;        switch (etype) {</b>
&nbsp;            case STEAM:
<b class="nc">&nbsp;                return 0.8;</b>
&nbsp;            case BATTERY:
<b class="nc">&nbsp;                return 1.2;</b>
&nbsp;            case FUEL_CELL:
<b class="nc">&nbsp;                return 1.4;</b>
&nbsp;            case SOLAR:
<b class="nc">&nbsp;                return 1.6;</b>
&nbsp;            case MAGLEV:
<b class="nc">&nbsp;                return 2.5;</b>
&nbsp;            case FISSION:
<b class="nc">&nbsp;                return 3.0;</b>
&nbsp;            case NORMAL_ENGINE:
<b class="nc">&nbsp;                return 2.0;</b>
&nbsp;            case COMBUSTION_ENGINE:
&nbsp;            case EXTERNAL:
&nbsp;            default:
<b class="nc">&nbsp;                return 1.0;</b>
&nbsp;        }
&nbsp;    }
&nbsp;
<b class="fc">&nbsp;    private static final TechAdvancement STANDARD_FUSION_TA = new TechAdvancement(TECH_BASE_ALL)</b>
<b class="fc">&nbsp;            .setAdvancement(DATE_ES, DATE_ES, 2300).setApproximate(false, false, true)</b>
<b class="fc">&nbsp;            .setTechRating(RATING_D).setAvailability(RATING_C, RATING_E, RATING_D, RATING_D)</b>
<b class="fc">&nbsp;            .setStaticTechLevel(SimpleTechLevel.INTRO);</b>
&nbsp;    
<b class="fc">&nbsp;    private static final TechAdvancement LARGE_FUSION_TA = new TechAdvancement(TECH_BASE_ALL)</b>
<b class="fc">&nbsp;            .setAdvancement(2630, 3085, 3120).setApproximate(false, true, true)</b>
<b class="fc">&nbsp;            .setPrototypeFactions(F_TH).setProductionFactions(F_LC)</b>
<b class="fc">&nbsp;            .setTechRating(RATING_D).setAvailability(RATING_C, RATING_E, RATING_D, RATING_D)</b>
<b class="fc">&nbsp;            .setStaticTechLevel(SimpleTechLevel.EXPERIMENTAL);</b>
&nbsp;    
<b class="fc">&nbsp;    private static final TechAdvancement STANDARD_ICE_TA = new TechAdvancement(TECH_BASE_ALL)</b>
<b class="fc">&nbsp;            .setAdvancement(DATE_ES, DATE_ES, 2300).setApproximate(false, false, true)</b>
<b class="fc">&nbsp;            .setTechRating(RATING_C).setAvailability(RATING_A, RATING_A, RATING_A, RATING_A)</b>
<b class="fc">&nbsp;            .setStaticTechLevel(SimpleTechLevel.INTRO);</b>
&nbsp;    
<b class="fc">&nbsp;    private static final TechAdvancement LARGE_ICE_TA = new TechAdvancement(TECH_BASE_ALL)</b>
<b class="fc">&nbsp;            .setAdvancement(2630, 3085).setApproximate(false, true)</b>
<b class="fc">&nbsp;            .setPrototypeFactions(F_TH)</b>
<b class="fc">&nbsp;            .setProductionFactions(F_LC).setTechRating(RATING_C)</b>
<b class="fc">&nbsp;            .setAvailability(RATING_A, RATING_A, RATING_A, RATING_A)</b>
<b class="fc">&nbsp;            .setStaticTechLevel(SimpleTechLevel.EXPERIMENTAL);</b>
&nbsp;    
<b class="fc">&nbsp;    private static final TechAdvancement LIGHT_FUSION_TA = new TechAdvancement(TECH_BASE_IS)</b>
<b class="fc">&nbsp;            .setISAdvancement(3055, 3062, 3067).setISApproximate(true, false, false)</b>
<b class="fc">&nbsp;            .setPrototypeFactions(F_MERC).setProductionFactions(F_LC).setTechRating(RATING_D)</b>
<b class="fc">&nbsp;            .setAvailability(RATING_X, RATING_X, RATING_E, RATING_D)</b>
<b class="fc">&nbsp;            .setStaticTechLevel(SimpleTechLevel.STANDARD);</b>
&nbsp;    
<b class="fc">&nbsp;    private static final TechAdvancement LARGE_LIGHT_FUSION_TA = new TechAdvancement(TECH_BASE_IS)</b>
<b class="fc">&nbsp;            .setISAdvancement(3064, 3065).setISApproximate(true)</b>
<b class="fc">&nbsp;            .setPrototypeFactions(F_LC).setProductionFactions(F_LC)</b>
<b class="fc">&nbsp;            .setTechRating(RATING_D).setAvailability(RATING_X, RATING_X, RATING_E, RATING_E)</b>
<b class="fc">&nbsp;            .setStaticTechLevel(SimpleTechLevel.EXPERIMENTAL);</b>
&nbsp;    
<b class="fc">&nbsp;    private static final TechAdvancement COMPACT_FUSION_TA = new TechAdvancement(TECH_BASE_IS)</b>
<b class="fc">&nbsp;            .setISAdvancement(3060, 3068, 3072).setISApproximate(true)</b>
<b class="fc">&nbsp;            .setPrototypeFactions(F_LC).setProductionFactions(F_LC)</b>
<b class="fc">&nbsp;            .setTechRating(RATING_E)</b>
<b class="fc">&nbsp;            .setAvailability(RATING_X, RATING_X, RATING_E, RATING_D)</b>
<b class="fc">&nbsp;            .setStaticTechLevel(SimpleTechLevel.STANDARD);            </b>
&nbsp;    
<b class="fc">&nbsp;    private static final TechAdvancement IS_XL_TA = new TechAdvancement(TECH_BASE_IS)</b>
<b class="fc">&nbsp;            .setISAdvancement(2556, 2579, 3045, 2865, 3035)</b>
<b class="fc">&nbsp;            .setPrototypeFactions(F_TH).setProductionFactions(F_TH).setReintroductionFactions(F_LC)</b>
<b class="fc">&nbsp;            .setTechRating(RATING_E).setAvailability(RATING_D, RATING_F, RATING_E, RATING_D)</b>
<b class="fc">&nbsp;            .setStaticTechLevel(SimpleTechLevel.STANDARD);</b>
&nbsp;    
<b class="fc">&nbsp;    private static final TechAdvancement CLAN_XL_TA = new TechAdvancement(TECH_BASE_CLAN)</b>
<b class="fc">&nbsp;            .setClanAdvancement(2824, 2827, 2829).setClanApproximate(true)</b>
<b class="fc">&nbsp;            .setPrototypeFactions(F_CSF).setProductionFactions(F_CSF)</b>
<b class="fc">&nbsp;            .setTechRating(RATING_F).setAvailability(RATING_D, RATING_E, RATING_D, RATING_D)</b>
<b class="fc">&nbsp;            .setStaticTechLevel(SimpleTechLevel.STANDARD);</b>
&nbsp;    
<b class="fc">&nbsp;    private static final TechAdvancement LARGE_IS_XL_TA = new TechAdvancement(TECH_BASE_IS)</b>
<b class="fc">&nbsp;            .setISAdvancement(2635, 3085, DATE_NONE, 2822, 3054).setISApproximate(true, true)</b>
<b class="fc">&nbsp;            .setPrototypeFactions(F_TH).setProductionFactions(F_TH).setReintroductionFactions(F_LC, F_FS)</b>
<b class="fc">&nbsp;            .setTechRating(RATING_E).setAvailability(RATING_D, RATING_F, RATING_E, RATING_E)</b>
<b class="fc">&nbsp;            .setStaticTechLevel(SimpleTechLevel.EXPERIMENTAL);</b>
&nbsp;    
<b class="fc">&nbsp;    private static final TechAdvancement LARGE_CLAN_XL_TA = new TechAdvancement(TECH_BASE_CLAN)</b>
<b class="fc">&nbsp;            .setClanAdvancement(2850, 3080).setClanApproximate(true, true)</b>
<b class="fc">&nbsp;            .setPrototypeFactions(F_CIH).setProductionFactions(F_CHH)</b>
<b class="fc">&nbsp;            .setTechRating(RATING_F).setAvailability(RATING_D, RATING_F, RATING_E, RATING_E)</b>
<b class="fc">&nbsp;            .setStaticTechLevel(SimpleTechLevel.EXPERIMENTAL);</b>
&nbsp;    
<b class="fc">&nbsp;    private static final TechAdvancement IS_XXL_TA = new TechAdvancement(TECH_BASE_IS)</b>
<b class="fc">&nbsp;            .setISAdvancement(3055, 3110).setISApproximate(true, true)</b>
<b class="fc">&nbsp;            .setPrototypeFactions(F_FS, F_LC).setProductionFactions(F_LC)</b>
<b class="fc">&nbsp;            .setTechRating(RATING_F).setAvailability(RATING_X, RATING_X, RATING_F, RATING_E)</b>
<b class="fc">&nbsp;            .setStaticTechLevel(SimpleTechLevel.EXPERIMENTAL);</b>
&nbsp;    
<b class="fc">&nbsp;    private static final TechAdvancement CLAN_XXL_TA = new TechAdvancement(TECH_BASE_CLAN)</b>
<b class="fc">&nbsp;            .setClanAdvancement(2954, 3084).setApproximate(true, true)</b>
<b class="fc">&nbsp;            .setPrototypeFactions(F_CSF).setProductionFactions(F_CSF)</b>
<b class="fc">&nbsp;            .setTechRating(RATING_F).setAvailability(RATING_X, RATING_X, RATING_F, RATING_E)</b>
<b class="fc">&nbsp;            .setStaticTechLevel(SimpleTechLevel.EXPERIMENTAL);</b>
&nbsp;    
<b class="fc">&nbsp;    private static final TechAdvancement LARGE_IS_XXL_TA = new TechAdvancement(TECH_BASE_IS)</b>
<b class="fc">&nbsp;            .setISAdvancement(3058, 3130).setTechRating(RATING_F)</b>
<b class="fc">&nbsp;            .setPrototypeFactions(F_FS).setProductionFactions(F_LC)</b>
<b class="fc">&nbsp;            .setAvailability(RATING_X, RATING_X, RATING_F, RATING_F)</b>
<b class="fc">&nbsp;            .setStaticTechLevel(SimpleTechLevel.EXPERIMENTAL);</b>
&nbsp;    
<b class="fc">&nbsp;    private static final TechAdvancement LARGE_CLAN_XXL_TA = new TechAdvancement(TECH_BASE_CLAN)</b>
<b class="fc">&nbsp;            .setClanAdvancement(3055, 3125).setTechRating(RATING_F)</b>
<b class="fc">&nbsp;            .setPrototypeFactions(F_CSF).setProductionFactions(F_CSF)</b>
<b class="fc">&nbsp;            .setAvailability(RATING_X, RATING_X, RATING_F, RATING_F)</b>
<b class="fc">&nbsp;            .setStaticTechLevel(SimpleTechLevel.EXPERIMENTAL);</b>
&nbsp;    
<b class="fc">&nbsp;    private static final TechAdvancement FISSION_TA = new TechAdvancement(TECH_BASE_ALL)</b>
<b class="fc">&nbsp;            .setAdvancement(2470, 2882, 3079).setTechRating(RATING_D)</b>
<b class="fc">&nbsp;            .setPrototypeFactions(F_TH).setProductionFactions(F_TC)</b>
<b class="fc">&nbsp;            .setAvailability(RATING_E, RATING_E, RATING_D, RATING_D)</b>
<b class="fc">&nbsp;            .setStaticTechLevel(SimpleTechLevel.STANDARD);</b>
&nbsp;    
<b class="fc">&nbsp;    private static final TechAdvancement FUEL_CELL_TA = new TechAdvancement(TECH_BASE_ALL)</b>
<b class="fc">&nbsp;            .setAdvancement(2300, 2470, 3078).setApproximate(true).setTechRating(RATING_D)</b>
<b class="fc">&nbsp;            .setPrototypeFactions(F_TA).setProductionFactions(F_TH)</b>
<b class="fc">&nbsp;            .setAvailability(RATING_C, RATING_D, RATING_D, RATING_C)</b>
<b class="fc">&nbsp;            .setStaticTechLevel(SimpleTechLevel.STANDARD);    </b>
&nbsp;    
<b class="fc">&nbsp;    private static final TechAdvancement SUPPORT_STEAM_TA = new TechAdvancement(TECH_BASE_ALL)</b>
<b class="fc">&nbsp;            .setAdvancement(DATE_PS, DATE_PS, DATE_PS).setTechRating(RATING_A)</b>
<b class="fc">&nbsp;            .setAvailability(RATING_A, RATING_A, RATING_A, RATING_A)</b>
<b class="fc">&nbsp;            .setStaticTechLevel(SimpleTechLevel.STANDARD);</b>
&nbsp;    
<b class="fc">&nbsp;    private static final TechAdvancement SUPPORT_ICE_TA = new TechAdvancement(TECH_BASE_ALL)</b>
<b class="fc">&nbsp;            .setAdvancement(DATE_PS, DATE_PS, DATE_PS).setTechRating(RATING_B)</b>
<b class="fc">&nbsp;            .setAvailability(RATING_A, RATING_A, RATING_A, RATING_A)</b>
<b class="fc">&nbsp;            .setStaticTechLevel(SimpleTechLevel.STANDARD);</b>
&nbsp;    
<b class="fc">&nbsp;    private static final TechAdvancement SUPPORT_BATTERY_TA = new TechAdvancement(TECH_BASE_ALL)</b>
<b class="fc">&nbsp;            .setAdvancement(DATE_PS, DATE_PS, DATE_PS)</b>
<b class="fc">&nbsp;            .setTechRating(RATING_C)</b>
<b class="fc">&nbsp;            .setAvailability(RATING_A, RATING_B, RATING_A, RATING_A)</b>
<b class="fc">&nbsp;            .setStaticTechLevel(SimpleTechLevel.STANDARD);</b>
&nbsp;    
<b class="fc">&nbsp;    private static final TechAdvancement SUPPORT_FUEL_CELL_TA = new TechAdvancement(TECH_BASE_ALL)</b>
<b class="fc">&nbsp;            .setAdvancement(DATE_PS, DATE_PS, DATE_PS).setTechRating(RATING_C)</b>
<b class="fc">&nbsp;            .setAvailability(RATING_B, RATING_C, RATING_C, RATING_B)</b>
<b class="fc">&nbsp;            .setStaticTechLevel(SimpleTechLevel.STANDARD);</b>
&nbsp;    
<b class="fc">&nbsp;    private static final TechAdvancement SUPPORT_SOLAR_TA = new TechAdvancement(TECH_BASE_ALL)</b>
<b class="fc">&nbsp;            .setAdvancement(DATE_PS, DATE_PS, DATE_PS)</b>
<b class="fc">&nbsp;            .setTechRating(RATING_C)</b>
<b class="fc">&nbsp;            .setAvailability(RATING_C, RATING_D, RATING_C, RATING_C)</b>
<b class="fc">&nbsp;            .setStaticTechLevel(SimpleTechLevel.STANDARD);</b>
&nbsp;    
<b class="fc">&nbsp;    private static final TechAdvancement SUPPORT_FISSION_TA = new TechAdvancement(TECH_BASE_ALL)</b>
<b class="fc">&nbsp;            .setAdvancement(DATE_ES, DATE_ES, DATE_ES).setTechRating(RATING_C)</b>
<b class="fc">&nbsp;            .setAvailability(RATING_E, RATING_E, RATING_D, RATING_C)</b>
<b class="fc">&nbsp;            .setStaticTechLevel(SimpleTechLevel.STANDARD);</b>
&nbsp;    
<b class="fc">&nbsp;    private static final TechAdvancement SUPPORT_FUSION_TA = new TechAdvancement(TECH_BASE_ALL)</b>
<b class="fc">&nbsp;            .setAdvancement(DATE_ES, DATE_ES, DATE_ES).setTechRating(RATING_C)</b>
<b class="fc">&nbsp;            .setAvailability(RATING_C, RATING_E, RATING_D, RATING_C)</b>
<b class="fc">&nbsp;            .setStaticTechLevel(SimpleTechLevel.STANDARD);</b>
&nbsp;   
<b class="fc">&nbsp;    private static final TechAdvancement SUPPORT_MAGLEV_TA = new TechAdvancement(TECH_BASE_ALL)</b>
<b class="fc">&nbsp;            .setAdvancement(DATE_ES, DATE_ES, DATE_ES).setTechRating(RATING_C)</b>
<b class="fc">&nbsp;            .setAvailability(RATING_D, RATING_F, RATING_E, RATING_D)</b>
<b class="fc">&nbsp;            .setStaticTechLevel(SimpleTechLevel.STANDARD);</b>
&nbsp;
<b class="fc">&nbsp;    private static final TechAdvancement SUPPORT_NONE_TA = new TechAdvancement(TECH_BASE_ALL)</b>
<b class="fc">&nbsp;            .setAdvancement(DATE_PS, DATE_PS, DATE_PS).setTechRating(RATING_A)</b>
<b class="fc">&nbsp;            .setAvailability(RATING_A, RATING_A, RATING_A, RATING_A)</b>
<b class="fc">&nbsp;            .setStaticTechLevel(SimpleTechLevel.STANDARD);</b>
&nbsp;
<b class="fc">&nbsp;    private static final TechAdvancement SUPPORT_EXTERNAL_TA = new TechAdvancement(TECH_BASE_ALL)</b>
<b class="fc">&nbsp;            .setAdvancement(DATE_NONE, DATE_NONE, DATE_PS)</b>
<b class="fc">&nbsp;            .setTechRating(RATING_B).setAvailability(RATING_C, RATING_D, RATING_C, RATING_C);</b>
&nbsp;
&nbsp;    public TechAdvancement getTechAdvancement() {
<b class="fc">&nbsp;        switch(engineType) {</b>
&nbsp;        case COMBUSTION_ENGINE:
<b class="nc">&nbsp;            if (hasFlag(SUPPORT_VEE_ENGINE)) {</b>
<b class="nc">&nbsp;                return SUPPORT_ICE_TA;              </b>
&nbsp;            } else {
<b class="nc">&nbsp;                if (hasFlag(LARGE_ENGINE)) {</b>
<b class="nc">&nbsp;                    return LARGE_ICE_TA;</b>
&nbsp;                } else {
<b class="nc">&nbsp;                    return STANDARD_ICE_TA;</b>
&nbsp;                }
&nbsp;            }
&nbsp;        case NORMAL_ENGINE:
<b class="fc">&nbsp;            if (hasFlag(SUPPORT_VEE_ENGINE)) {</b>
<b class="nc">&nbsp;                return SUPPORT_FUSION_TA;</b>
&nbsp;            } else {
<b class="fc">&nbsp;                if (hasFlag(LARGE_ENGINE)) {</b>
<b class="nc">&nbsp;                    return LARGE_FUSION_TA;</b>
&nbsp;                } else {
<b class="fc">&nbsp;                    return STANDARD_FUSION_TA;</b>
&nbsp;                }
&nbsp;            }
&nbsp;        case XL_ENGINE:
<b class="nc">&nbsp;            if (hasFlag(CLAN_ENGINE)) {</b>
<b class="nc">&nbsp;                if (hasFlag(LARGE_ENGINE)) {</b>
<b class="nc">&nbsp;                    return LARGE_CLAN_XL_TA;</b>
&nbsp;                } else {
<b class="nc">&nbsp;                    return CLAN_XL_TA;</b>
&nbsp;                }
&nbsp;            } else {
<b class="nc">&nbsp;                if (hasFlag(LARGE_ENGINE)) {</b>
<b class="nc">&nbsp;                    return LARGE_IS_XL_TA;</b>
&nbsp;                } else {
<b class="nc">&nbsp;                    return IS_XL_TA;</b>
&nbsp;                }
&nbsp;            }
&nbsp;        case XXL_ENGINE:
<b class="nc">&nbsp;            if (hasFlag(CLAN_ENGINE)) {</b>
<b class="nc">&nbsp;                if (hasFlag(LARGE_ENGINE)) {</b>
<b class="nc">&nbsp;                    return LARGE_CLAN_XXL_TA;</b>
&nbsp;                } else {
<b class="nc">&nbsp;                    return CLAN_XXL_TA;</b>
&nbsp;                }
&nbsp;            } else {
<b class="nc">&nbsp;                if (hasFlag(LARGE_ENGINE)) {</b>
<b class="nc">&nbsp;                    return LARGE_IS_XXL_TA;</b>
&nbsp;                } else {
<b class="nc">&nbsp;                    return IS_XXL_TA;</b>
&nbsp;                }
&nbsp;            }
&nbsp;        case FUEL_CELL:
<b class="nc">&nbsp;            if (hasFlag(SUPPORT_VEE_ENGINE)) {</b>
<b class="nc">&nbsp;                return SUPPORT_FUEL_CELL_TA;</b>
&nbsp;            } else {
<b class="nc">&nbsp;                return FUEL_CELL_TA;</b>
&nbsp;            }
&nbsp;        case LIGHT_ENGINE:
<b class="nc">&nbsp;            if (hasFlag(LARGE_ENGINE)) {</b>
<b class="nc">&nbsp;                return LARGE_LIGHT_FUSION_TA;</b>
&nbsp;            } else {
<b class="nc">&nbsp;                return LIGHT_FUSION_TA;</b>
&nbsp;            }
&nbsp;        case COMPACT_ENGINE:
<b class="nc">&nbsp;            return COMPACT_FUSION_TA;</b>
&nbsp;        case FISSION:
<b class="nc">&nbsp;            if (hasFlag(SUPPORT_VEE_ENGINE)) {</b>
<b class="nc">&nbsp;                return SUPPORT_FISSION_TA;</b>
&nbsp;            } else {                
<b class="nc">&nbsp;                return FISSION_TA;</b>
&nbsp;            }
&nbsp;        case MAGLEV:
<b class="nc">&nbsp;            return SUPPORT_MAGLEV_TA;</b>
&nbsp;        case STEAM:
<b class="nc">&nbsp;            return SUPPORT_STEAM_TA;</b>
&nbsp;        case BATTERY:
<b class="nc">&nbsp;            return SUPPORT_BATTERY_TA;</b>
&nbsp;        case SOLAR:
<b class="nc">&nbsp;            return SUPPORT_SOLAR_TA;</b>
&nbsp;        case NONE:
<b class="nc">&nbsp;            return SUPPORT_NONE_TA;</b>
&nbsp;        case EXTERNAL:
<b class="nc">&nbsp;            return SUPPORT_EXTERNAL_TA;</b>
&nbsp;        default:
<b class="nc">&nbsp;            return new TechAdvancement();</b>
&nbsp;        }
&nbsp;    }
&nbsp;    /**
&nbsp;     * Return the tech type (tech level + tech base) for the current engine.
&nbsp;     *
&nbsp;     * @param year The game year
&nbsp;     * @return     The tech constant
&nbsp;     */
&nbsp;    public int getTechType(int year) {
<b class="nc">&nbsp;        boolean isLarge = hasFlag(LARGE_ENGINE);</b>
<b class="nc">&nbsp;        boolean isClan = hasFlag(CLAN_ENGINE);</b>
<b class="nc">&nbsp;        boolean isSV = hasFlag(SUPPORT_VEE_ENGINE);</b>
<b class="nc">&nbsp;        switch (engineType) {</b>
&nbsp;            case NORMAL_ENGINE:
<b class="nc">&nbsp;                if ((isClan) &amp;&amp; (isLarge)) {</b>
<b class="nc">&nbsp;                    if (year &lt;= 2630) {</b>
<b class="nc">&nbsp;                        return TechConstants.T_CLAN_UNOFFICIAL;</b>
<b class="nc">&nbsp;                    } else if (year &lt;= 3080) {</b>
<b class="nc">&nbsp;                        return TechConstants.T_CLAN_EXPERIMENTAL;</b>
<b class="nc">&nbsp;                    } else if (year &lt;= 3120) {</b>
<b class="nc">&nbsp;                        return TechConstants.T_CLAN_ADVANCED;</b>
&nbsp;                    } else {
<b class="nc">&nbsp;                        return TechConstants.T_CLAN_TW;</b>
&nbsp;                    }
&nbsp;                }
<b class="nc">&nbsp;                if (isClan) {</b>
<b class="nc">&nbsp;                    return TechConstants.T_CLAN_TW;</b>
&nbsp;                }
<b class="nc">&nbsp;                if (isSV) {</b>
<b class="nc">&nbsp;                    return TechConstants.T_ALLOWED_ALL;</b>
&nbsp;                }
<b class="nc">&nbsp;                if (year &lt;= 2285) {</b>
<b class="nc">&nbsp;                    return TechConstants.T_IS_UNOFFICIAL;</b>
&nbsp;                } else {
<b class="nc">&nbsp;                    return TechConstants.T_INTRO_BOXSET;</b>
&nbsp;                }
&nbsp;            case XL_ENGINE:
<b class="nc">&nbsp;                if ((isClan) &amp;&amp; (isLarge)) {</b>
<b class="nc">&nbsp;                    if (year &lt;= 2845) {</b>
<b class="nc">&nbsp;                        return TechConstants.T_CLAN_UNOFFICIAL;</b>
<b class="nc">&nbsp;                    } else if (year &lt;= 3075) {</b>
<b class="nc">&nbsp;                        return TechConstants.T_CLAN_EXPERIMENTAL;</b>
&nbsp;                    } else {
<b class="nc">&nbsp;                        return TechConstants.T_CLAN_ADVANCED;</b>
&nbsp;                    }
&nbsp;                }
<b class="nc">&nbsp;                if (isClan) {</b>
<b class="nc">&nbsp;                    if (year &lt;= 2819) {</b>
<b class="nc">&nbsp;                        return TechConstants.T_CLAN_UNOFFICIAL;</b>
<b class="nc">&nbsp;                    } else if (year &lt;= 2827) {</b>
<b class="nc">&nbsp;                        return TechConstants.T_CLAN_EXPERIMENTAL;</b>
<b class="nc">&nbsp;                    } else if (year &lt;= 2829) {</b>
<b class="nc">&nbsp;                        return TechConstants.T_CLAN_ADVANCED;</b>
&nbsp;                    } else {
<b class="nc">&nbsp;                        return TechConstants.T_CLAN_TW;</b>
&nbsp;                    }
&nbsp;                }
<b class="nc">&nbsp;                if (isLarge) {</b>
<b class="nc">&nbsp;                    if (year &lt;= 2630) {</b>
<b class="nc">&nbsp;                        return TechConstants.T_IS_UNOFFICIAL;</b>
<b class="nc">&nbsp;                        } else if (year &lt;= 2822) {</b>
<b class="nc">&nbsp;                        return TechConstants.T_IS_ADVANCED;</b>
<b class="nc">&nbsp;                        } else if (year &lt;= 3053) {</b>
<b class="nc">&nbsp;                        return TechConstants.T_IS_UNOFFICIAL;</b>
<b class="nc">&nbsp;                        } else if (year &lt;= 3080) {</b>
<b class="nc">&nbsp;                        return TechConstants.T_IS_EXPERIMENTAL;</b>
&nbsp;                        } else {
<b class="nc">&nbsp;                        return TechConstants.T_IS_ADVANCED;</b>
&nbsp;                        }
&nbsp;                } else {
<b class="nc">&nbsp;                    if (year &lt;= 2556) {</b>
<b class="nc">&nbsp;                        return TechConstants.T_IS_UNOFFICIAL;</b>
<b class="nc">&nbsp;                        } else if (year &lt;= 2579) {</b>
<b class="nc">&nbsp;                        return TechConstants.T_IS_EXPERIMENTAL;</b>
<b class="nc">&nbsp;                           } else if (year &lt;= 2865) {</b>
<b class="nc">&nbsp;                        return TechConstants.T_IS_ADVANCED;</b>
<b class="nc">&nbsp;                           } else if (year &lt;= 3035) {</b>
<b class="nc">&nbsp;                        return TechConstants.T_IS_UNOFFICIAL;</b>
<b class="nc">&nbsp;                        } else if (year &lt;=3045){</b>
<b class="nc">&nbsp;                        return TechConstants.T_IS_TW_NON_BOX;</b>
&nbsp;                        }
&nbsp;                }
&nbsp;            case XXL_ENGINE:
<b class="nc">&nbsp;                if ((isClan) &amp;&amp; (isLarge)) {</b>
<b class="nc">&nbsp;                    if (year &lt;= 3055) {</b>
<b class="nc">&nbsp;                        return TechConstants.T_CLAN_UNOFFICIAL;</b>
<b class="nc">&nbsp;                    } else if (year &lt;= 3125) {</b>
<b class="nc">&nbsp;                        return TechConstants.T_CLAN_EXPERIMENTAL;</b>
&nbsp;                    } else {
<b class="nc">&nbsp;                        return TechConstants.T_CLAN_ADVANCED;</b>
&nbsp;                    }
&nbsp;                }
<b class="nc">&nbsp;                if (isClan) {</b>
<b class="nc">&nbsp;                    if (year &lt;= 2949) {</b>
<b class="nc">&nbsp;                        return TechConstants.T_CLAN_UNOFFICIAL;</b>
<b class="nc">&nbsp;                    } else if (year &lt;= 3079) {</b>
<b class="nc">&nbsp;                        return TechConstants.T_CLAN_EXPERIMENTAL;</b>
&nbsp;                    } else {
<b class="nc">&nbsp;                        return TechConstants.T_CLAN_ADVANCED;</b>
&nbsp;                    }
&nbsp;                }
<b class="nc">&nbsp;                if (isLarge) {</b>
<b class="nc">&nbsp;                    if (year &lt;= 3058) {</b>
<b class="nc">&nbsp;                        return TechConstants.T_IS_UNOFFICIAL;</b>
<b class="nc">&nbsp;                    } else if (year &lt;= 3130) {</b>
<b class="nc">&nbsp;                        return TechConstants.T_IS_EXPERIMENTAL;</b>
&nbsp;                    } else {
<b class="nc">&nbsp;                        return TechConstants.T_IS_ADVANCED;</b>
&nbsp;                    }
&nbsp;                }
&nbsp;            case FISSION:
<b class="nc">&nbsp;                if (isClan) {</b>
<b class="nc">&nbsp;                    return TechConstants.T_CLAN_UNOFFICIAL;</b>
&nbsp;                }
<b class="nc">&nbsp;                if (isSV) {</b>
<b class="nc">&nbsp;                    return TechConstants.T_ALLOWED_ALL;</b>
&nbsp;                }
<b class="nc">&nbsp;                if (isLarge) {</b>
<b class="nc">&nbsp;                    return TechConstants.T_IS_UNOFFICIAL;</b>
&nbsp;                } else {
<b class="nc">&nbsp;                    if (year &lt;= 2470) {</b>
<b class="nc">&nbsp;                        return TechConstants.T_IS_EXPERIMENTAL;</b>
<b class="nc">&nbsp;                    } else if (year &lt;= 2882) {</b>
<b class="nc">&nbsp;                        return TechConstants.T_IS_ADVANCED;</b>
<b class="nc">&nbsp;                    } else if (year &lt;= 3079) {</b>
<b class="nc">&nbsp;                        return TechConstants.T_IS_TW_NON_BOX;</b>
&nbsp;                    }
&nbsp;                }
&nbsp;            case FUEL_CELL:
<b class="nc">&nbsp;                if (isSV) {</b>
<b class="nc">&nbsp;                    return TechConstants.T_ALLOWED_ALL;</b>
&nbsp;                }
<b class="nc">&nbsp;                if (isClan) {</b>
<b class="nc">&nbsp;                    if (year &lt;= 3078) {</b>
<b class="nc">&nbsp;                        return TechConstants.T_CLAN_ADVANCED;</b>
&nbsp;                    } else {
<b class="nc">&nbsp;                        return TechConstants.T_CLAN_TW;</b>
&nbsp;                    }
&nbsp;                } else {
<b class="nc">&nbsp;                    if (year &lt;= 2285) {</b>
<b class="nc">&nbsp;                        return TechConstants.T_IS_UNOFFICIAL;</b>
<b class="nc">&nbsp;                    } else if (year &lt;= 2470) {</b>
<b class="nc">&nbsp;                        return TechConstants.T_IS_EXPERIMENTAL;</b>
<b class="nc">&nbsp;                    } else if (year &lt;= 3078) {</b>
<b class="nc">&nbsp;                        return TechConstants.T_IS_ADVANCED;</b>
&nbsp;                    } else {
<b class="nc">&nbsp;                        return TechConstants.T_IS_TW_NON_BOX;</b>
&nbsp;                    }
&nbsp;                }
&nbsp;
&nbsp;            case LIGHT_ENGINE:
<b class="nc">&nbsp;                if (isClan) {</b>
<b class="nc">&nbsp;                    return TechConstants.T_CLAN_UNOFFICIAL;</b>
&nbsp;                }
<b class="nc">&nbsp;                if (isLarge) {</b>
<b class="nc">&nbsp;                    if (year &lt; 3064) {</b>
<b class="nc">&nbsp;                        return TechConstants.T_IS_UNOFFICIAL;</b>
<b class="nc">&nbsp;                    } else if (year &lt; 3065) {</b>
<b class="nc">&nbsp;                        return TechConstants.T_IS_EXPERIMENTAL;</b>
&nbsp;                    } else {
<b class="nc">&nbsp;                        return TechConstants.T_IS_ADVANCED;</b>
&nbsp;                    }
&nbsp;                } else {
<b class="nc">&nbsp;                    if (year &lt; 3055) {</b>
<b class="nc">&nbsp;                        return TechConstants.T_IS_UNOFFICIAL;</b>
<b class="nc">&nbsp;                    } else if (year &lt; 3062) {</b>
<b class="nc">&nbsp;                        return TechConstants.T_IS_EXPERIMENTAL;</b>
<b class="nc">&nbsp;                    } else if (year &lt; 3067) {</b>
<b class="nc">&nbsp;                        return TechConstants.T_IS_ADVANCED;</b>
&nbsp;                    } else {
<b class="nc">&nbsp;                        return TechConstants.T_IS_TW_NON_BOX;</b>
&nbsp;                    }
&nbsp;                }
&nbsp;
&nbsp;            case COMBUSTION_ENGINE:
<b class="nc">&nbsp;                if (isSV) {</b>
<b class="nc">&nbsp;                    return TechConstants.T_ALLOWED_ALL;</b>
&nbsp;                }
<b class="nc">&nbsp;                if (isClan) {</b>
<b class="nc">&nbsp;                    if (year &lt;= 2807) {</b>
<b class="nc">&nbsp;                        return TechConstants.T_CLAN_UNOFFICIAL;</b>
&nbsp;                    } else {
<b class="nc">&nbsp;                        return TechConstants.T_CLAN_TW;</b>
&nbsp;                    }
&nbsp;
&nbsp;                }
<b class="nc">&nbsp;                if (isLarge) {</b>
<b class="nc">&nbsp;                    if (year &lt;= 2630) {</b>
<b class="nc">&nbsp;                        return TechConstants.T_IS_UNOFFICIAL;</b>
<b class="nc">&nbsp;                    } else if (year &lt;= 3080) {</b>
<b class="nc">&nbsp;                        return TechConstants.T_IS_EXPERIMENTAL;</b>
&nbsp;                    } else {
<b class="nc">&nbsp;                        return TechConstants.T_IS_TW_NON_BOX;</b>
&nbsp;                    }
&nbsp;                } else {
<b class="nc">&nbsp;                    return TechConstants.T_ALLOWED_ALL;</b>
&nbsp;                }
&nbsp;            case MAGLEV:
&nbsp;            case STEAM:
&nbsp;            case BATTERY:
&nbsp;            case SOLAR:
&nbsp;            case NONE:
&nbsp;            case EXTERNAL:
<b class="nc">&nbsp;                return TechConstants.T_ALLOWED_ALL;</b>
&nbsp;            case COMPACT_ENGINE:
<b class="nc">&nbsp;                if (isClan) {</b>
<b class="nc">&nbsp;                    return TechConstants.T_CLAN_UNOFFICIAL;</b>
&nbsp;                } else {
<b class="nc">&nbsp;                    if (year &lt;= 3060) {</b>
<b class="nc">&nbsp;                        return TechConstants.T_IS_UNOFFICIAL;</b>
<b class="nc">&nbsp;                    } else if (year &lt;= 3068) {</b>
<b class="nc">&nbsp;                        return TechConstants.T_IS_EXPERIMENTAL;</b>
<b class="nc">&nbsp;                    } else if (year &lt;= 3072) {</b>
<b class="nc">&nbsp;                        return TechConstants.T_IS_ADVANCED;</b>
&nbsp;                    } else {
<b class="nc">&nbsp;                        return TechConstants.T_IS_TW_NON_BOX;</b>
&nbsp;                    }
&nbsp;                }
&nbsp;        }
<b class="nc">&nbsp;        return TechConstants.T_TECH_UNKNOWN;</b>
&nbsp;    }
&nbsp;    
&nbsp;
&nbsp;    public int getEngineType() {
<b class="fc">&nbsp;        return engineType;</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * For omnis set the base Chassies HS any variants will only use this and the reset
&nbsp;     * will have to be added.
&nbsp;     *
&nbsp;     * @param amount The number to set as base chassis heat sinks
&nbsp;     */
&nbsp;    public void setBaseChassisHeatSinks(int amount) {
<b class="nc">&nbsp;        baseChassisHeatSinks = amount;</b>
<b class="nc">&nbsp;    }</b>
&nbsp;
&nbsp;    /**
&nbsp;     * Return the Base Chassies Engine heat Sinks or integralHeatSinkCapacity which ever is less.
&nbsp;     *
&nbsp;     * @param compact Whether this engine uses compact heat sinks or not.
&nbsp;     *
&nbsp;     * @return        The number of integral heat sinks in the base chassis
&nbsp;     */
&nbsp;    public int getBaseChassisHeatSinks(boolean compact) {
<b class="nc">&nbsp;        return Math.min(integralHeatSinkCapacity(compact), baseChassisHeatSinks);</b>
&nbsp;    }
&nbsp;
&nbsp;    public int getFlags() {
<b class="nc">&nbsp;        return engineFlags;</b>
&nbsp;    }
&nbsp;    
&nbsp;    @Override
&nbsp;    public int getTechBase() {
<b class="nc">&nbsp;        return getTechAdvancement().getTechBase();</b>
&nbsp;    }
&nbsp;
&nbsp;    @Override
&nbsp;    public boolean isClan() {
<b class="fc">&nbsp;        return getTechAdvancement().isClan();</b>
&nbsp;    }
&nbsp;
&nbsp;    @Override
&nbsp;    public boolean isMixedTech() {
<b class="nc">&nbsp;        return getTechAdvancement().isMixedTech();</b>
&nbsp;    }
&nbsp;
&nbsp;    @Override
&nbsp;    public boolean isIntroLevel() {
<b class="nc">&nbsp;        return getTechAdvancement().isIntroLevel();</b>
&nbsp;    }
&nbsp;
&nbsp;    @Override
&nbsp;    public boolean isUnofficial() {
<b class="nc">&nbsp;        return getTechAdvancement().isUnofficial();</b>
&nbsp;    }
&nbsp;
&nbsp;    @Override
&nbsp;    public int getIntroductionDate(boolean clan) {
<b class="nc">&nbsp;        return getTechAdvancement().getIntroductionDate(clan);</b>
&nbsp;    }
&nbsp;    
&nbsp;    @Override
&nbsp;    public int getIntroductionDate(boolean clan, int faction) {
<b class="fc">&nbsp;        return getTechAdvancement().getIntroductionDate(clan, faction);</b>
&nbsp;    }
&nbsp;
&nbsp;    @Override
&nbsp;    public int getIntroductionDate() {
<b class="nc">&nbsp;        return getTechAdvancement().getIntroductionDate();</b>
&nbsp;    }
&nbsp;
&nbsp;    @Override
&nbsp;    public int getPrototypeDate(boolean clan) {
<b class="nc">&nbsp;        return getTechAdvancement().getPrototypeDate(clan);</b>
&nbsp;    }
&nbsp;
&nbsp;    @Override
&nbsp;    public int getPrototypeDate() {
<b class="nc">&nbsp;        return getTechAdvancement().getPrototypeDate();</b>
&nbsp;    }
&nbsp;
&nbsp;    @Override
&nbsp;    public int getPrototypeDate(boolean clan, int faction) {
<b class="fc">&nbsp;        return getTechAdvancement().getPrototypeDate(clan, faction);</b>
&nbsp;    }
&nbsp;
&nbsp;    @Override
&nbsp;    public int getProductionDate(boolean clan) {
<b class="nc">&nbsp;        return getTechAdvancement().getProductionDate(clan);</b>
&nbsp;    }
&nbsp;
&nbsp;    @Override
&nbsp;    public int getProductionDate() {
<b class="nc">&nbsp;        return getTechAdvancement().getProductionDate();</b>
&nbsp;    }
&nbsp;
&nbsp;    @Override
&nbsp;    public int getProductionDate(boolean clan, int faction) {
<b class="fc">&nbsp;        return getTechAdvancement().getProductionDate(clan, faction);</b>
&nbsp;    }
&nbsp;
&nbsp;    @Override
&nbsp;    public int getCommonDate(boolean clan) {
<b class="fc">&nbsp;        return getTechAdvancement().getCommonDate(clan);</b>
&nbsp;    }
&nbsp;
&nbsp;    @Override
&nbsp;    public int getCommonDate() {
<b class="nc">&nbsp;        return getTechAdvancement().getCommonDate();</b>
&nbsp;    }
&nbsp;
&nbsp;    @Override
&nbsp;    public int getExtinctionDate(boolean clan) {
<b class="nc">&nbsp;        return getTechAdvancement().getExtinctionDate(clan);</b>
&nbsp;    }
&nbsp;
&nbsp;    @Override
&nbsp;    public int getExtinctionDate() {
<b class="nc">&nbsp;        return getTechAdvancement().getExtinctionDate();</b>
&nbsp;    }
&nbsp;
&nbsp;    @Override
&nbsp;    public int getExtinctionDate(boolean clan, int faction) {
<b class="fc">&nbsp;        return getTechAdvancement().getExtinctionDate(clan, faction);</b>
&nbsp;    }
&nbsp;
&nbsp;    @Override
&nbsp;    public int getReintroductionDate(boolean clan) {
<b class="nc">&nbsp;        return getTechAdvancement().getReintroductionDate(clan);</b>
&nbsp;    }
&nbsp;
&nbsp;    @Override
&nbsp;    public int getReintroductionDate() {
<b class="nc">&nbsp;        return getTechAdvancement().getReintroductionDate();</b>
&nbsp;    }
&nbsp;
&nbsp;    @Override
&nbsp;    public int getReintroductionDate(boolean clan, int faction) {
<b class="fc">&nbsp;        return getTechAdvancement().getReintroductionDate(clan, faction);</b>
&nbsp;    }
&nbsp;
&nbsp;    @Override
&nbsp;    public int getTechRating() {
<b class="fc">&nbsp;        return getTechAdvancement().getTechRating();</b>
&nbsp;    }
&nbsp;
&nbsp;    @Override
&nbsp;    public int getBaseAvailability(int era) {
<b class="fc">&nbsp;        return getTechAdvancement().getBaseAvailability(era);</b>
&nbsp;    }
&nbsp;    
&nbsp;    @Override
&nbsp;    public SimpleTechLevel getStaticTechLevel() {
<b class="fc">&nbsp;        return getTechAdvancement().getStaticTechLevel();</b>
&nbsp;    }
&nbsp;} // End class Engine
</code>
</pre>
</div>

<script type="text/javascript">
(function() {
    var msie = false, msie9 = false;
    /*@cc_on
      msie = true;
      @if (@_jscript_version >= 9)
        msie9 = true;
      @end
    @*/

    if (!msie || msie && msie9) {
      hljs.highlightAll()
      hljs.initLineNumbersOnLoad();
    }
})();
</script>

<div class="footer">
    
    <div style="float:right;">generated on 2023-05-16 16:28</div>
</div>
</body>
</html>
