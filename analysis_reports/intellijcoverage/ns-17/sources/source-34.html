


<!DOCTYPE html>
<html id="htmlId">
<head>
  <title>Coverage Report > EquipmentType</title>
  <style type="text/css">
    @import "../../css/coverage.css";
    @import "../../css/idea.min.css";
  </style>
  <script type="text/javascript" src="../../js/highlight.min.js"></script>
  <script type="text/javascript" src="../../js/highlightjs-line-numbers.min.js"></script>
</head>

<body>
<div class="content">
<div class="breadCrumbs">
Current scope:     <a href="../../index.html">all classes</a>
    <span class="separator">|</span>
    <a href="../index.html">megamek.common</a>
</div>

<h1>Coverage Summary for Class: EquipmentType (megamek.common)</h1>

<table class="coverageStats">

<tr>
  <th class="name">Class</th>
<th class="coverageStat 
">
  Method, %
</th>
<th class="coverageStat 
">
  Line, %
</th>
</tr>
<tr>
  <td class="name">EquipmentType</td>
<td class="coverageStat">
  <span class="percent">
    51.6%
  </span>
  <span class="absValue">
    (63/122)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    38.6%
  </span>
  <span class="absValue">
    (208/539)
  </span>
</td>
</tr>
  <tr>
    <td class="name">EquipmentType$1</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/3)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/3)
  </span>
</td>
  </tr>
<tr>
  <td class="name"><strong>Total</strong></td>
<td class="coverageStat">
  <span class="percent">
    50.4%
  </span>
  <span class="absValue">
    (63/125)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    38.4%
  </span>
  <span class="absValue">
    (208/542)
  </span>
</td>
</tr>
</table>

<br/>
<br/>


<pre>
<code class="sourceCode" id="sourceCode">&nbsp;/*
&nbsp; * MegaMek - Copyright (C) 2002,2003,2004 Ben Mazur (bmazur@sev.org)
&nbsp; *
&nbsp; * This program is free software; you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software
&nbsp; * Foundation; either version 2 of the License, or (at your option) any later version.
&nbsp; *
&nbsp; * This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR
&nbsp; * A PARTICULAR PURPOSE. See the GNU General Public License for more details.
&nbsp; */
&nbsp;
&nbsp;/*
&nbsp; * EquipmentType.java
&nbsp; *
&nbsp; * Created on April 1, 2002, 1:35 PM
&nbsp; */
&nbsp;
&nbsp;package megamek.common;
&nbsp;
&nbsp;import java.io.BufferedWriter;
&nbsp;import java.io.File;
&nbsp;import java.io.FileWriter;
&nbsp;import java.io.IOException;
&nbsp;import java.math.BigInteger;
&nbsp;import java.util.Enumeration;
&nbsp;import java.util.HashMap;
&nbsp;import java.util.Hashtable;
&nbsp;import java.util.List;
&nbsp;import java.util.Map;
&nbsp;import java.util.Objects;
&nbsp;import java.util.Vector;
&nbsp;import java.util.stream.Collectors;
&nbsp;
&nbsp;import megamek.common.annotations.Nullable;
&nbsp;import megamek.common.options.GameOptions;
&nbsp;import megamek.common.weapons.autocannons.HVACWeapon;
&nbsp;import megamek.common.weapons.defensivepods.BPodWeapon;
&nbsp;import megamek.common.weapons.defensivepods.MPodWeapon;
&nbsp;import megamek.common.weapons.ppc.PPCWeapon;
&nbsp;import megamek.server.Server;
&nbsp;
&nbsp;/**
&nbsp; * Represents any type of equipment mounted on a mechs, excluding systems and
&nbsp; * actuators.
&nbsp; *
&nbsp; * @author Ben
&nbsp; * @version
&nbsp; */
<b class="fc">&nbsp;public class EquipmentType implements ITechnology {</b>
&nbsp;    public static final double TONNAGE_VARIABLE = Float.MIN_VALUE;
&nbsp;    public static final int CRITICALS_VARIABLE = Integer.MIN_VALUE;
&nbsp;    public static final int BV_VARIABLE = Integer.MIN_VALUE;
&nbsp;    public static final int COST_VARIABLE = Integer.MIN_VALUE;
&nbsp;    /** Default value for support vehicle slot cost. Those that differ from mechs are assigned
&nbsp;     * a value &gt;= 0
&nbsp;     */
&nbsp;    private static final int MECH_SLOT_COST = -1;
&nbsp;
&nbsp;    public static final int T_ARMOR_UNKNOWN = -1;
&nbsp;    public static final int T_ARMOR_STANDARD = 0;
&nbsp;    public static final int T_ARMOR_FERRO_FIBROUS = 1;
&nbsp;    public static final int T_ARMOR_REACTIVE = 2;
&nbsp;    public static final int T_ARMOR_REFLECTIVE = 3;
&nbsp;    public static final int T_ARMOR_HARDENED = 4;
&nbsp;    public static final int T_ARMOR_LIGHT_FERRO = 5;
&nbsp;    public static final int T_ARMOR_HEAVY_FERRO = 6;
&nbsp;    public static final int T_ARMOR_PATCHWORK = 7;
&nbsp;    public static final int T_ARMOR_STEALTH = 8;
&nbsp;    public static final int T_ARMOR_FERRO_FIBROUS_PROTO = 9;
&nbsp;    public static final int T_ARMOR_COMMERCIAL = 10;
&nbsp;    public static final int T_ARMOR_LC_FERRO_CARBIDE = 11;  //Large Craft Only
&nbsp;    public static final int T_ARMOR_LC_LAMELLOR_FERRO_CARBIDE = 12; //Large Craft Only
&nbsp;    public static final int T_ARMOR_LC_FERRO_IMP = 13; //Large Craft Only
&nbsp;    public static final int T_ARMOR_INDUSTRIAL = 14;
&nbsp;    public static final int T_ARMOR_HEAVY_INDUSTRIAL = 15;
&nbsp;    public static final int T_ARMOR_FERRO_LAMELLOR = 16;
&nbsp;    public static final int T_ARMOR_PRIMITIVE = 17;
&nbsp;    public static final int T_ARMOR_EDP = 18;
&nbsp;    public static final int T_ARMOR_ALUM = 19;
&nbsp;    public static final int T_ARMOR_HEAVY_ALUM = 20;
&nbsp;    public static final int T_ARMOR_LIGHT_ALUM = 21;
&nbsp;    public static final int T_ARMOR_STEALTH_VEHICLE = 22;
&nbsp;    public static final int T_ARMOR_ANTI_PENETRATIVE_ABLATION = 23;
&nbsp;    public static final int T_ARMOR_HEAT_DISSIPATING = 24;
&nbsp;    public static final int T_ARMOR_IMPACT_RESISTANT = 25;
&nbsp;    public static final int T_ARMOR_BALLISTIC_REINFORCED = 26;
&nbsp;    public static final int T_ARMOR_FERRO_ALUM_PROTO = 27;
&nbsp;    public static final int T_ARMOR_BA_STANDARD = 28;
&nbsp;    public static final int T_ARMOR_BA_STANDARD_PROTOTYPE = 29;
&nbsp;    public static final int T_ARMOR_BA_STANDARD_ADVANCED = 30;
&nbsp;    public static final int T_ARMOR_BA_STEALTH_BASIC = 31;
&nbsp;    public static final int T_ARMOR_BA_STEALTH = 32;
&nbsp;    public static final int T_ARMOR_BA_STEALTH_IMP = 33;
&nbsp;    public static final int T_ARMOR_BA_STEALTH_PROTOTYPE = 34;
&nbsp;    public static final int T_ARMOR_BA_FIRE_RESIST = 35;
&nbsp;    public static final int T_ARMOR_BA_MIMETIC = 36;
&nbsp;    public static final int T_ARMOR_BA_REFLECTIVE = 37;
&nbsp;    public static final int T_ARMOR_BA_REACTIVE = 38;
&nbsp;    public static final int T_ARMOR_PRIMITIVE_FIGHTER = 39;
&nbsp;    public static final int T_ARMOR_PRIMITIVE_AERO = 40;
&nbsp;    public static final int T_ARMOR_AEROSPACE = 41;
&nbsp;
&nbsp;    public static final int T_STRUCTURE_UNKNOWN = -1;
&nbsp;    public static final int T_STRUCTURE_STANDARD = 0;
&nbsp;    public static final int T_STRUCTURE_INDUSTRIAL = 1;
&nbsp;    public static final int T_STRUCTURE_ENDO_STEEL = 2;
&nbsp;    public static final int T_STRUCTURE_ENDO_PROTOTYPE = 3;
&nbsp;    public static final int T_STRUCTURE_REINFORCED = 4;
&nbsp;    public static final int T_STRUCTURE_COMPOSITE = 5;
&nbsp;    public static final int T_STRUCTURE_ENDO_COMPOSITE = 6;
&nbsp;
<b class="fc">&nbsp;    public static final String[] armorNames = { &quot;Standard&quot;, &quot;Ferro-Fibrous&quot;,</b>
&nbsp;            &quot;Reactive&quot;, &quot;Reflective&quot;, &quot;Hardened&quot;, &quot;Light Ferro-Fibrous&quot;,
&nbsp;            &quot;Heavy Ferro-Fibrous&quot;, &quot;Patchwork&quot;, &quot;Stealth&quot;,
&nbsp;            &quot;Ferro-Fibrous Prototype&quot;, &quot;Commercial&quot;, &quot;Ferro-Carbide&quot;,
&nbsp;            &quot;Lamellor Ferro-Carbide&quot;, &quot;Improved Ferro-Aluminum&quot;,
&nbsp;            /* extra space at the end on purpose */ &quot;Industrial &quot;,
&nbsp;            &quot;Heavy Industrial&quot;, &quot;Ferro-Lamellor&quot;, &quot;Primitive&quot;,
&nbsp;            &quot;Electric Discharge ProtoMech&quot;, &quot;Ferro-Aluminum&quot;,
&nbsp;            &quot;Heavy Ferro-Aluminum&quot;, &quot;Light Ferro-Aluminum&quot;,
&nbsp;            &quot;Vehicular Stealth&quot;, &quot;Anti-Penetrative Ablation&quot;,
&nbsp;            &quot;Heat-Dissipating&quot;, &quot;Impact-Resistant&quot;, &quot;Ballistic-Reinforced&quot;,
&nbsp;            &quot;Prototype Ferro-Aluminum&quot;, &quot;BA Standard (Basic)&quot;,
&nbsp;            &quot;BA Standard (Prototype)&quot;, &quot;BA Advanced&quot;, &quot;BA Stealth (Basic)&quot;,
&nbsp;            &quot;BA Stealth (Standard)&quot;, &quot;BA Stealth (Improved)&quot;, &quot;BA Stealth (Prototype)&quot;,
&nbsp;            &quot;BA Fire Resistant&quot;, &quot;BA Mimetic&quot;, &quot;BA Laser Reflective (Reflec/Glazed)&quot;, &quot;BA Reactive (Blazer)&quot;,
&nbsp;            &quot;Primitive Fighter&quot;, &quot;Primitive Aerospace&quot;, &quot;Standard Aerospace&quot;};
&nbsp;
&nbsp;
<b class="fc">&nbsp;    public static final String[] structureNames = { &quot;Standard&quot;, &quot;Industrial&quot;,</b>
&nbsp;            &quot;Endo Steel&quot;, &quot;Endo Steel Prototype&quot;, &quot;Reinforced&quot;, &quot;Composite&quot;,
&nbsp;            &quot;Endo-Composite&quot; };
&nbsp;
&nbsp;    // Assume for now that prototype is not more expensive
<b class="fc">&nbsp;    public static final double[] structureCosts = { 400, 300, 1600, 4800, 6400,</b>
&nbsp;            1600, 3200 };
&nbsp;
&nbsp;    // Assume for now that prototype is not more expensive
<b class="fc">&nbsp;    public static final double[] armorCosts = {</b>
&nbsp;            10000, 20000, 30000, 30000, 15000, 15000, 25000, /* patchwork */0, 50000, 60000,
&nbsp;            3000, 75000, 100000, 50000, 5000, 10000, 35000, 5000, 10000, 20000,
&nbsp;            25000, 15000, 50000, 15000, 25000, 20000, 25000, 60000, 10000, 10000,
&nbsp;            12500, 12000, 15000, 20000, 50000, 10000, 15000, 37000, 37000, 5000,
&nbsp;            5000, 10000};
&nbsp;
<b class="fc">&nbsp;    public static final double[] armorPointMultipliers = {</b>
&nbsp;            1, 1.12, 1, 1, 0.5, 1.06, 1.24, 1, 1, 1.12,
&nbsp;            1.5, 1.52, 1.72, 1.32, 0.67, 1.0, 0.875, 0.67, 1, 1.12,
&nbsp;            1.24, 1.06, 1, 0.75, 0.625, 0.875, 0.75, 1.12, 0.8, 1.6,
&nbsp;            0.64, 0.48, 0.96, 0.96, 1.6, 0.48, 0.8, 0.88, 0.96, 0.67,
&nbsp;            0.66, 1 };
&nbsp;
&nbsp;    public static final double POINT_MULTIPLIER_UNKNOWN = 1;
&nbsp;    public static final double POINT_MULTIPLIER_CLAN_FF = 1.2;
&nbsp;    public static final double POINT_ADDITION_CLAN_FF = 0.08;
&nbsp;
<b class="fc">&nbsp;    protected String name = null;</b>
&nbsp;
&nbsp;    // Short name for RS Printing
<b class="fc">&nbsp;    protected String shortName = &quot;&quot;;</b>
&nbsp;
<b class="fc">&nbsp;    protected String internalName = null;</b>
&nbsp;
<b class="fc">&nbsp;    private Vector&lt;String&gt; namesVector = new Vector&lt;String&gt;();</b>
&nbsp;
<b class="fc">&nbsp;    protected double tonnage = 0;</b>
<b class="fc">&nbsp;    protected int criticals = 0;</b>
<b class="fc">&nbsp;    protected int tankslots = 1;</b>
<b class="fc">&nbsp;    protected int svslots = MECH_SLOT_COST;</b>
&nbsp;
<b class="fc">&nbsp;    protected boolean explosive = false;</b>
<b class="fc">&nbsp;    protected boolean hittable = true; // if false, reroll critical hits</b>
&nbsp;
&nbsp;    /** can the crits for this be spread over locations? */
<b class="fc">&nbsp;    protected boolean spreadable = false;</b>
<b class="fc">&nbsp;    protected int toHitModifier = 0;</b>
&nbsp;
&nbsp;//    protected Map&lt;Integer,Integer&gt; techLevel = new HashMap&lt;&gt;();
&nbsp;    
<b class="fc">&nbsp;    protected TechAdvancement techAdvancement = new TechAdvancement();</b>
&nbsp;
<b class="fc">&nbsp;    protected BigInteger flags = BigInteger.valueOf(0);</b>
&nbsp;
<b class="fc">&nbsp;    protected long subType = 0;</b>
&nbsp;
<b class="fc">&nbsp;    protected double bv = 0; // battle value point system</b>
<b class="fc">&nbsp;    protected double cost = 0; // The C-Bill cost of the item.</b>
&nbsp;
&nbsp;    // For equipment that cannot be pod-mounted on an omni unit
<b class="fc">&nbsp;    protected boolean omniFixedOnly = false;</b>
&nbsp;
&nbsp;    /**
&nbsp;     * what modes can this equipment be in?
&nbsp;     */
<b class="fc">&nbsp;    protected Vector&lt;EquipmentMode&gt; modes = null;</b>
&nbsp;
&nbsp;    /**
&nbsp;     * can modes be switched instantly, or at end of turn?
&nbsp;     */
<b class="fc">&nbsp;    protected boolean instantModeSwitch = true;</b>
&nbsp;    /**
&nbsp;     * sometimes some modes can be switched at the end of turn and some
&nbsp;     * instantly In that case, the specific end of turn mode names can be added
&nbsp;     * here
&nbsp;     */
<b class="fc">&nbsp;    public Vector&lt;String&gt; endTurnModes = new Vector&lt;String&gt;();</b>
&nbsp;
&nbsp;    // static list of eq
&nbsp;    protected static Vector&lt;EquipmentType&gt; allTypes;
&nbsp;    protected static Hashtable&lt;String, EquipmentType&gt; lookupHash;
&nbsp;    
&nbsp;    /**
&nbsp;    * Keeps track of page numbers for rules references.
&nbsp;    */
<b class="fc">&nbsp;    public String rulesRefs = &quot;&quot;;</b>
&nbsp;
&nbsp;    /** Creates new EquipmentType */
<b class="fc">&nbsp;    public EquipmentType() {</b>
&nbsp;        // default constructor
<b class="fc">&nbsp;    }</b>
&nbsp;
&nbsp;    public void setFlags(BigInteger inF) {
<b class="nc">&nbsp;        flags = inF;</b>
<b class="nc">&nbsp;    }</b>
&nbsp;
&nbsp;    public long getSubType() {
<b class="nc">&nbsp;        return subType;</b>
&nbsp;    }
&nbsp;    
&nbsp;    public void setSubType(int newFlags) {
<b class="nc">&nbsp;        subType = newFlags;</b>
<b class="nc">&nbsp;    }</b>
&nbsp;
&nbsp;    public void addSubType(int newFlag) {
<b class="nc">&nbsp;        subType |= newFlag;</b>
<b class="nc">&nbsp;    }</b>
&nbsp;
&nbsp;    public boolean hasSubType(long testFlag) {
<b class="nc">&nbsp;        return (subType &amp; testFlag) != 0;</b>
&nbsp;    }
&nbsp;
&nbsp;    public String getName() {
<b class="fc">&nbsp;        return name;</b>
&nbsp;    }
&nbsp;
&nbsp;    public String getName(double size) {
<b class="fc">&nbsp;        return getName();</b>
&nbsp;    }
&nbsp;
&nbsp;    public String getDesc() {
<b class="nc">&nbsp;        String result = EquipmentMessages.getString(&quot;EquipmentType.&quot; + name);</b>
<b class="nc">&nbsp;        if (result != null) {</b>
<b class="nc">&nbsp;            return result;</b>
&nbsp;        }
<b class="nc">&nbsp;        return name;</b>
&nbsp;    }
&nbsp;
&nbsp;    public String getDesc(double size) {
<b class="nc">&nbsp;        return getDesc();</b>
&nbsp;    }
&nbsp;
&nbsp;    public String getInternalName() {
<b class="fc">&nbsp;        return internalName;</b>
&nbsp;    }
&nbsp;    
&nbsp;    public String getRulesRefs() {
<b class="nc">&nbsp;        return rulesRefs;</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * @deprecated The old tech progression system has been replaced by the TechAdvancement class.
&nbsp;     */
&nbsp;    @Deprecated
&nbsp;    public Map&lt;Integer, Integer&gt; getTechLevels() {
<b class="nc">&nbsp;        Map&lt;Integer,Integer&gt; techLevel = new HashMap&lt;&gt;();</b>
<b class="nc">&nbsp;        if (isUnofficial()) {</b>
<b class="nc">&nbsp;            if (techAdvancement.getTechBase() == TECH_BASE_CLAN) {</b>
<b class="nc">&nbsp;                techLevel.put(techAdvancement.getIntroductionDate(true), TechConstants.T_CLAN_UNOFFICIAL);</b>
&nbsp;            } else {
<b class="nc">&nbsp;                techLevel.put(techAdvancement.getIntroductionDate(true), TechConstants.T_IS_UNOFFICIAL);</b>
&nbsp;            }
<b class="nc">&nbsp;            return techLevel;</b>
&nbsp;        }
<b class="nc">&nbsp;        if (techAdvancement.getPrototypeDate(true) &gt; 0) {</b>
<b class="nc">&nbsp;            techLevel.put(techAdvancement.getPrototypeDate(true), TechConstants.T_CLAN_EXPERIMENTAL);</b>
&nbsp;        }
<b class="nc">&nbsp;        if (techAdvancement.getPrototypeDate(false) &gt; 0) {</b>
<b class="nc">&nbsp;            techLevel.put(techAdvancement.getPrototypeDate(false), TechConstants.T_IS_EXPERIMENTAL);</b>
&nbsp;        }
<b class="nc">&nbsp;        if (techAdvancement.getProductionDate(true) &gt; 0) {</b>
<b class="nc">&nbsp;            techLevel.put(techAdvancement.getProductionDate(true), TechConstants.T_CLAN_ADVANCED);</b>
&nbsp;        }
<b class="nc">&nbsp;        if (techAdvancement.getProductionDate(false) &gt; 0) {</b>
<b class="nc">&nbsp;            techLevel.put(techAdvancement.getProductionDate(false), TechConstants.T_IS_ADVANCED);</b>
&nbsp;        }
<b class="nc">&nbsp;        if (techAdvancement.getTechBase() == TECH_BASE_ALL</b>
<b class="nc">&nbsp;                &amp;&amp; techAdvancement.getCommonDate() &gt; 0) {</b>
<b class="nc">&nbsp;            techLevel.put(techAdvancement.getCommonDate(true), TechConstants.T_TW_ALL);</b>
<b class="nc">&nbsp;        } else if (techAdvancement.getCommonDate(true) &gt; 0) {</b>
<b class="nc">&nbsp;            techLevel.put(techAdvancement.getCommonDate(true), TechConstants.T_CLAN_TW);</b>
<b class="nc">&nbsp;        } else if (techAdvancement.getCommonDate(false) &gt; 0) {</b>
<b class="nc">&nbsp;            techLevel.put(techAdvancement.getCommonDate(false),</b>
<b class="nc">&nbsp;                    isIntroLevel()? TechConstants.T_INTRO_BOXSET : TechConstants.T_IS_TW_NON_BOX);</b>
&nbsp;        }
<b class="nc">&nbsp;        return techLevel;</b>
&nbsp;    }
&nbsp;
&nbsp;    public int getTechLevel(int date) {
<b class="fc">&nbsp;        return techAdvancement.getTechLevel(date);</b>
&nbsp;    }
&nbsp;    
&nbsp;    public int getTechLevel(int date, boolean clan) {
<b class="nc">&nbsp;        return techAdvancement.getTechLevel(date, clan);</b>
&nbsp;    }
&nbsp;    
&nbsp;    public SimpleTechLevel getStaticTechLevel() {
<b class="fc">&nbsp;        if (null != techAdvancement.getStaticTechLevel()) {</b>
<b class="fc">&nbsp;            return techAdvancement.getStaticTechLevel();</b>
&nbsp;        } else {
<b class="nc">&nbsp;            return techAdvancement.guessStaticTechLevel(rulesRefs);</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Calculates the weight of the equipment. If {@code entity} is {@code null}, equipment without
&nbsp;     * a fixed weight will return {@link EquipmentType#TONNAGE_VARIABLE}.
&nbsp;     *
&nbsp;     * @param entity The unit the equipment is mounted on
&nbsp;     * @return       The weight of the equipment in tons
&nbsp;     */
&nbsp;    public double getTonnage(@Nullable Entity entity) {
<b class="fc">&nbsp;        return getTonnage(entity, Entity.LOC_NONE, 1.0);</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Calculates the weight of the equipment. If {@code entity} is {@code null}, equipment without
&nbsp;     * a fixed weight will return {@link EquipmentType#TONNAGE_VARIABLE}.
&nbsp;     *
&nbsp;     * @param entity The unit the equipment is mounted on
&nbsp;     * @param size   The size of variable-sized equipment
&nbsp;     * @return       The weight of the equipment in tons
&nbsp;     */
&nbsp;    public double getTonnage(@Nullable Entity entity, double size) {
<b class="nc">&nbsp;        return getTonnage(entity, Entity.LOC_NONE, size);</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Calculates the weight of the equipment. If {@code entity} is {@code null}, equipment without
&nbsp;     * a fixed weight will return {@link EquipmentType#TONNAGE_VARIABLE}.
&nbsp;     *
&nbsp;     * @param entity   The unit the equipment is mounted on
&nbsp;     * @param location The mount location
&nbsp;     * @param size     The size (for variable-sized equipment)
&nbsp;     * @return         The weight of the equipment in tons
&nbsp;     */
&nbsp;    public double getTonnage(Entity entity, int location, double size) {
<b class="fc">&nbsp;        return tonnage;</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Calculates the weight of the equipment, with the option to override the standard rounding based on unit
&nbsp;     * type. This allows for the optional fractional accounting construction rules.
&nbsp;     * If {@code entity} is {@code null}, equipment without a fixed weight will
&nbsp;     * return {@link EquipmentType#TONNAGE_VARIABLE}.
&nbsp;     *
&nbsp;     * @param entity        The unit the equipment is mounted on
&nbsp;     * @param location      The mount location
&nbsp;     * @param size          The size (for variable-sized equipment)
&nbsp;     * @param defaultMethod The rounding method to use for any variable weight equipment. Any equipment
&nbsp;     *                      that is normally rounded to either the half ton or kg based on unit type
&nbsp;     *                      will have this method applied instead.
&nbsp;     * @return              The weight of the equipment in tons
&nbsp;     */
&nbsp;    public double getTonnage(Entity entity, int location, double size, RoundWeight defaultMethod) {
&nbsp;        // Default implementation does not deal with variable-weight equipment.
<b class="fc">&nbsp;        return getTonnage(entity, location, size);</b>
&nbsp;    }
&nbsp;
&nbsp;    void setTonnage(double tonnage) {
<b class="fc">&nbsp;        this.tonnage = tonnage;</b>
<b class="fc">&nbsp;    }</b>
&nbsp;
&nbsp;    public int getCriticals(Entity entity) {
<b class="fc">&nbsp;        return getCriticals(entity, 1.0);</b>
&nbsp;    }
&nbsp;
&nbsp;    public int getCriticals(Entity entity, double size) {
<b class="fc">&nbsp;        return criticals;</b>
&nbsp;    }
&nbsp;
&nbsp;    public int getTankSlots(Entity entity) {
<b class="nc">&nbsp;        return tankslots;</b>
&nbsp;    }
&nbsp;
&nbsp;    public int getSupportVeeSlots(Entity entity) {
<b class="nc">&nbsp;        if (svslots == MECH_SLOT_COST) {</b>
<b class="nc">&nbsp;            return getCriticals(entity);</b>
&nbsp;        }
<b class="nc">&nbsp;        return svslots;</b>
&nbsp;    }
&nbsp;
&nbsp;    public boolean isExplosive(Mounted mounted) {
<b class="nc">&nbsp;        return isExplosive(mounted, false);</b>
&nbsp;    }
&nbsp;
&nbsp;    public boolean isExplosive(Mounted mounted, boolean ignoreCharge) {
<b class="nc">&nbsp;        if(null == mounted) {</b>
<b class="nc">&nbsp;            return explosive;</b>
&nbsp;        }
&nbsp;        
&nbsp;        // Special case: discharged M- and B-pods shouldn&#39;t explode.
<b class="nc">&nbsp;        if (((this instanceof MPodWeapon) || (this instanceof BPodWeapon))</b>
<b class="nc">&nbsp;                &amp;&amp; ((mounted.getLinked() == null) || (mounted.getLinked()</b>
<b class="nc">&nbsp;                        .getUsableShotsLeft() == 0))) {</b>
<b class="nc">&nbsp;            return false;</b>
&nbsp;        }
&nbsp;
&nbsp;
&nbsp;        // special case: RISC laser pulse module are only explosive when the
&nbsp;        // laser they&#39;re linked to is working
<b class="nc">&nbsp;        if ((mounted.getType() instanceof MiscType) &amp;&amp; mounted.getType().hasFlag(MiscType.F_RISC_LASER_PULSE_MODULE)) {</b>
<b class="nc">&nbsp;            if ((mounted.getLinked() == null) || mounted.getLinked().isInoperable()) {</b>
<b class="nc">&nbsp;                return false;</b>
&nbsp;            }
&nbsp;        }
&nbsp;
&nbsp;        // special-case. RACs only explode when jammed
<b class="nc">&nbsp;        if ((mounted.getType() instanceof WeaponType)</b>
<b class="nc">&nbsp;                &amp;&amp; (((WeaponType) mounted.getType()).getAmmoType() == AmmoType.T_AC_ROTARY)) {</b>
<b class="nc">&nbsp;            if (!mounted.isJammed()) {</b>
<b class="nc">&nbsp;                return false;</b>
&nbsp;            }
&nbsp;        }
&nbsp;
&nbsp;        // special case. ACs only explode when firing incendiary ammo
<b class="nc">&nbsp;        if ((mounted.getType() instanceof WeaponType)</b>
<b class="nc">&nbsp;                &amp;&amp; ((((WeaponType) mounted.getType()).getAmmoType() == AmmoType.T_AC)</b>
<b class="nc">&nbsp;                        || (((WeaponType) mounted.getType()).getAmmoType() == AmmoType.T_LAC)</b>
<b class="nc">&nbsp;                        || (((WeaponType) mounted.getType()).getAmmoType() == AmmoType.T_AC_IMP)</b>
<b class="nc">&nbsp;                        || (((WeaponType) mounted.getType()).getAmmoType() == AmmoType.T_PAC))) {</b>
<b class="nc">&nbsp;            if (!mounted.isUsedThisRound()) {</b>
<b class="nc">&nbsp;                return false;</b>
&nbsp;            }
<b class="nc">&nbsp;            Mounted ammo = mounted.getLinked();</b>
<b class="nc">&nbsp;            if ((ammo == null) || !(ammo.getType() instanceof AmmoType)</b>
<b class="nc">&nbsp;                    || (((AmmoType) ammo.getType()).getMunitionType() != AmmoType.M_INCENDIARY_AC)) {</b>
<b class="nc">&nbsp;                return false;</b>
&nbsp;            }
&nbsp;        }
&nbsp;
&nbsp;        // special case. HVACs only explode when there&#39;s ammo left
<b class="nc">&nbsp;        if (mounted.getType() instanceof HVACWeapon) {</b>
<b class="nc">&nbsp;            if ((mounted.getEntity() == null)</b>
<b class="nc">&nbsp;                    || (mounted.getLinked() == null)</b>
<b class="nc">&nbsp;                    || (mounted.getEntity().getTotalAmmoOfType(</b>
<b class="nc">&nbsp;                            mounted.getLinked().getType()) == 0)) {</b>
<b class="nc">&nbsp;                return false;</b>
&nbsp;            }
&nbsp;        }
&nbsp;
&nbsp;        // special case. Blue Shield Particle Field Damper only explodes when
&nbsp;        // switched on
<b class="nc">&nbsp;        if ((mounted.getType() instanceof MiscType)</b>
<b class="nc">&nbsp;                &amp;&amp; (mounted.getType().hasFlag(MiscType.F_BLUE_SHIELD) &amp;&amp; mounted</b>
<b class="nc">&nbsp;                        .curMode().equals(&quot;Off&quot;))) {</b>
<b class="nc">&nbsp;            return false;</b>
&nbsp;        }
&nbsp;
&nbsp;        // special case. PPC with Capacitor only explodes when charged
<b class="nc">&nbsp;        if (ignoreCharge) {</b>
&nbsp;            // for BV purposes, we need to ignore the chargedness and check only
&nbsp;            // if there&#39;s a capacitor
<b class="nc">&nbsp;            if ((mounted.getType() instanceof PPCWeapon)</b>
<b class="nc">&nbsp;                    &amp;&amp; (mounted.getLinkedBy() != null)) {</b>
<b class="nc">&nbsp;                return true;</b>
&nbsp;            }
<b class="nc">&nbsp;            if ((mounted.getType() instanceof MiscType)</b>
<b class="nc">&nbsp;                    &amp;&amp; mounted.getType().hasFlag(MiscType.F_PPC_CAPACITOR)</b>
<b class="nc">&nbsp;                    &amp;&amp; (mounted.getLinked() != null)) {</b>
<b class="nc">&nbsp;                return true;</b>
&nbsp;            }
&nbsp;
&nbsp;        }
<b class="nc">&nbsp;        if ((mounted.getType() instanceof MiscType)</b>
<b class="nc">&nbsp;                &amp;&amp; mounted.getType().hasFlag(MiscType.F_PPC_CAPACITOR)</b>
<b class="nc">&nbsp;                &amp;&amp; !mounted.curMode().equals(&quot;Charge&quot;)) {</b>
<b class="nc">&nbsp;            return false;</b>
&nbsp;        }
<b class="nc">&nbsp;        if ((mounted.getType() instanceof PPCWeapon)</b>
<b class="nc">&nbsp;                &amp;&amp; (mounted.hasChargedCapacitor() == 0)) {</b>
<b class="nc">&nbsp;            return false;</b>
&nbsp;        }
&nbsp;
&nbsp;        // If we&#39;re here, then none of the special cases apply and we should
&nbsp;        // just return our own explosive status.
<b class="nc">&nbsp;        return explosive;</b>
&nbsp;    }
&nbsp;
&nbsp;    public boolean isHittable() {
<b class="fc">&nbsp;        return hittable;</b>
&nbsp;    }
&nbsp;
&nbsp;    // like margarine!
&nbsp;    public boolean isSpreadable() {
<b class="fc">&nbsp;        return spreadable;</b>
&nbsp;    }
&nbsp;
&nbsp;    public int getToHitModifier() {
<b class="nc">&nbsp;        return toHitModifier;</b>
&nbsp;    }
&nbsp;
&nbsp;    public BigInteger getFlags() {
<b class="nc">&nbsp;        return flags;</b>
&nbsp;    }
&nbsp;
&nbsp;    public boolean hasFlag(BigInteger flag) {
<b class="fc">&nbsp;        return !(flags.and(flag)).equals(BigInteger.valueOf(0));</b>
&nbsp;    }
&nbsp;
&nbsp;    public double getBV(Entity entity) {
<b class="nc">&nbsp;        return bv;</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * @return - whether the equipment must be considered part of the base chassis when
&nbsp;     *           mounted on an omni unit
&nbsp;     */
&nbsp;    public boolean isOmniFixedOnly() {
<b class="nc">&nbsp;        return omniFixedOnly;</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * @return &lt;code&gt;true&lt;/code&gt; if this type of equipment has set of modes that
&nbsp;     *         it can be in.
&nbsp;     */
&nbsp;    public boolean hasModes() {
<b class="fc">&nbsp;        return (modes != null) &amp;&amp; (!modes.isEmpty());</b>
&nbsp;    }
&nbsp;    
&nbsp;    /**
&nbsp;     * Simple way to check if a piece of equipment has a specific usage/firing mode
&nbsp;     * @param modeType The name of the mode to check.
&nbsp;     * @return True or false.
&nbsp;     */
&nbsp;    public boolean hasModeType(String modeType) {
<b class="nc">&nbsp;    	if(!hasModes()) {</b>
<b class="nc">&nbsp;    		return false;</b>
&nbsp;    	}
&nbsp;    	
<b class="nc">&nbsp;    	for(EquipmentMode mode : modes) {</b>
<b class="nc">&nbsp;    		if(mode.getName().equals(modeType)) {</b>
<b class="nc">&nbsp;    			return true;</b>
&nbsp;    		}
<b class="nc">&nbsp;    	}</b>
&nbsp;    	
<b class="nc">&nbsp;    	return false;</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * @return the number of modes that this type of equipment can be in or
&nbsp;     *         &lt;code&gt;0&lt;/code&gt; if it doesn&#39;t have modes.
&nbsp;     */
&nbsp;    public int getModesCount() {
<b class="fc">&nbsp;        if (modes != null) {</b>
<b class="fc">&nbsp;            return modes.size();</b>
&nbsp;        }
<b class="nc">&nbsp;        return 0;</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * @return &lt;code&gt;Enumeration&lt;/code&gt; of the &lt;code&gt;EquipmentMode&lt;/code&gt; that
&nbsp;     *         this type of equipment can be in
&nbsp;     */
&nbsp;    public Enumeration&lt;EquipmentMode&gt; getModes() {
<b class="nc">&nbsp;        if (modes != null) {</b>
<b class="nc">&nbsp;            return modes.elements();</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        return new Enumeration&lt;EquipmentMode&gt;() {</b>
&nbsp;            public boolean hasMoreElements() {
<b class="nc">&nbsp;                return false;</b>
&nbsp;            }
&nbsp;
&nbsp;            public EquipmentMode nextElement() {
<b class="nc">&nbsp;                return null;</b>
&nbsp;            }
&nbsp;
&nbsp;        };
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Sets the modes that this type of equipment can be in. By default the
&nbsp;     * EquipmentType doesn&#39;t have the modes, so don&#39;t try to call this method
&nbsp;     * with null or empty argument.
&nbsp;     *
&nbsp;     * @param modes
&nbsp;     *            non null, non empty list of available mode names.
&nbsp;     */
&nbsp;    protected void setModes(String[] modes) {
<b class="fc">&nbsp;        assert ((modes != null) &amp;&amp; (modes.length &gt; 0)) : &quot;List of modes must not be null or empty&quot;;</b>
<b class="fc">&nbsp;        Vector&lt;EquipmentMode&gt; newModes = new Vector&lt;EquipmentMode&gt;(modes.length);</b>
<b class="fc">&nbsp;        for (String mode : modes) {</b>
<b class="fc">&nbsp;            newModes.addElement(EquipmentMode.getMode(mode));</b>
&nbsp;        }
<b class="fc">&nbsp;        this.modes = newModes;</b>
<b class="fc">&nbsp;    }</b>
&nbsp;
&nbsp;    /**
&nbsp;     * Remove a specific mode from the list of modes.
&nbsp;     *
&nbsp;     * @param mode
&nbsp;     * @return
&nbsp;     */
&nbsp;    public boolean removeMode(String mode) {
<b class="fc">&nbsp;        if (modes != null) {</b>
<b class="nc">&nbsp;            return modes.remove(EquipmentMode.getMode(mode));</b>
&nbsp;        } else {
<b class="fc">&nbsp;            return false;</b>
&nbsp;        }
&nbsp;    }
&nbsp;    
&nbsp;    /**
&nbsp;     * Add a mode to the Equipment
&nbsp;     *
&nbsp;     * @param mode The mode to be added
&nbsp;     * @return true if the mode was added; false if modes was null or the mode was already present
&nbsp;     * @author Simon (Juliez)
&nbsp;     */
&nbsp;    public boolean addMode(String mode) {
<b class="nc">&nbsp;        if (modes == null) {</b>
<b class="nc">&nbsp;            modes = new Vector&lt;EquipmentMode&gt;();</b>
&nbsp;        }
<b class="nc">&nbsp;        if (!modes.contains(EquipmentMode.getMode(mode))) {</b>
<b class="nc">&nbsp;            return modes.add(EquipmentMode.getMode(mode));</b>
&nbsp;        } else {
<b class="nc">&nbsp;            return false;</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Clears the modes that this type of equipment can be in. This is useful
&nbsp;     * where a subtype such as Streak LRMs has no modes, but the supertype of
&nbsp;     * that type such as standard LRMs has modes that do not apply to the
&nbsp;     * subtype
&nbsp;     */
&nbsp;    protected void clearModes() {
<b class="fc">&nbsp;        modes = null;</b>
<b class="fc">&nbsp;    }</b>
&nbsp;
&nbsp;    public void addEndTurnMode(String mode) {
<b class="nc">&nbsp;        endTurnModes.add(mode);</b>
<b class="nc">&nbsp;    }</b>
&nbsp;
&nbsp;    /**
&nbsp;     * Some equipment types might have both instant and next turn mode
&nbsp;     * switching. This method checks for end of turn modes that are kept in a
&nbsp;     * vector of names. It is used by the {@link Mounted#setMode(int)} method to
&nbsp;     * distinguish instant and end of turn switching.
&nbsp;     *
&nbsp;     * @param mode
&nbsp;     *            - the &lt;code&gt;String&lt;/code&gt; of the mode name involved in the
&nbsp;     *            switch
&nbsp;     * @return true if the mode name is found in the next turn mode vector
&nbsp;     */
&nbsp;    public boolean isNextTurnModeSwitch(String mode) {
<b class="nc">&nbsp;        for (String modeName : endTurnModes) {</b>
<b class="nc">&nbsp;            if (modeName.equals(mode)) {</b>
<b class="nc">&nbsp;                return true;</b>
&nbsp;            }
<b class="nc">&nbsp;        }</b>
<b class="nc">&nbsp;        return false;</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * &lt;p&gt;
&nbsp;     * Returns the mode number &lt;code&gt;modeNum&lt;/code&gt; from the list of modes
&nbsp;     * available for this type of equipment. Modes are numbered from
&nbsp;     * &lt;code&gt;0&lt;code&gt; to
&nbsp;     * &lt;code&gt;getModesCount()-1&lt;/code&gt;
&nbsp;     * &lt;p&gt;
&nbsp;     * Fails if this type of the equipment doesn&#39;t have modes, or given mode is
&nbsp;     * out of the valid range.
&nbsp;     *
&nbsp;     * @param modeNum
&nbsp;     * @return mode number &lt;code&gt;modeNum&lt;/code&gt; from the list of modes available
&nbsp;     *         for this type of equipment.
&nbsp;     * @see #hasModes()
&nbsp;     */
&nbsp;    public EquipmentMode getMode(int modeNum) {
<b class="fc">&nbsp;        assert ((modes != null) &amp;&amp; (modeNum &gt;= 0) &amp;&amp; (modeNum &lt; modes.size())) : &quot;Invalid Mode&quot;;</b>
<b class="fc">&nbsp;        return modes.elementAt(modeNum);</b>
&nbsp;    }
&nbsp;
&nbsp;    public void setInstantModeSwitch(boolean b) {
<b class="fc">&nbsp;        instantModeSwitch = b;</b>
<b class="fc">&nbsp;    }</b>
&nbsp;
&nbsp;    public boolean hasInstantModeSwitch() {
<b class="fc">&nbsp;        return instantModeSwitch;</b>
&nbsp;    }
&nbsp;
&nbsp;    public void setInternalName(String s) {
<b class="fc">&nbsp;        internalName = s;</b>
<b class="fc">&nbsp;        addLookupName(s);</b>
<b class="fc">&nbsp;    }</b>
&nbsp;
&nbsp;    public void addLookupName(String s) {
<b class="fc">&nbsp;        EquipmentType.lookupHash.put(s.toLowerCase(), this); // static variable</b>
<b class="fc">&nbsp;        namesVector.addElement(s); // member variable</b>
<b class="fc">&nbsp;    }</b>
&nbsp;
&nbsp;    public static EquipmentType get(String key) {
<b class="fc">&nbsp;        if (null == EquipmentType.lookupHash) {</b>
<b class="fc">&nbsp;            EquipmentType.initializeTypes();</b>
&nbsp;        }
<b class="fc">&nbsp;        return EquipmentType.lookupHash.get(key.toLowerCase());</b>
&nbsp;    }
&nbsp;
&nbsp;    public Enumeration&lt;String&gt; getNames() {
<b class="fc">&nbsp;        return namesVector.elements();</b>
&nbsp;    }
&nbsp;
&nbsp;    public static void initializeTypes() {
<b class="fc">&nbsp;        if (null == EquipmentType.allTypes) {</b>
<b class="fc">&nbsp;            EquipmentType.allTypes = new Vector&lt;EquipmentType&gt;();</b>
<b class="fc">&nbsp;            EquipmentType.lookupHash = new Hashtable&lt;String, EquipmentType&gt;();</b>
&nbsp;
<b class="fc">&nbsp;            WeaponType.initializeTypes();</b>
<b class="fc">&nbsp;            AmmoType.initializeTypes();</b>
<b class="fc">&nbsp;            MiscType.initializeTypes();</b>
<b class="fc">&nbsp;            BombType.initializeTypes();</b>
<b class="fc">&nbsp;            SmallWeaponAmmoType.initializeTypes();</b>
<b class="fc">&nbsp;            for (EquipmentType et : allTypes) {</b>
<b class="fc">&nbsp;                if (et.getTechAdvancement().getStaticTechLevel() == null) {</b>
<b class="nc">&nbsp;                    et.getTechAdvancement().setStaticTechLevel(et.getTechAdvancement()</b>
<b class="nc">&nbsp;                            .guessStaticTechLevel(et.getRulesRefs()));</b>
&nbsp;                }
<b class="fc">&nbsp;            }</b>
&nbsp;        }
<b class="fc">&nbsp;    }</b>
&nbsp;
&nbsp;    public static Enumeration&lt;EquipmentType&gt; getAllTypes() {
<b class="fc">&nbsp;        if (null == EquipmentType.allTypes) {</b>
<b class="nc">&nbsp;            EquipmentType.initializeTypes();</b>
&nbsp;        }
<b class="fc">&nbsp;        return EquipmentType.allTypes.elements();</b>
&nbsp;    }
&nbsp;
&nbsp;    protected static void addType(EquipmentType type) {
<b class="fc">&nbsp;        if (null == EquipmentType.allTypes) {</b>
<b class="nc">&nbsp;            EquipmentType.initializeTypes();</b>
&nbsp;        }
<b class="fc">&nbsp;        EquipmentType.allTypes.addElement(type);</b>
<b class="fc">&nbsp;    }</b>
&nbsp;
&nbsp;    public static int getArmorType(EquipmentType et) {
<b class="fc">&nbsp;        if (null == et) {</b>
<b class="nc">&nbsp;            return T_ARMOR_UNKNOWN;</b>
&nbsp;        }
<b class="fc">&nbsp;        for (int x = 0; x &lt; armorNames.length; x++) {</b>
&nbsp;            // Some armor names (Industrial), have a space in the name, so trim
<b class="fc">&nbsp;            if (armorNames[x].trim().equals(et.getName().trim())) {</b>
<b class="fc">&nbsp;                return x;</b>
&nbsp;            }
&nbsp;        }
<b class="nc">&nbsp;        return T_ARMOR_UNKNOWN;</b>
&nbsp;    }
&nbsp;
&nbsp;    public static String getArmorTypeName(int armorType) {
<b class="fc">&nbsp;        if ((armorType &lt; 0) || (armorType &gt;= armorNames.length)) {</b>
<b class="fc">&nbsp;            return &quot;UNKNOWN&quot;;</b>
&nbsp;        }
<b class="fc">&nbsp;        return armorNames[armorType];</b>
&nbsp;    }
&nbsp;
&nbsp;    public static String getArmorTypeName(int armorType, boolean clan) {
<b class="fc">&nbsp;        if ((armorType &lt; 0) || (armorType &gt;= armorNames.length)) {</b>
<b class="fc">&nbsp;            return &quot;UNKNOWN&quot;;</b>
&nbsp;        }
<b class="fc">&nbsp;        return clan ? &quot;Clan &quot; + armorNames[armorType] : &quot;IS &quot;</b>
<b class="fc">&nbsp;                + armorNames[armorType];</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Convenience method to test whether an EquipmentType instance is armor. This works
&nbsp;     * by comparing the results of {@link #getName()} to the armor names array and returning
&nbsp;     * {@code true} if there is a match.
&nbsp;     *
&nbsp;     * @param et The equipment instance to test
&nbsp;     * @return   Whether the equipment is an armor type
&nbsp;     */
&nbsp;    public static boolean isArmorType(EquipmentType et) {
<b class="nc">&nbsp;        return getArmorType(et) != T_ARMOR_UNKNOWN;</b>
&nbsp;    }
&nbsp;    
&nbsp;    public static int getStructureType(EquipmentType et) {
<b class="fc">&nbsp;        if (et == null) {</b>
<b class="fc">&nbsp;            return T_STRUCTURE_UNKNOWN;</b>
&nbsp;        }
<b class="fc">&nbsp;        for (int x = 0; x &lt; structureNames.length; x++) {</b>
<b class="fc">&nbsp;            if (structureNames[x].equals(et.getName())) {</b>
<b class="fc">&nbsp;                return x;</b>
&nbsp;            }
&nbsp;        }
<b class="nc">&nbsp;        return T_STRUCTURE_UNKNOWN;</b>
&nbsp;    }
&nbsp;
&nbsp;    public static String getStructureTypeName(int structureType) {
<b class="fc">&nbsp;        if ((structureType &lt; 0) || (structureType &gt;= structureNames.length)) {</b>
<b class="nc">&nbsp;            return &quot;UNKNOWN&quot;;</b>
&nbsp;        }
<b class="fc">&nbsp;        return structureNames[structureType];</b>
&nbsp;    }
&nbsp;
&nbsp;    public static String getStructureTypeName(int structureType, boolean clan) {
<b class="fc">&nbsp;        if ((structureType &lt; 0) || (structureType &gt;= structureNames.length)) {</b>
<b class="fc">&nbsp;            return &quot;UNKNOWN&quot;;</b>
&nbsp;        }
<b class="fc">&nbsp;        return clan ? &quot;Clan &quot; + structureNames[structureType] : &quot;IS &quot;</b>
<b class="fc">&nbsp;                + structureNames[structureType];</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Convenience method to test whether an EquipmentType instance is mech structure. This works
&nbsp;     * by comparing the results of {@link #getName()} to the structure names array and returning
&nbsp;     * {@code true} if there is a match.
&nbsp;     *
&nbsp;     * @param et The equipment instance to test
&nbsp;     * @return   Whether the equipment is a structure type
&nbsp;     */
&nbsp;    public static boolean isStructureType(EquipmentType et) {
<b class="nc">&nbsp;        return getStructureType(et) != T_STRUCTURE_UNKNOWN;</b>
&nbsp;    }
&nbsp;
&nbsp;    public static String getBaArmorTypeName(int armorType) {
<b class="nc">&nbsp;        return getArmorTypeName(armorType);</b>
&nbsp;    }
&nbsp;
&nbsp;    public static String getBaArmorTypeName(int armorType, boolean clan) {
<b class="nc">&nbsp;        return getArmorTypeName(armorType, clan);</b>
&nbsp;    }
&nbsp;
&nbsp;    public static double getBaArmorWeightPerPoint(int type, boolean isClan) {
<b class="nc">&nbsp;        switch (type) {</b>
&nbsp;        case T_ARMOR_BA_STANDARD_PROTOTYPE:
<b class="nc">&nbsp;            return 0.1;</b>
&nbsp;        case T_ARMOR_BA_STANDARD_ADVANCED:
<b class="nc">&nbsp;            return 0.04;</b>
&nbsp;        case T_ARMOR_BA_STEALTH:
<b class="nc">&nbsp;            if (isClan) {</b>
<b class="nc">&nbsp;                return 0.035;</b>
&nbsp;            }
<b class="nc">&nbsp;            return 0.06;</b>
&nbsp;        case T_ARMOR_BA_STEALTH_BASIC:
<b class="nc">&nbsp;            if (isClan) {</b>
<b class="nc">&nbsp;                return 0.03;</b>
&nbsp;            }
<b class="nc">&nbsp;            return 0.055;</b>
&nbsp;        case T_ARMOR_BA_STEALTH_IMP:
<b class="nc">&nbsp;            if (isClan) {</b>
<b class="nc">&nbsp;                return 0.035;</b>
&nbsp;            }
<b class="nc">&nbsp;            return 0.06;</b>
&nbsp;        case T_ARMOR_BA_STEALTH_PROTOTYPE:
<b class="nc">&nbsp;            return 0.1;</b>
&nbsp;        case T_ARMOR_BA_FIRE_RESIST:
<b class="nc">&nbsp;            return 0.03;</b>
&nbsp;        case T_ARMOR_BA_MIMETIC:
<b class="nc">&nbsp;            return 0.05;</b>
&nbsp;        case T_ARMOR_BA_REFLECTIVE:
<b class="nc">&nbsp;            if (isClan) {</b>
<b class="nc">&nbsp;                return 0.03;</b>
&nbsp;            } else {
<b class="nc">&nbsp;                return 0.055;</b>
&nbsp;            }
&nbsp;        case T_ARMOR_BA_REACTIVE:
<b class="nc">&nbsp;            if (isClan) {</b>
<b class="nc">&nbsp;                return 0.035;</b>
&nbsp;            } else {
<b class="nc">&nbsp;                return 0.06;</b>
&nbsp;            }
&nbsp;        case T_ARMOR_BA_STANDARD:
&nbsp;        default:
<b class="nc">&nbsp;            if (isClan) {</b>
<b class="nc">&nbsp;                return 0.025;</b>
&nbsp;            }
<b class="nc">&nbsp;            return 0.05;</b>
&nbsp;        }
&nbsp;    }
&nbsp;    
&nbsp;    /**
&nbsp;     * Computes protomech armor weight by point.
&nbsp;     *  
&nbsp;     * @param type    The armor type
&nbsp;     * @return        The weight of a point of armor in kg
&nbsp;     */
&nbsp;    public static double getProtomechArmorWeightPerPoint(int type) {
<b class="nc">&nbsp;        if (type == T_ARMOR_EDP) {</b>
<b class="nc">&nbsp;            return 0.075;</b>
&nbsp;        }
<b class="nc">&nbsp;        return 0.05;</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Lookup method for protomech armor cost
&nbsp;     * @param type The type of armor.
&nbsp;     * @return     The cost per point in C-bills
&nbsp;     */
&nbsp;    public static int getProtomechArmorCostPerPoint(int type) {
&nbsp;        // currently only one type of specialized armor for protomechs; anything else is treated as standard
<b class="nc">&nbsp;        if (type == T_ARMOR_EDP) {</b>
<b class="nc">&nbsp;            return 1250;</b>
&nbsp;        }
<b class="nc">&nbsp;        return 625;</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Gives the weight of a single point of armor at a particular BAR for a
&nbsp;     * given tech level.
&nbsp;     */
<b class="fc">&nbsp;    private static final double[][] SV_ARMOR_WEIGHT =</b>
&nbsp;            {{0.0, 0.0, 0.0, 0.0, 0.0, 0.0},
&nbsp;                    {0.0, 0.0, 0.0, 0.0, 0.0, 0.0},
&nbsp;                    {.040, .025, .016, .013, .012, .011},
&nbsp;                    {.060, .038, .024, .019, .017, .016},
&nbsp;                    {.000, .050, .032, .026, .023, .021},
&nbsp;                    {.000, .063, .040, .032, .028, .026},
&nbsp;                    {.000, .000, .048, .038, .034, .032},
&nbsp;                    {.000, .000, .056, .045, .040, .037},
&nbsp;                    {.000, .000, .000, .051, .045, .042},
&nbsp;                    {.000, .000, .000, .057, .051, .047},
&nbsp;                    {.000, .000, .000, .063, .056, .052}};
&nbsp;
&nbsp;    /**
&nbsp;     * `Lookup method for the weight of a point of support vehicle armor.
&nbsp;     *
&nbsp;     * @param bar        The armor&#39;s barrier armor rating
&nbsp;     * @param techRating The armor&#39;s tech rating (0-5 corresponds to A-F)
&nbsp;     * @return           The weight of a point of armor in tons. Returns 0.0 for invalid value.
&nbsp;     */
&nbsp;    public static double getSupportVehicleArmorWeightPerPoint(int bar, int techRating) {
<b class="nc">&nbsp;        if ((bar &gt;= 0) &amp;&amp; (techRating &gt;= 0)</b>
&nbsp;                &amp;&amp; (bar &lt; SV_ARMOR_WEIGHT.length) &amp;&amp; (techRating &lt; SV_ARMOR_WEIGHT[bar].length)) {
<b class="nc">&nbsp;            return SV_ARMOR_WEIGHT[bar][techRating];</b>
&nbsp;        }
<b class="nc">&nbsp;        return 0.0;</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Cost in C-bills of a single point of SV armor for various BAR values.
&nbsp;     */
<b class="fc">&nbsp;    private static int[] SV_ARMOR_COST = {</b>
&nbsp;            0, 0, 50, 100, 150, 200, 250, 300, 400, 500, 625
&nbsp;    };
&nbsp;
&nbsp;    /**
&nbsp;     * Cost lookup for standard SV armor.
&nbsp;     *
&nbsp;     * @param bar The barrier armor rating of the support vehicle armor
&nbsp;     * @return    The cost per point, in C-bills.
&nbsp;     */
&nbsp;    public static double getSupportVehicleArmorCostPerPoint(int bar) {
<b class="nc">&nbsp;        if (bar &lt; 0) {</b>
<b class="nc">&nbsp;            return 0;</b>
&nbsp;        }
<b class="nc">&nbsp;        return SV_ARMOR_COST[Math.min(bar, SV_ARMOR_COST.length - 1)];</b>
&nbsp;    }
&nbsp;    
&nbsp;    /* Armor and structure are stored as integers and standard uses a generic MiscType that
&nbsp;     * does not have its own TechAdvancement.
&nbsp;     */
&nbsp;
<b class="fc">&nbsp;    protected static final TechAdvancement TA_STANDARD_ARMOR = new TechAdvancement(TECH_BASE_ALL)</b>
<b class="fc">&nbsp;            .setAdvancement(2460, 2470, 2470).setApproximate(true, false, false)</b>
<b class="fc">&nbsp;            .setTechRating(RATING_D).setAvailability(RATING_C, RATING_C, RATING_C, RATING_B)</b>
<b class="fc">&nbsp;            .setStaticTechLevel(SimpleTechLevel.INTRO);</b>
<b class="fc">&nbsp;    protected static final TechAdvancement TA_STANDARD_STRUCTURE = new TechAdvancement(TECH_BASE_ALL)</b>
<b class="fc">&nbsp;            .setAdvancement(2430, 2439, 2505).setApproximate(true, false, false).setIntroLevel(true)</b>
<b class="fc">&nbsp;            .setTechRating(RATING_D).setAvailability(RATING_C, RATING_C, RATING_C, RATING_C)</b>
<b class="fc">&nbsp;            .setStaticTechLevel(SimpleTechLevel.INTRO);</b>
<b class="fc">&nbsp;    protected static final TechAdvancement TA_NONE = new TechAdvancement(TECH_BASE_ALL)</b>
<b class="fc">&nbsp;            .setAdvancement(DATE_NONE).setTechRating(RATING_A)</b>
<b class="fc">&nbsp;            .setAvailability(RATING_A, RATING_A, RATING_A, RATING_A)</b>
<b class="fc">&nbsp;            .setStaticTechLevel(SimpleTechLevel.INTRO);</b>
<b class="fc">&nbsp;    private static final TechAdvancement[] TA_SV_ARMOR = {</b>
&nbsp;            TA_NONE, // Placeholder for index 0
&nbsp;            TA_NONE, // Placeholder for index 1
<b class="fc">&nbsp;            new TechAdvancement(TECH_BASE_ALL).setAdvancement(DATE_PS, DATE_PS, DATE_PS)</b>
<b class="fc">&nbsp;                    .setTechRating(RATING_A).setAvailability(RATING_A, RATING_A, RATING_A, RATING_A)</b>
<b class="fc">&nbsp;                    .setStaticTechLevel(SimpleTechLevel.STANDARD), // BAR 2</b>
<b class="fc">&nbsp;            new TechAdvancement(TECH_BASE_ALL).setAdvancement(DATE_PS, DATE_PS, DATE_PS)</b>
<b class="fc">&nbsp;                    .setTechRating(RATING_A).setAvailability(RATING_A, RATING_A, RATING_A, RATING_A)</b>
<b class="fc">&nbsp;                    .setStaticTechLevel(SimpleTechLevel.STANDARD), // BAR 3</b>
<b class="fc">&nbsp;            new TechAdvancement(TECH_BASE_ALL).setAdvancement(DATE_PS, DATE_PS, DATE_PS)</b>
<b class="fc">&nbsp;                    .setTechRating(RATING_B).setAvailability(RATING_B, RATING_B, RATING_A, RATING_A)</b>
<b class="fc">&nbsp;                    .setStaticTechLevel(SimpleTechLevel.STANDARD), // BAR 4</b>
<b class="fc">&nbsp;            new TechAdvancement(TECH_BASE_ALL).setAdvancement(DATE_ES, DATE_ES, DATE_ES)</b>
<b class="fc">&nbsp;                    .setTechRating(RATING_B).setAvailability(RATING_B, RATING_B, RATING_B, RATING_A)</b>
<b class="fc">&nbsp;                    .setStaticTechLevel(SimpleTechLevel.STANDARD), // BAR 5</b>
<b class="fc">&nbsp;            new TechAdvancement(TECH_BASE_ALL).setAdvancement(DATE_ES, DATE_ES, DATE_ES)</b>
<b class="fc">&nbsp;                    .setTechRating(RATING_C).setAvailability(RATING_C, RATING_B, RATING_B, RATING_A)</b>
<b class="fc">&nbsp;                    .setStaticTechLevel(SimpleTechLevel.STANDARD), // BAR 6</b>
<b class="fc">&nbsp;            new TechAdvancement(TECH_BASE_ALL).setAdvancement(2250, 2300, 2305)</b>
<b class="fc">&nbsp;                    .setApproximate(true, true, false).setPrototypeFactions(F_TA)</b>
<b class="fc">&nbsp;                    .setProductionFactions(F_TA).setTechRating(RATING_C)</b>
<b class="fc">&nbsp;                    .setAvailability(RATING_C, RATING_B, RATING_B, RATING_B)</b>
<b class="fc">&nbsp;                    .setStaticTechLevel(SimpleTechLevel.STANDARD), // BAR 7</b>
<b class="fc">&nbsp;            new TechAdvancement(TECH_BASE_ALL).setAdvancement(2425, 2435, 22445)</b>
<b class="fc">&nbsp;                    .setPrototypeFactions(F_TH).setProductionFactions(F_TH)</b>
<b class="fc">&nbsp;                    .setTechRating(RATING_D)</b>
<b class="fc">&nbsp;                    .setAvailability(RATING_C, RATING_C, RATING_B, RATING_B)</b>
<b class="fc">&nbsp;                    .setStaticTechLevel(SimpleTechLevel.STANDARD), // BAR 8</b>
<b class="fc">&nbsp;            new TechAdvancement(TECH_BASE_ALL).setAdvancement(2440, 2450, 2470)</b>
<b class="fc">&nbsp;                    .setPrototypeFactions(F_TH).setProductionFactions(F_TH)</b>
<b class="fc">&nbsp;                    .setTechRating(RATING_D)</b>
<b class="fc">&nbsp;                    .setAvailability(RATING_C, RATING_C, RATING_C, RATING_B)</b>
<b class="fc">&nbsp;                    .setStaticTechLevel(SimpleTechLevel.STANDARD), // BAR 9</b>
<b class="fc">&nbsp;            new TechAdvancement(TECH_BASE_ALL).setAdvancement(2460, 2470, 2505)</b>
<b class="fc">&nbsp;                    .setPrototypeFactions(F_TH).setProductionFactions(F_TH)</b>
<b class="fc">&nbsp;                    .setApproximate(true, false, false).setTechRating(RATING_D)</b>
<b class="fc">&nbsp;                    .setAvailability(RATING_D, RATING_D, RATING_D, RATING_C)</b>
<b class="fc">&nbsp;                    .setStaticTechLevel(SimpleTechLevel.STANDARD) // BAR 10</b>
&nbsp;    };
&nbsp;
&nbsp;    /**
&nbsp;     * Tech advancement for armor based on the armor type index and tech base
&nbsp;     * 
&nbsp;     * @param at   The armor type constant
&nbsp;     * @param clan The armor tech base
&nbsp;     * @return     The tech advancement for the armor
&nbsp;     */
&nbsp;    public static TechAdvancement getArmorTechAdvancement(int at, boolean clan) {
<b class="fc">&nbsp;        if (at == T_ARMOR_STANDARD) {</b>
<b class="fc">&nbsp;            return TA_STANDARD_ARMOR;</b>
&nbsp;        }
<b class="fc">&nbsp;        String armorName = EquipmentType.getArmorTypeName(at, clan);</b>
<b class="fc">&nbsp;        EquipmentType armor = EquipmentType.get(armorName);</b>
<b class="fc">&nbsp;        if (armor != null) {</b>
<b class="fc">&nbsp;            return armor.getTechAdvancement();</b>
&nbsp;        }
<b class="fc">&nbsp;        return TA_NONE;</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Tech advancement for support vehicle armor
&nbsp;     *
&nbsp;     * @param bar The armor&#39;s barrier armor rating
&nbsp;     * @return    The armor tech advancement
&nbsp;     */
&nbsp;    public static TechAdvancement getSVArmorTechAdvancement(int bar) {
<b class="nc">&nbsp;        if ((bar &gt;= 0) &amp;&amp; (bar &lt; TA_SV_ARMOR.length)) {</b>
<b class="nc">&nbsp;            return TA_SV_ARMOR[bar];</b>
&nbsp;        }
<b class="nc">&nbsp;        return TA_NONE;</b>
&nbsp;    }
&nbsp;
&nbsp;    public static TechAdvancement getStructureTechAdvancement(int at, boolean clan) {
<b class="fc">&nbsp;        if (at == T_STRUCTURE_STANDARD) {</b>
<b class="fc">&nbsp;            return TA_STANDARD_STRUCTURE;</b>
&nbsp;        }
<b class="fc">&nbsp;        String structureName = EquipmentType.getStructureTypeName(at, clan);</b>
<b class="fc">&nbsp;        EquipmentType structure = EquipmentType.get(structureName);</b>
<b class="fc">&nbsp;        if (structure != null) {</b>
<b class="nc">&nbsp;            return structure.getTechAdvancement();</b>
&nbsp;        }
<b class="fc">&nbsp;        return TA_NONE;</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * For variable-sized equipment this assumes a size of 1.0.
&nbsp;     *
&nbsp;     * @return The C-Bill cost of the piece of equipment.
&nbsp;     */
&nbsp;    public double getCost(Entity entity, boolean armored, int loc) {
<b class="nc">&nbsp;        return getCost(entity, armored, loc, 1.0);</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * @return The C-Bill cost of the piece of equipment.
&nbsp;     */
&nbsp;    public double getCost(Entity entity, boolean armored, int loc, double size) {
<b class="nc">&nbsp;        return cost;</b>
&nbsp;    }
&nbsp;
&nbsp;    public double getRawCost() {
<b class="nc">&nbsp;        return cost;</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * @return Whether the item weight varies according to the unit it&#39;s installed on
&nbsp;     */
&nbsp;    public boolean isVariableTonnage() {
<b class="nc">&nbsp;        return tonnage == TONNAGE_VARIABLE;</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * @return Whether the item BV varies according to the unit it&#39;s installed on
&nbsp;     */
&nbsp;    public boolean isVariableBV() {
<b class="nc">&nbsp;        return bv == BV_VARIABLE;</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * @return Whether the item cost varies according to the unit it&#39;s installed on
&nbsp;     */
&nbsp;    public boolean isVariableCost() {
<b class="nc">&nbsp;        return cost == COST_VARIABLE;</b>
&nbsp;    }
&nbsp;
&nbsp;    public boolean isVariableCriticals() {
<b class="nc">&nbsp;        return criticals == CRITICALS_VARIABLE;</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * @return Whether the item&#39;s size is variable independent of external factors
&nbsp;     */
&nbsp;    public boolean isVariableSize() {
<b class="fc">&nbsp;        return false;</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * @return The increment between sizes of variable-sized equipment
&nbsp;     */
&nbsp;    public Double variableStepSize() {
<b class="nc">&nbsp;        return 1.0;</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * @return The maximum size of variable-sized equipment. Items with no maximum
&nbsp;     *         return {@code null}.
&nbsp;     */
&nbsp;    public @Nullable Double variableMaxSize() {
<b class="nc">&nbsp;        return null;</b>
&nbsp;    }
&nbsp;
&nbsp;    public TechAdvancement getTechAdvancement() {
<b class="fc">&nbsp;        return techAdvancement;</b>
&nbsp;    }
&nbsp;
&nbsp;    public int getTechRating() {
<b class="fc">&nbsp;        return techAdvancement.getTechRating();</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * @deprecated Use {@link #calcEraAvailability(int,boolean) calcEraAvailability to get availability
&nbsp;     *      for IS/Clan in a given year, or {@link #getBaseAvailability(int) getBaseAvailability}
&nbsp;     *      to get the base code for the era type, or getBaseEraAvailability to get the base code.
&nbsp;     */
&nbsp;    @Deprecated
&nbsp;    public int getAvailability(int era) {
<b class="nc">&nbsp;        return calcEraAvailability(era);</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * @deprecated Use {@link #getYearAvailabilityName(int,boolean) getYearAvailabilityName}
&nbsp;     *      to get availability for IS or Clan in a specific year,
&nbsp;     *      or {@link #getEraAvailabilityName(int) getEraAvailabilityName to get code(s) for the era.
&nbsp;     */
&nbsp;    @Deprecated
&nbsp;    public String getAvailabilityName(int era) {
<b class="nc">&nbsp;        return getEraAvailabilityName(era);</b>
&nbsp;    }
&nbsp;
&nbsp;    public boolean isClan() {
<b class="fc">&nbsp;        return techAdvancement.getTechBase() == TECH_BASE_CLAN;</b>
&nbsp;    }
&nbsp;    
&nbsp;    public boolean isMixedTech() {
<b class="nc">&nbsp;        return techAdvancement.getTechBase() == TECH_BASE_ALL;</b>
&nbsp;    }
&nbsp;    
&nbsp;    public int getTechBase() {
<b class="fc">&nbsp;        return techAdvancement.getTechBase();</b>
&nbsp;    }
&nbsp;
&nbsp;    public static String getEquipDateAsString(int date) {
<b class="nc">&nbsp;        if (date == DATE_NONE) {</b>
<b class="nc">&nbsp;            return &quot;-&quot;;</b>
&nbsp;        } else {
<b class="nc">&nbsp;            return Integer.toString(date);</b>
&nbsp;        }
&nbsp;
&nbsp;    }
&nbsp;    
&nbsp;    @Override
&nbsp;    public int getIntroductionDate(boolean clan) {
<b class="fc">&nbsp;        return techAdvancement.getIntroductionDate(clan);</b>
&nbsp;    }
&nbsp;    
&nbsp;    @Override
&nbsp;    public int getIntroductionDate() {
<b class="fc">&nbsp;        return techAdvancement.getIntroductionDate();</b>
&nbsp;    }
&nbsp;    
&nbsp;    @Override
&nbsp;    public int getIntroductionDate(boolean clan, int faction) {
<b class="fc">&nbsp;        return techAdvancement.getIntroductionDate(clan, faction);</b>
&nbsp;    }
&nbsp;
&nbsp;    @Override
&nbsp;    public int getExtinctionDate(boolean clan) {
<b class="fc">&nbsp;        return techAdvancement.getExtinctionDate(clan);</b>
&nbsp;    }
&nbsp;
&nbsp;    @Override
&nbsp;    public int getExtinctionDate() {
<b class="fc">&nbsp;        return techAdvancement.getExtinctionDate();</b>
&nbsp;    }
&nbsp;
&nbsp;    @Override
&nbsp;    public int getExtinctionDate(boolean clan, int faction) {
<b class="fc">&nbsp;        return techAdvancement.getExtinctionDate(clan, faction);</b>
&nbsp;    }
&nbsp;
&nbsp;    @Override
&nbsp;    public int getReintroductionDate(boolean clan) {
<b class="nc">&nbsp;        return techAdvancement.getReintroductionDate(clan);</b>
&nbsp;    }
&nbsp;
&nbsp;    @Override
&nbsp;    public int getReintroductionDate() {
<b class="fc">&nbsp;        return techAdvancement.getReintroductionDate();</b>
&nbsp;    }
&nbsp;
&nbsp;    @Override
&nbsp;    public int getReintroductionDate(boolean clan, int faction) {
<b class="fc">&nbsp;        return techAdvancement.getReintroductionDate(clan, faction);</b>
&nbsp;    }
&nbsp;
&nbsp;    public static double getArmorCost(int inArmor) {
<b class="nc">&nbsp;        if ((inArmor &lt; 0) || (inArmor &gt;= armorCosts.length)) {</b>
<b class="nc">&nbsp;            return -1;</b>
&nbsp;        }
<b class="nc">&nbsp;        return armorCosts[inArmor];</b>
&nbsp;    }
&nbsp;
&nbsp;    public static double getStructureCost(int inStructure) {
<b class="nc">&nbsp;        if ((inStructure &lt; 0) || (inStructure &gt;= structureCosts.length)) {</b>
<b class="nc">&nbsp;            return -1;</b>
&nbsp;        }
<b class="nc">&nbsp;        return structureCosts[inStructure];</b>
&nbsp;    }
&nbsp;
&nbsp;    public static double getArmorPointMultiplier(int inArmor) {
<b class="nc">&nbsp;        return EquipmentType.getArmorPointMultiplier(inArmor,</b>
&nbsp;                TechConstants.T_IS_TW_NON_BOX);
&nbsp;    }
&nbsp;
&nbsp;    public static double getArmorPointMultiplier(int inArmor, int inTechLevel) {
<b class="fc">&nbsp;        return EquipmentType</b>
<b class="fc">&nbsp;                .getArmorPointMultiplier(</b>
&nbsp;                        inArmor,
&nbsp;                        ((inTechLevel == TechConstants.T_CLAN_TW) || (inTechLevel == TechConstants.T_CLAN_ADVANCED))
&nbsp;                                || (inTechLevel == TechConstants.T_CLAN_EXPERIMENTAL)
&nbsp;                                || (inTechLevel == TechConstants.T_CLAN_UNOFFICIAL));
&nbsp;    }
&nbsp;
&nbsp;    public static double getArmorPointMultiplier(int inArmor, boolean clanArmor) {
<b class="fc">&nbsp;        if ((inArmor &lt; 0) || (inArmor &gt;= armorPointMultipliers.length)) {</b>
<b class="fc">&nbsp;            return POINT_MULTIPLIER_UNKNOWN;</b>
&nbsp;        }
&nbsp;        /*
&nbsp;         * now handled in a single if statement
&nbsp;        if ((inArmor == T_ARMOR_FERRO_FIBROUS) &amp;&amp; clanArmor) {
&nbsp;            return POINT_MULTIPLIER_CLAN_FF;
&nbsp;        }
&nbsp;        if ((inArmor == T_ARMOR_ALUM) &amp;&amp; clanArmor) {
&nbsp;            return POINT_MULTIPLIER_CLAN_FF;
&nbsp;        }*/
&nbsp;        // Clan armors of these types have a multiplier exactly 0.08 higher than the I.S. variety
<b class="fc">&nbsp;        if (clanArmor &amp;&amp; ((inArmor == T_ARMOR_ALUM) || (inArmor == T_ARMOR_FERRO_FIBROUS))) {</b>
<b class="nc">&nbsp;            return armorPointMultipliers[inArmor] + POINT_ADDITION_CLAN_FF;</b>
&nbsp;
&nbsp;        }
<b class="fc">&nbsp;        return armorPointMultipliers[inArmor];</b>
&nbsp;    }
&nbsp;
&nbsp;    @Override
&nbsp;    public boolean equals(Object obj) {
<b class="fc">&nbsp;        if(this == obj) {</b>
<b class="fc">&nbsp;            return true;</b>
&nbsp;        }
<b class="fc">&nbsp;        if((null == obj) || (getClass() != obj.getClass())) {</b>
<b class="nc">&nbsp;            return false;</b>
&nbsp;        }
<b class="fc">&nbsp;        final EquipmentType other = (EquipmentType) obj;</b>
<b class="fc">&nbsp;        return Objects.equals(internalName, other.internalName);</b>
&nbsp;    }
&nbsp;    
&nbsp;    @Override
&nbsp;    public int hashCode() {
<b class="nc">&nbsp;        return Objects.hashCode(internalName);</b>
&nbsp;    }
&nbsp;
&nbsp;    public static void writeEquipmentDatabase(File f) {
&nbsp;        try {
<b class="nc">&nbsp;            BufferedWriter w = new BufferedWriter(new FileWriter(f));</b>
<b class="nc">&nbsp;            w.write(&quot;Megamek Equipment Database&quot;);</b>
<b class="nc">&nbsp;            w.newLine();</b>
<b class="nc">&nbsp;            w.write(&quot;This file can be regenerated with java -jar MegaMek.jar -eqdb &quot;);</b>
<b class="nc">&nbsp;            w.write(f.toString());</b>
<b class="nc">&nbsp;            w.newLine();</b>
<b class="nc">&nbsp;            w.write(&quot;Type,Tech Base,Rules,Name,Aliases&quot;);</b>
<b class="nc">&nbsp;            w.newLine();</b>
<b class="nc">&nbsp;            for (Enumeration&lt;EquipmentType&gt; e = EquipmentType.getAllTypes(); e</b>
<b class="nc">&nbsp;                    .hasMoreElements();) {</b>
<b class="nc">&nbsp;                EquipmentType type = e.nextElement();</b>
<b class="nc">&nbsp;                if (type instanceof AmmoType) {</b>
<b class="nc">&nbsp;                    w.write(&quot;A,&quot;);</b>
<b class="nc">&nbsp;                } else if (type instanceof WeaponType) {</b>
<b class="nc">&nbsp;                    w.write(&quot;W,&quot;);</b>
&nbsp;                } else {
<b class="nc">&nbsp;                    w.write(&quot;M,&quot;);</b>
&nbsp;                }
<b class="nc">&nbsp;                for (int year : type.getTechLevels().keySet()) {</b>
<b class="nc">&nbsp;                    w.write(year</b>
&nbsp;                            + &quot;-&quot;
<b class="nc">&nbsp;                            + TechConstants.getTechName(type.getTechLevel(year)));</b>
<b class="nc">&nbsp;                }</b>
<b class="nc">&nbsp;                w.write(&quot;,&quot;);</b>
<b class="nc">&nbsp;                for (int year : type.getTechLevels().keySet()) {</b>
<b class="nc">&nbsp;                    w.write(year</b>
&nbsp;                            + &quot;-&quot;
<b class="nc">&nbsp;                            + TechConstants.getLevelName(type</b>
<b class="nc">&nbsp;                                    .getTechLevel(year)));</b>
<b class="nc">&nbsp;                }</b>
<b class="nc">&nbsp;                w.write(&quot;,&quot;);</b>
<b class="nc">&nbsp;                for (Enumeration&lt;String&gt; names = type.getNames(); names</b>
<b class="nc">&nbsp;                        .hasMoreElements();) {</b>
<b class="nc">&nbsp;                    String name = names.nextElement();</b>
<b class="nc">&nbsp;                    w.write(name + &quot;,&quot;);</b>
<b class="nc">&nbsp;                }</b>
<b class="nc">&nbsp;                w.newLine();</b>
<b class="nc">&nbsp;            }</b>
<b class="nc">&nbsp;            w.flush();</b>
<b class="nc">&nbsp;            w.close();</b>
<b class="nc">&nbsp;        } catch (IOException e) {</b>
<b class="nc">&nbsp;            e.printStackTrace();</b>
<b class="nc">&nbsp;        }</b>
<b class="nc">&nbsp;    }</b>
&nbsp;
&nbsp;    public static void writeEquipmentExtendedDatabase(File f) {
&nbsp;        try {
<b class="nc">&nbsp;            BufferedWriter w = new BufferedWriter(new FileWriter(f));</b>
<b class="nc">&nbsp;            w.write(&quot;Megamek Equipment Extended Database&quot;);</b>
<b class="nc">&nbsp;            w.newLine();</b>
<b class="nc">&nbsp;            w.write(&quot;This file can be regenerated with java -jar MegaMek.jar -eqedb &quot;);</b>
<b class="nc">&nbsp;            w.write(f.toString());</b>
<b class="nc">&nbsp;            w.newLine();</b>
<b class="nc">&nbsp;            w.write(&quot;Type,Name,Tech Base,Rules,Tech Rating,Static Tech Level,Introduction Date,Prototype Date,Production Date,Common Date,Extinction Date,Re-Introduction Date,Tonnage,Crits,Cost,BV,Alias&quot;);</b>
<b class="nc">&nbsp;            w.newLine();</b>
<b class="nc">&nbsp;            for (Enumeration&lt;EquipmentType&gt; e = EquipmentType.getAllTypes(); e</b>
<b class="nc">&nbsp;                    .hasMoreElements();) {</b>
<b class="nc">&nbsp;                EquipmentType type = e.nextElement();</b>
<b class="nc">&nbsp;                if (type instanceof AmmoType) {</b>
<b class="nc">&nbsp;                    w.write(&quot;A&quot;);</b>
<b class="nc">&nbsp;                } else if (type instanceof WeaponType) {</b>
<b class="nc">&nbsp;                    w.write(&quot;W&quot;);</b>
&nbsp;                } else {
<b class="nc">&nbsp;                    w.write(&quot;M&quot;);</b>
&nbsp;                }
&nbsp;
<b class="nc">&nbsp;                w.write(&quot;,\&quot;&quot;);</b>
<b class="nc">&nbsp;                w.write(type.getName());</b>
&nbsp;
&nbsp;                // Gather the unique tech levels for this equipment ...
<b class="nc">&nbsp;                List&lt;Integer&gt; levels = type.getTechLevels().keySet().stream()</b>
<b class="nc">&nbsp;                        .map(year -&gt; type.getTechLevel(year))</b>
<b class="nc">&nbsp;                        .sorted()   // ordered for ease of use</b>
<b class="nc">&nbsp;                        .distinct()</b>
<b class="nc">&nbsp;                        .collect(Collectors.toList());</b>
&nbsp;
&nbsp;                // ... and use them to output the tech names ...
<b class="nc">&nbsp;                w.write(&quot;\&quot;,\&quot;&quot;);</b>
<b class="nc">&nbsp;                w.write(levels.stream()</b>
<b class="nc">&nbsp;                        .map(TechConstants::getTechName)</b>
<b class="nc">&nbsp;                        .distinct()</b>
<b class="nc">&nbsp;                        .collect(Collectors.joining(&quot;/&quot;)));</b>
&nbsp;
&nbsp;                // ... and associated rules levels.
<b class="nc">&nbsp;                w.write(&quot;\&quot;,\&quot;&quot;);</b>
<b class="nc">&nbsp;                w.write(levels.stream()</b>
<b class="nc">&nbsp;                        .map(TechConstants::getLevelName)</b>
<b class="nc">&nbsp;                        .distinct()</b>
<b class="nc">&nbsp;                        .collect(Collectors.joining(&quot;/&quot;)));</b>
&nbsp;
<b class="nc">&nbsp;                w.write(&quot;\&quot;,\&quot;&quot;);</b>
<b class="nc">&nbsp;                w.write(type.getFullRatingName());</b>
<b class="nc">&nbsp;                w.write(&quot;\&quot;,\&quot;&quot;);</b>
<b class="nc">&nbsp;                w.write(type.getTechAdvancement().getStaticTechLevel().toString());</b>
<b class="nc">&nbsp;                w.write(&quot;\&quot;,\&quot;&quot;);</b>
<b class="nc">&nbsp;                w.write(type.getTechAdvancement().getIntroductionDateName());</b>
<b class="nc">&nbsp;                w.write(&quot;\&quot;,\&quot;&quot;);</b>
<b class="nc">&nbsp;                w.write(type.getTechAdvancement().getPrototypeDateName());</b>
<b class="nc">&nbsp;                w.write(&quot;\&quot;,\&quot;&quot;);</b>
<b class="nc">&nbsp;                w.write(type.getTechAdvancement().getProductionDateName());</b>
<b class="nc">&nbsp;                w.write(&quot;\&quot;,\&quot;&quot;);</b>
<b class="nc">&nbsp;                w.write(type.getTechAdvancement().getCommonDateName());</b>
<b class="nc">&nbsp;                w.write(&quot;\&quot;,\&quot;&quot;);</b>
<b class="nc">&nbsp;                w.write(type.getTechAdvancement().getExtinctionDateName());</b>
<b class="nc">&nbsp;                w.write(&quot;\&quot;,\&quot;&quot;);</b>
<b class="nc">&nbsp;                w.write(type.getTechAdvancement().getReintroductionDateName());</b>
<b class="nc">&nbsp;                w.write(&quot;\&quot;,&quot;);</b>
<b class="nc">&nbsp;                if (type.tonnage == EquipmentType.TONNAGE_VARIABLE) {</b>
<b class="nc">&nbsp;                    w.write(&quot;Variable&quot;);</b>
&nbsp;                } else {
<b class="nc">&nbsp;                    w.write(Double.toString(type.tonnage));</b>
&nbsp;                }
<b class="nc">&nbsp;                w.write(&quot;,&quot;);</b>
<b class="nc">&nbsp;                if (type.criticals == EquipmentType.CRITICALS_VARIABLE) {</b>
<b class="nc">&nbsp;                    w.write(&quot;Variable&quot;);</b>
&nbsp;                } else {
<b class="nc">&nbsp;                    w.write(Integer.toString(type.criticals));</b>
&nbsp;                }
<b class="nc">&nbsp;                w.write(&quot;,&quot;);</b>
<b class="nc">&nbsp;                if (type.cost == EquipmentType.COST_VARIABLE) {</b>
<b class="nc">&nbsp;                    w.write(&quot;Variable&quot;);</b>
&nbsp;                } else {
<b class="nc">&nbsp;                    w.write(Double.toString(type.getCost(null, false, -1, 1.0)));</b>
&nbsp;                }
<b class="nc">&nbsp;                w.write(&quot;,&quot;);</b>
<b class="nc">&nbsp;                if (type.bv == EquipmentType.BV_VARIABLE) {</b>
<b class="nc">&nbsp;                    w.write(&quot;Variable&quot;);</b>
&nbsp;                } else {
<b class="nc">&nbsp;                    w.write(Double.toString(type.bv));</b>
&nbsp;                }
<b class="nc">&nbsp;                w.write(&quot;,&quot;);</b>
<b class="nc">&nbsp;                for (Enumeration&lt;String&gt; names = type.getNames(); names</b>
<b class="nc">&nbsp;                        .hasMoreElements();) {</b>
<b class="nc">&nbsp;                    String name = names.nextElement();</b>
<b class="nc">&nbsp;                    w.write(&quot;\&quot;&quot; + name + &quot;\&quot;,&quot;);</b>
<b class="nc">&nbsp;                }</b>
<b class="nc">&nbsp;                w.newLine();</b>
<b class="nc">&nbsp;            }</b>
<b class="nc">&nbsp;            w.flush();</b>
<b class="nc">&nbsp;            w.close();</b>
<b class="nc">&nbsp;        } catch (IOException e) {</b>
<b class="nc">&nbsp;            e.printStackTrace();</b>
<b class="nc">&nbsp;        }</b>
<b class="nc">&nbsp;    }</b>
&nbsp;
&nbsp;    @Override
&nbsp;    public String toString() {
<b class="nc">&nbsp;        return &quot;EquipmentType: &quot; + name;</b>
&nbsp;    }
&nbsp;
&nbsp;    protected static GameOptions getGameOptions() {
<b class="nc">&nbsp;        if (Server.getServerInstance() == null) {</b>
<b class="nc">&nbsp;            return null;</b>
<b class="nc">&nbsp;        } else if (Server.getServerInstance().getGame() == null) {</b>
<b class="nc">&nbsp;            return null;</b>
&nbsp;        }
<b class="nc">&nbsp;        return Server.getServerInstance().getGame().getOptions();</b>
&nbsp;    }
&nbsp;
&nbsp;    public String getShortName() {
<b class="nc">&nbsp;        if (shortName.trim().isEmpty()) {</b>
<b class="nc">&nbsp;            return getName();</b>
&nbsp;        }
<b class="nc">&nbsp;        return shortName;</b>
&nbsp;    }
&nbsp;
&nbsp;    public String getShortName(double size) {
<b class="nc">&nbsp;        return getShortName();</b>
&nbsp;    }
&nbsp;
&nbsp;    @Override
&nbsp;    public boolean isIntroLevel() {
<b class="fc">&nbsp;        return techAdvancement.isIntroLevel();</b>
&nbsp;    }
&nbsp;
&nbsp;    @Override
&nbsp;    public boolean isUnofficial() {
<b class="fc">&nbsp;        return techAdvancement.isUnofficial();</b>
&nbsp;    }
&nbsp;
&nbsp;    @Override
&nbsp;    public int getPrototypeDate() {
<b class="fc">&nbsp;        return techAdvancement.getPrototypeDate();</b>
&nbsp;    }
&nbsp;
&nbsp;    @Override
&nbsp;    public int getPrototypeDate(boolean clan, int faction) {
<b class="fc">&nbsp;        return techAdvancement.getPrototypeDate(clan, faction);</b>
&nbsp;    }
&nbsp;
&nbsp;    @Override
&nbsp;    public int getProductionDate() {
<b class="fc">&nbsp;        return techAdvancement.getProductionDate();</b>
&nbsp;    }
&nbsp;
&nbsp;    @Override
&nbsp;    public int getProductionDate(boolean clan, int faction) {
<b class="fc">&nbsp;        return techAdvancement.getProductionDate(clan, faction);</b>
&nbsp;    }
&nbsp;
&nbsp;    @Override
&nbsp;    public int getCommonDate() {
<b class="fc">&nbsp;        return techAdvancement.getCommonDate();</b>
&nbsp;    }
&nbsp;
&nbsp;    @Override
&nbsp;    public int getBaseAvailability(int era) {
<b class="fc">&nbsp;        return techAdvancement.getBaseAvailability(era);</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * This does not include heat generated by stealth armor, as that depends on whether
&nbsp;     * it is installed as patchwork and does not appear in the equipment list of all unit types.
&nbsp;     * 
&nbsp;     * @return The amount of heat generated by the equipment
&nbsp;     */
&nbsp;    public int getHeat() {
<b class="nc">&nbsp;        return 0;</b>
&nbsp;    }
&nbsp;}
</code>
</pre>
</div>

<script type="text/javascript">
(function() {
    var msie = false, msie9 = false;
    /*@cc_on
      msie = true;
      @if (@_jscript_version >= 9)
        msie9 = true;
      @end
    @*/

    if (!msie || msie && msie9) {
      hljs.highlightAll()
      hljs.initLineNumbersOnLoad();
    }
})();
</script>

<div class="footer">
    
    <div style="float:right;">generated on 2023-05-16 16:28</div>
</div>
</body>
</html>
