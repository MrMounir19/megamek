


<!DOCTYPE html>
<html id="htmlId">
<head>
  <title>Coverage Report > BayData</title>
  <style type="text/css">
    @import "../../css/coverage.css";
    @import "../../css/idea.min.css";
  </style>
  <script type="text/javascript" src="../../js/highlight.min.js"></script>
  <script type="text/javascript" src="../../js/highlightjs-line-numbers.min.js"></script>
</head>

<body>
<div class="content">
<div class="breadCrumbs">
Current scope:     <a href="../../index.html">all classes</a>
    <span class="separator">|</span>
    <a href="../index.html">megamek.common.verifier</a>
</div>

<h1>Coverage Summary for Class: BayData (megamek.common.verifier)</h1>

<table class="coverageStats">

<tr>
  <th class="name">Class</th>
<th class="coverageStat 
">
  Method, %
</th>
<th class="coverageStat 
">
  Line, %
</th>
</tr>
<tr>
  <td class="name">BayData</td>
<td class="coverageStat">
  <span class="percent">
    30%
  </span>
  <span class="absValue">
    (12/40)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    70.4%
  </span>
  <span class="absValue">
    (88/125)
  </span>
</td>
</tr>
  <tr>
    <td class="name">BayData$1</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (1/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (1/1)
  </span>
</td>
  </tr>
<tr>
  <td class="name"><strong>Total</strong></td>
<td class="coverageStat">
  <span class="percent">
    31.7%
  </span>
  <span class="absValue">
    (13/41)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    70.6%
  </span>
  <span class="absValue">
    (89/126)
  </span>
</td>
</tr>
</table>

<br/>
<br/>


<pre>
<code class="sourceCode" id="sourceCode">&nbsp;/*
&nbsp; * MegaMek - Copyright (C) 2018 - The MegaMek Team
&nbsp; *
&nbsp; * This program is free software; you can redistribute it and/or modify it under
&nbsp; * the terms of the GNU General Public License as published by the Free Software
&nbsp; * Foundation; either version 2 of the License, or (at your option) any later
&nbsp; * version.
&nbsp; *
&nbsp; * This program is distributed in the hope that it will be useful, but WITHOUT
&nbsp; * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS
&nbsp; * FOR A PARTICULAR PURPOSE. See the GNU General Public License for more
&nbsp; * details.
&nbsp; */
&nbsp;package megamek.common.verifier;
&nbsp;
&nbsp;import java.util.function.BiFunction;
&nbsp;
&nbsp;import megamek.common.*;
&nbsp;import megamek.common.annotations.Nullable;
&nbsp;
&nbsp;/**
&nbsp; * Construction data used by transport bays for mechs, vees, and aerospace units.
&nbsp; * 
&nbsp; * @author Neoancient
&nbsp; *
&nbsp; */
<b class="fc">&nbsp;public enum BayData {</b>
<b class="fc">&nbsp;    MECH (&quot;Mech&quot;, 150.0, 2, MechBay.techAdvancement(),</b>
<b class="nc">&nbsp;            (size, num) -&gt; new MechBay(size, 1, num)),</b>
<b class="fc">&nbsp;    PROTOMECH (&quot;Protomech&quot;, 10.0, 6, ProtomechBay.techAdvancement(),</b>
<b class="nc">&nbsp;            (size, num) -&gt; new ProtomechBay(size, 1, num)),</b>
<b class="fc">&nbsp;    VEHICLE_HEAVY (&quot;Heavy Vehicle&quot;, 100.0, 8, HeavyVehicleBay.techAdvancement(),</b>
<b class="nc">&nbsp;            (size, num) -&gt; new HeavyVehicleBay(size, 1, num)),</b>
<b class="fc">&nbsp;    VEHICLE_LIGHT (&quot;Light Vehicle&quot;, 50.0, 5, LightVehicleBay.techAdvancement(),</b>
<b class="nc">&nbsp;            (size, num) -&gt; new LightVehicleBay(size, 1, num)),</b>
<b class="fc">&nbsp;    VEHICLE_SH (&quot;Superheavy Vehicle&quot;, 200.0, 15, SuperHeavyVehicleBay.techAdvancement(),</b>
<b class="nc">&nbsp;            (size, num) -&gt; new SuperHeavyVehicleBay(size, 1, num)),</b>
<b class="fc">&nbsp;    INFANTRY_FOOT (&quot;Infantry (Foot)&quot;, 5.0, 0, InfantryBay.techAdvancement(),</b>
<b class="nc">&nbsp;            (size, num) -&gt; new InfantryBay(size, 1, num, InfantryBay.PlatoonType.FOOT)),</b>
<b class="fc">&nbsp;    INFANTRY_JUMP (&quot;Infantry (Jump)&quot;, 6.0, 0, InfantryBay.techAdvancement(),</b>
<b class="nc">&nbsp;            (size, num) -&gt; new InfantryBay(size, 1, num, InfantryBay.PlatoonType.JUMP)),</b>
<b class="fc">&nbsp;    INFANTRY_MOTORIZED (&quot;Infantry (Motorized)&quot;, 7.0, 0, InfantryBay.techAdvancement(),</b>
<b class="nc">&nbsp;            (size, num) -&gt; new InfantryBay(size, 1, num, InfantryBay.PlatoonType.MOTORIZED)),</b>
<b class="fc">&nbsp;    INFANTRY_MECHANIZED (&quot;Infantry (Mech. Squad)&quot;, 8.0, 0, InfantryBay.techAdvancement(),</b>
<b class="nc">&nbsp;            (size, num) -&gt; new InfantryBay(size, 1, num, InfantryBay.PlatoonType.MECHANIZED)),</b>
<b class="fc">&nbsp;    IS_BATTLE_ARMOR (&quot;BattleArmor (IS)&quot;, 8.0, 6, BattleArmorBay.techAdvancement(),</b>
<b class="nc">&nbsp;            (size, num) -&gt; new BattleArmorBay(size, 1, num, false, false)),</b>
<b class="fc">&nbsp;    CLAN_BATTLE_ARMOR (&quot;BattleArmor (Clan)&quot;, 10.0, 6, BattleArmorBay.techAdvancement(),</b>
<b class="nc">&nbsp;            (size, num) -&gt; new BattleArmorBay(size, 1, num, true, false)),</b>
<b class="fc">&nbsp;    CS_BATTLE_ARMOR (&quot;BattleArmor (CS)&quot;, 12.0, 6, BattleArmorBay.techAdvancement(),</b>
<b class="nc">&nbsp;            (size, num) -&gt; new BattleArmorBay(size, 1, num, false, true)),</b>
<b class="fc">&nbsp;    FIGHTER (&quot;Fighter&quot;, 150.0, 2, ASFBay.techAdvancement(),</b>
<b class="nc">&nbsp;            (size, num) -&gt; new ASFBay(size, 1, num)),</b>
<b class="fc">&nbsp;    SMALL_CRAFT (&quot;Small Craft&quot;, 200.0, 5, SmallCraftBay.techAdvancement(),</b>
<b class="nc">&nbsp;            (size, num) -&gt; new SmallCraftBay(size, 1, num)),</b>
<b class="fc">&nbsp;    DROPSHUTTLE (&quot;Dropshuttle&quot;, 11000.0, 0, DropshuttleBay.techAdvancement(),</b>
<b class="nc">&nbsp;            (size, num) -&gt; new DropshuttleBay(1, num, 0)),</b>
<b class="fc">&nbsp;    REPAIR_UNPRESSURIZED (&quot;Standard Repair Facility (Unpressurized)&quot;, 0.025, 0, NavalRepairFacility.techAdvancement(),</b>
<b class="nc">&nbsp;            (size, num) -&gt; new NavalRepairFacility(size, 1, num, 0, false)),</b>
<b class="fc">&nbsp;    REPAIR_PRESSURIZED (&quot;Standard Repair Facility (Pressurized)&quot;, 0.075, 0, NavalRepairFacility.techAdvancement(),</b>
<b class="nc">&nbsp;            (size, num) -&gt; new NavalRepairFacility(size, 1, num, 0, true)),</b>
<b class="fc">&nbsp;    REPAIR_REINFORCED (&quot;Reinforced Repair Facility&quot;, 0.1, 0, ReinforcedRepairFacility.techAdvancement(),</b>
<b class="nc">&nbsp;            (size, num) -&gt; new ReinforcedRepairFacility(size, 1, num, 0)),</b>
<b class="fc">&nbsp;    ARTS_FIGHTER (&quot;ARTS Fighter&quot;, 187.5, 0, Bay.artsTechAdvancement(),</b>
<b class="nc">&nbsp;            (size, num) -&gt; new ASFBay(size, 1, num, true)),</b>
<b class="fc">&nbsp;    ARTS_SMALL_CRAFT (&quot;ARTS Small Craft&quot;, 250.0, 0, Bay.artsTechAdvancement(),</b>
<b class="nc">&nbsp;            (size, num) -&gt; new SmallCraftBay(size, 1, num, true)),</b>
<b class="fc">&nbsp;    ARTS_REPAIR_UNPRESSURIZED (&quot;ARTS Standard Repair Facility (Unpressurized)&quot;, 0.03125, 0, Bay.artsTechAdvancement(),</b>
<b class="nc">&nbsp;            (size, num) -&gt; new NavalRepairFacility(size, 1, num, 0, false, true)),</b>
<b class="fc">&nbsp;    ARTS_REPAIR_PRESSURIZED (&quot;ARTS Standard Repair Facility (Pressurized)&quot;, 0.09375, 0, Bay.artsTechAdvancement(),</b>
<b class="nc">&nbsp;            (size, num) -&gt; new NavalRepairFacility(size, 1, num, 0, true, true)),</b>
<b class="fc">&nbsp;    CARGO (&quot;Cargo&quot;, 1.0, 0, CargoBay.techAdvancement(),</b>
<b class="fc">&nbsp;            (size, num) -&gt; new CargoBay(size, 1, num)),</b>
<b class="fc">&nbsp;    LIQUID_CARGO (&quot;Cargo (Liquid)&quot;, 1/0.91, 0, CargoBay.techAdvancement(),</b>
<b class="fc">&nbsp;            (size, num) -&gt; new LiquidCargoBay(size, 1, num)),</b>
<b class="fc">&nbsp;    REFRIGERATED_CARGO (&quot;Cargo (Refrigerated)&quot;, 1/0.87, 0, CargoBay.techAdvancement(),</b>
<b class="fc">&nbsp;            (size, num) -&gt; new RefrigeratedCargoBay(size, 1, num)),</b>
<b class="fc">&nbsp;    INSULATED_CARGO (&quot;Cargo (Insulated)&quot;, 1/0.87, 0, CargoBay.techAdvancement(),</b>
<b class="fc">&nbsp;            (size, num) -&gt; new InsulatedCargoBay(size, 1, num)),</b>
<b class="fc">&nbsp;    LIVESTOCK_CARGO (&quot;Cargo Livestock)&quot;, 1/0.83, 0, CargoBay.techAdvancement(),</b>
<b class="fc">&nbsp;            (size, num) -&gt; new LivestockCargoBay(size, 1, num));</b>
&nbsp;    
&nbsp;    private final String name;
&nbsp;    private final double weight;
&nbsp;    private final int personnel;
&nbsp;    private final TechAdvancement techAdvancement;
&nbsp;    private final BiFunction&lt;Double,Integer,Bay&gt; init;
&nbsp;    
&nbsp;    BayData(String name, double weight, int personnel,
<b class="fc">&nbsp;            TechAdvancement techAdvancement, BiFunction&lt;Double,Integer,Bay&gt; init) {</b>
<b class="fc">&nbsp;        this.name = name;</b>
<b class="fc">&nbsp;        this.weight = weight;</b>
<b class="fc">&nbsp;        this.personnel = personnel;</b>
<b class="fc">&nbsp;        this.techAdvancement = techAdvancement;</b>
<b class="fc">&nbsp;        this.init = init;</b>
<b class="fc">&nbsp;    }</b>
&nbsp;    
&nbsp;    /**
&nbsp;     * @return A String identifying the type of bay suitable for display.
&nbsp;     */
&nbsp;    public String getDisplayName() {
<b class="nc">&nbsp;        return name;</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * The weight of a single unit of capacity. For unit transport bays this is the weight of a single
&nbsp;     * cubicle. For cargo this is the weight of one ton of cargo capacity. 
&nbsp;     * 
&nbsp;     * @return The weight of a single unit.
&nbsp;     */
&nbsp;    public double getWeight() {
<b class="fc">&nbsp;        return weight;</b>
&nbsp;    }
&nbsp;    
&nbsp;    /**
&nbsp;     * @return The number of bay personnel normally quartered per unit capacity.
&nbsp;     */
&nbsp;    public int getPersonnel() {
<b class="nc">&nbsp;        return personnel;</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Creates a new bay of the type.
&nbsp;     * 
&nbsp;     * @param size    The size of bay in cubicles (units) or tons (cargo; this is bay tonnage, not capacity).
&nbsp;     * @param bayNum  The bay number; this should be unique for the unit.
&nbsp;     * @return        The new bay.
&nbsp;     */
&nbsp;    public Bay newBay(double size, int bayNum) {
<b class="fc">&nbsp;        if (isCargoBay()) {</b>
&nbsp;            // Remove floating point inaccuracy
<b class="fc">&nbsp;            return init.apply(RoundWeight.nearestKg(size / weight), bayNum);</b>
&nbsp;        } else {
<b class="nc">&nbsp;            return init.apply(size, bayNum);</b>
&nbsp;        }
&nbsp;    }
&nbsp;    
&nbsp;    /**
&nbsp;     * @return The tech progression for the bay type.
&nbsp;     */
&nbsp;    public TechAdvancement getTechAdvancement() {
<b class="nc">&nbsp;        return techAdvancement;</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Identifies the type of bay.
&nbsp;     * 
&nbsp;     * @param bay A &lt;code&gt;Bay&lt;/code&gt; that is (or can be) mounted on a unit. 
&nbsp;     * @return    The enum value for the bay. Returns null if the bay is not a transport by
&nbsp;     *            (e.g. crew quarters)
&nbsp;     */
&nbsp;    public static @Nullable BayData getBayType(Bay bay) {
<b class="fc">&nbsp;        if (bay instanceof MechBay) {</b>
<b class="fc">&nbsp;            return MECH;</b>
<b class="fc">&nbsp;        } else if (bay instanceof ProtomechBay) {</b>
<b class="fc">&nbsp;            return PROTOMECH;</b>
<b class="fc">&nbsp;        } else if (bay instanceof HeavyVehicleBay) {</b>
<b class="fc">&nbsp;            return VEHICLE_HEAVY;</b>
<b class="fc">&nbsp;        } else if (bay instanceof LightVehicleBay) {</b>
<b class="fc">&nbsp;            return VEHICLE_LIGHT;</b>
<b class="fc">&nbsp;        } else if (bay instanceof SuperHeavyVehicleBay) {</b>
<b class="fc">&nbsp;            return VEHICLE_SH;</b>
<b class="fc">&nbsp;        } else if (bay instanceof InfantryBay) {</b>
<b class="fc">&nbsp;            switch (((InfantryBay) bay).getPlatoonType()) {</b>
&nbsp;                case JUMP:
<b class="fc">&nbsp;                    return INFANTRY_JUMP;</b>
&nbsp;                case MECHANIZED:
<b class="fc">&nbsp;                    return INFANTRY_MECHANIZED;</b>
&nbsp;                case MOTORIZED:
<b class="fc">&nbsp;                    return INFANTRY_MOTORIZED;</b>
&nbsp;                case FOOT:
&nbsp;                default:
<b class="fc">&nbsp;                    return INFANTRY_FOOT;</b>
&nbsp;                
&nbsp;            }
<b class="fc">&nbsp;        } else if (bay instanceof BattleArmorBay) {</b>
<b class="fc">&nbsp;            if (bay.getWeight() / bay.getCapacity() == 12) {</b>
<b class="fc">&nbsp;                return CS_BATTLE_ARMOR;</b>
<b class="fc">&nbsp;            } else if (bay.getWeight() / bay.getCapacity() == 10) {</b>
<b class="fc">&nbsp;                return CLAN_BATTLE_ARMOR;</b>
&nbsp;            }
<b class="fc">&nbsp;            return IS_BATTLE_ARMOR;</b>
<b class="fc">&nbsp;        } else if (bay instanceof ASFBay) {</b>
<b class="fc">&nbsp;            return ((ASFBay) bay).hasARTS() ? ARTS_FIGHTER : FIGHTER;</b>
<b class="fc">&nbsp;        } else if (bay instanceof DropshuttleBay) {</b>
<b class="nc">&nbsp;            return DROPSHUTTLE;</b>
<b class="fc">&nbsp;        } else if (bay instanceof ReinforcedRepairFacility) {</b>
<b class="nc">&nbsp;            return REPAIR_REINFORCED;</b>
<b class="fc">&nbsp;        } else if (bay instanceof NavalRepairFacility) {</b>
<b class="nc">&nbsp;            if (((NavalRepairFacility) bay).isPressurized()) {</b>
<b class="nc">&nbsp;                return ((NavalRepairFacility) bay).hasARTS() ? ARTS_REPAIR_PRESSURIZED : REPAIR_PRESSURIZED;</b>
&nbsp;            } else {
<b class="nc">&nbsp;                return ((NavalRepairFacility) bay).hasARTS() ? ARTS_REPAIR_UNPRESSURIZED : REPAIR_UNPRESSURIZED;</b>
&nbsp;            }
<b class="fc">&nbsp;        } else if (bay instanceof SmallCraftBay) {</b>
<b class="fc">&nbsp;            return ((SmallCraftBay) bay).hasARTS() ? ARTS_SMALL_CRAFT : SMALL_CRAFT;</b>
<b class="fc">&nbsp;        } else if (bay instanceof LiquidCargoBay) {</b>
<b class="fc">&nbsp;            return LIQUID_CARGO;</b>
<b class="fc">&nbsp;        } else if (bay instanceof LivestockCargoBay) {</b>
<b class="fc">&nbsp;            return LIVESTOCK_CARGO;</b>
<b class="fc">&nbsp;        } else if (bay instanceof RefrigeratedCargoBay) {</b>
<b class="fc">&nbsp;            return REFRIGERATED_CARGO;</b>
<b class="fc">&nbsp;        } else if (bay instanceof InsulatedCargoBay) {</b>
<b class="fc">&nbsp;            return INSULATED_CARGO;</b>
<b class="fc">&nbsp;        } else if (bay instanceof CargoBay) {</b>
<b class="fc">&nbsp;            return CARGO;</b>
&nbsp;        } else {
&nbsp;            // Crew quarters are implemented as bays and should not be mixed with transport bays
<b class="nc">&nbsp;            return null;</b>
&nbsp;        }
&nbsp;    }
&nbsp;    
&nbsp;    /**
&nbsp;     * @return true if the bay is a type of cargo bay rather than a unit transport bay.
&nbsp;     */
&nbsp;    public boolean isCargoBay() {
<b class="fc">&nbsp;        return ordinal() &gt;= CARGO.ordinal();</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * @return true if the bay is an infantry transport bay (including battlearmor)
&nbsp;     */
&nbsp;    public boolean isInfantryBay() {
<b class="nc">&nbsp;        return (ordinal() &gt;= INFANTRY_FOOT.ordinal())</b>
<b class="nc">&nbsp;                &amp;&amp; (ordinal() &lt;= CS_BATTLE_ARMOR.ordinal());</b>
&nbsp;    }
&nbsp;    
&nbsp;    /**
&nbsp;     * Determines whether the bay is legal to mount on a given &lt;code&gt;Entity&lt;/code&gt;. Whether it is
&nbsp;     * technically possible or practical is another matter.
&nbsp;     * 
&nbsp;     * @param en The entity
&nbsp;     * @return   Whether the bay is legal
&nbsp;     */
&nbsp;    public boolean isLegalFor(Entity en) {
&nbsp;        //TODO: Container cargo bays aren&#39;t implemented, but when added they can be carried by
&nbsp;        // industrial but not battlemechs.
<b class="fc">&nbsp;        if (en.hasETypeFlag(Entity.ETYPE_MECH)) {</b>
<b class="fc">&nbsp;            return isCargoBay() &amp;&amp; (this != LIVESTOCK_CARGO);</b>
<b class="fc">&nbsp;        } else if ((this == DROPSHUTTLE)</b>
&nbsp;                || (this == REPAIR_UNPRESSURIZED)
&nbsp;                || (this == REPAIR_PRESSURIZED)
&nbsp;                || (this == REPAIR_REINFORCED)) {
<b class="nc">&nbsp;            return en.hasETypeFlag(Entity.ETYPE_JUMPSHIP);</b>
&nbsp;        } else {
<b class="fc">&nbsp;            return en.hasETypeFlag(Entity.ETYPE_TANK)</b>
<b class="fc">&nbsp;                    || en.hasETypeFlag(Entity.ETYPE_AERO);</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * @return Whether the bay type requires a designated armor facing.
&nbsp;     */
&nbsp;    public boolean requiresFacing() {
<b class="nc">&nbsp;        return (this == DROPSHUTTLE)</b>
&nbsp;                || (this == REPAIR_UNPRESSURIZED)
&nbsp;                || (this == REPAIR_PRESSURIZED)
&nbsp;                || (this == REPAIR_REINFORCED)
&nbsp;                || (this == ARTS_REPAIR_PRESSURIZED)
&nbsp;                || (this == ARTS_REPAIR_UNPRESSURIZED);
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * @return Whether the bay capacity can be changed.
&nbsp;     */
&nbsp;    public boolean hasVariableSize() {
<b class="nc">&nbsp;        return this != DROPSHUTTLE;</b>
&nbsp;    }
&nbsp;}
&nbsp;
</code>
</pre>
</div>

<script type="text/javascript">
(function() {
    var msie = false, msie9 = false;
    /*@cc_on
      msie = true;
      @if (@_jscript_version >= 9)
        msie9 = true;
      @end
    @*/

    if (!msie || msie && msie9) {
      hljs.highlightAll()
      hljs.initLineNumbersOnLoad();
    }
})();
</script>

<div class="footer">
    
    <div style="float:right;">generated on 2023-05-16 16:28</div>
</div>
</body>
</html>
